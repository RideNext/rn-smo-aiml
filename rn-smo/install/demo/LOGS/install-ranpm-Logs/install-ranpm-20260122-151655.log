[0;32m=========================================================================[0m
[0;32mStarting RANPM Installation[0m
[0;32mLog file: /home/bluefox/Manish/performance/rn-smo_cleanup/install/demo/LOGS/install-ranpm-Logs//install-ranpm-20260122-151655.log[0m
[0;32m=========================================================================[0m

[1;33mChecking prerequisites...[0m
[0;32mâœ“ Found: kubectl[0m
[0;32mâœ“ Found: helm[0m
[0;32mâœ“ Found: envsubst[0m
[0;32mâœ“ Found: jq[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/install-nrt.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/install-nrt.sh...[0m
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Kubernetes control plane host: 192.168.128.104
Host obtained from current kubectl context
Kubernetes version : v1.32.2
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Checking requirements
 Checking if istio is installed
  OK
 Checking if jq is installed
  OK
 Checking if envsubst is installed
  OK
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Restarting istiod, workaround to refresh jwks cache
deployment.apps/istiod restarted
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
##### Installing chart: nrt-base-0
NAME: nrt-base-0
LAST DEPLOYED: Thu Jan 22 15:16:56 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None
Cluster ip: 192.168.128.104
Nodeport to keycloak proxy: 31784
Get admin token
Admin token: eyJhbGciOi...
Creating realms: nonrtric-realm
 Attempt to create realm: nonrtric-realm
  OK, create_realms
Attempt to create clients console-setup for realm: nonrtric-realm
 Creating client: console-setup
 OK, create_clients
Attempt to generate secret for clients console-setup in realm nonrtric-realm
  Client id for client console-setup in realm nonrtric-realm: adfdd204-87bf-4fd7-b6dc-8da59c10bc3f
  Creating secret
   Client secret for client console-setup in realm nonrtric-realm: C3P2fSq7f0vVEWuM0B1V3N9JEOBfF1UN
   OK, generate_client_secrets

Get admin token
Admin token: eyJhbGciOi...
##### Installing charts: strimzi and nrt-base-1
"strimzi" has been added to your repositories
Installing Strimzi Kafka operator version: 0.39.0
NAME: strimzi-kafka-crds
LAST DEPLOYED: Thu Jan 22 15:17:25 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None
NOTES:
Thank you for installing strimzi-kafka-operator-0.39.0

To create a Kafka cluster refer to the following documentation.

https://strimzi.io/docs/operators/latest/deploying.html#deploying-cluster-operator-helm-chart-str
Error: INSTALLATION FAILED: 2 errors occurred:
	* services "opa-kafka" already exists
	* deployments.apps "opa-kafka" already exists


Waiting for influx db - there may be error messages while trying...
error: unable to upgrade connection: container not found ("influxdb2")
Configuring db
User	Organization	Bucket
admin	est		pm-bucket
secret/influxdb-api-token patched
Wait for kafka
  2 sec, retrying at 7 sec                        [0K  8 sec, retrying at 13 sec                        [0K  15 sec, retrying at 20 sec                        [0K  22 sec, retrying at 27 sec                        [0K  28 sec, retrying at 33 sec                        [0K
Creating topic: file-ready with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Created topic file-ready.
Creating topic: collected-file with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Created topic collected-file.
Creating topic: json-file-ready-kp with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Created topic json-file-ready-kp.
Creating topic: json-file-ready-kpadp with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Created topic json-file-ready-kpadp.
Creating topic: pmreports with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Created topic pmreports.

Wait for SDNR

##### Installing: chart nonrtricgateway
NAME: nonrtricgateway
LAST DEPLOYED: Thu Jan 22 15:19:05 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None

##### Installing: chart controlpanel
NAME: controlpanel
LAST DEPLOYED: Thu Jan 22 15:19:37 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None

##### Installing: chart ran-o1-sim
NAME: ran-o1-sim-du
LAST DEPLOYED: Thu Jan 22 15:20:00 2026
NAMESPACE: ran-o1-sim
STATUS: deployed
REVISION: 1
TEST SUITE: None

##### Installing chart: nrt-pm
Updating dfc truststore
 Adding https ca cert to dfc truststore
Owner: EMAILADDRESS=a@example.com, OU=EST, O=EST, L=., ST=., C=SE
Issuer: EMAILADDRESS=a@example.com, OU=EST, O=EST, L=., ST=., C=SE
Serial number: 5ac065137477243e239f0eec2e754785cf508dee
Valid from: Thu Jun 19 12:15:38 IST 2025 until: Wed Oct 20 12:15:38 IST 3024
Certificate fingerprints:
	 SHA1: 5C:74:95:4C:89:E8:46:0C:38:FC:1D:2F:70:4D:E6:7F:4B:34:7D:DD
	 SHA256: 12:55:0E:ED:5A:01:44:2F:67:75:38:DB:F5:BC:61:EC:57:55:9B:53:87:6A:2D:44:F6:8E:CD:45:E9:3D:7A:28
Signature algorithm name: SHA256withRSA
Subject Public Key Algorithm: 2048-bit RSA key
Version: 3

Extensions: 

#1: ObjectId: 2.5.29.35 Criticality=false
AuthorityKeyIdentifier [
KeyIdentifier [
0000: 41 1C 22 88 BD 47 5D 05   61 59 54 5C BF 80 D6 1B  A."..G].aYT\....
0010: B5 B1 F2 20                                        ... 
]
]

#2: ObjectId: 2.5.29.19 Criticality=true
BasicConstraints:[
  CA:true
  PathLen: no limit
]

#3: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: 41 1C 22 88 BD 47 5D 05   61 59 54 5C BF 80 D6 1B  A."..G].aYT\....
0010: B5 B1 F2 20                                        ... 
]
]

Trust this certificate? [no]:  Certificate was added to keystore
Attempt to create clients kafka-producer-pm-xml2json for realm: nonrtric-realm
 Creating client: kafka-producer-pm-xml2json
Get admin token
Admin token: eyJhbGciOi...
 OK, create_clients
Attempt to generate secret for clients kafka-producer-pm-xml2json in realm nonrtric-realm
  Client id for client kafka-producer-pm-xml2json in realm nonrtric-realm: 61f3e766-1ea5-4940-8143-37e2b16d48e6
  Creating secret
   Client secret for client kafka-producer-pm-xml2json in realm nonrtric-realm: nScvIB5twsJP9Eb03MXxq1m8UpMybaKN
   OK, generate_client_secrets
Attempt to create clients kafka-producer-pm-json2kafka for realm: nonrtric-realm
 Creating client: kafka-producer-pm-json2kafka
 OK, create_clients
Attempt to generate secret for clients kafka-producer-pm-json2kafka in realm nonrtric-realm
  Client id for client kafka-producer-pm-json2kafka in realm nonrtric-realm: 46b06445-0750-4d88-b895-186041a21107
  Creating secret
   Client secret for client kafka-producer-pm-json2kafka in realm nonrtric-realm: roO6iSiygdDYMcFFuybce7XgBEOPX2YL
   OK, generate_client_secrets
Attempt to create clients kafka-producer-pm-json2influx for realm: nonrtric-realm
 Creating client: kafka-producer-pm-json2influx
 OK, create_clients
Attempt to generate secret for clients kafka-producer-pm-json2influx in realm nonrtric-realm
  Client id for client kafka-producer-pm-json2influx in realm nonrtric-realm: 40104634-e7a9-4fe3-982e-bf2a055b335b
  Creating secret
   Client secret for client kafka-producer-pm-json2influx in realm nonrtric-realm: vXoHtwPl1odB3T45ZueJENxbkiKsgHvE
   OK, generate_client_secrets
Bucket  does not exist, creating
Bucket pm_data created, OK
Attempt to create clients pm-producer-json2kafka for realm: nonrtric-realm
 Creating client: pm-producer-json2kafka
 OK, create_clients
Attempt to generate secret for clients pm-producer-json2kafka in realm nonrtric-realm
  Client id for client pm-producer-json2kafka in realm nonrtric-realm: ff6126d1-b213-4382-b9eb-255aa71cdd4b
  Creating secret
   Client secret for client pm-producer-json2kafka in realm nonrtric-realm: hNYYeqCzwwRy9oWr87buXGSiexzoCVeB
   OK, generate_client_secrets
Attempt to create clients dfc for realm: nonrtric-realm
 Creating client: dfc
 OK, create_clients
Attempt to generate secret for clients dfc in realm nonrtric-realm
  Client id for client dfc in realm nonrtric-realm: 760c6a4f-318b-4e3b-a67c-368bc4272e66
  Creating secret
   Client secret for client dfc in realm nonrtric-realm: 2cUkwU4nuUdrpK2JRZwUeIQSCGClDyyZ
   OK, generate_client_secrets
NAME: nrt-pm
LAST DEPLOYED: Thu Jan 22 15:20:08 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None

######################################################################
ranpm installed
Wait until all pods are running before installation additional charts
Do: 'kubectl get po -n ridenext-nonrt' and verify that all pods are in status Running
 and all included containers are Ready
######################################################################
[0;32mâœ“ scripts/install-nrt.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/install-pm-log.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/install-pm-log.sh...[0m
Installing pmlog
Cluster ip: 192.168.128.104
Nodeport to keycloak proxy: 31784
Get admin token
Admin token: eyJhbGciOi...
Attempt to create clients nrt-pm-log for realm: nonrtric-realm
 Creating client: nrt-pm-log
 OK, create_clients
Attempt to generate secret for clients nrt-pm-log in realm nonrtric-realm
  Client id for client nrt-pm-log in realm nonrtric-realm: 3bbbd000-51f0-44d0-a896-5eb47a036cca
  Creating secret
   Client secret for client nrt-pm-log in realm nonrtric-realm: 6uGeTSj9OOWmJugreMyVZ8TKtVp7x9B8
   OK, generate_client_secrets
Creating bucket pm-logg-bucket in influxdb2
Bucket  does not exist, creating
Bucket pm-logg-bucket created, OK
 helm install...
NAME: nrt-pm-log
LAST DEPLOYED: Thu Jan 22 15:20:21 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None
done
[0;32mâœ“ scripts/install-pm-log.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/install-pm-influx-job.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/install-pm-influx-job.sh...[0m
Kubernetes control plane host: 192.168.128.104
+ echo 'Installation pm to influx job'
Installation pm to influx job
+ echo ' Retriving influxdb2 access token...'
 Retriving influxdb2 access token...
++ get_influxdb2_token influxdb2-0 ridenext-nonrt
++ '[' 2 -ne 2 ']'
++ __influxdb2_access_token=
++ '[' -z '' ']'
+++ kubectl exec -n ridenext-nonrt influxdb2-0 -- influx config ls --json
+++ jq -r .default.token
++ export __influxdb2_access_token=TgQcTQChpKKy4rxBDcb1dbqzJIam9spDy-DqRbmfT8eP31wQrjBLBVdMk0-lq7qKwLWK-96ixVQa5PjHLpgTXQ==
++ __influxdb2_access_token=TgQcTQChpKKy4rxBDcb1dbqzJIam9spDy-DqRbmfT8eP31wQrjBLBVdMk0-lq7qKwLWK-96ixVQa5PjHLpgTXQ==
++ '[' 0 -ne 0 ']'
++ '[' -z TgQcTQChpKKy4rxBDcb1dbqzJIam9spDy-DqRbmfT8eP31wQrjBLBVdMk0-lq7qKwLWK-96ixVQa5PjHLpgTXQ== ']'
++ echo -n TgQcTQChpKKy4rxBDcb1dbqzJIam9spDy-DqRbmfT8eP31wQrjBLBVdMk0-lq7qKwLWK-96ixVQa5PjHLpgTXQ==
++ return 0
+ INFLUXDB2_TOKEN=TgQcTQChpKKy4rxBDcb1dbqzJIam9spDy-DqRbmfT8eP31wQrjBLBVdMk0-lq7qKwLWK-96ixVQa5PjHLpgTXQ==
+ bucket=pm-bucket
+ echo 'Creating bucket pm-bucket in influxdb2'
Creating bucket pm-bucket in influxdb2
+ create_influxdb2_bucket influxdb2-0 ridenext-nonrt pm-bucket
++ kubectl exec -n ridenext-nonrt influxdb2-0 -- influx bucket ls --json
++ jq 'any(.[].name; . == "pm-bucket")'
+ RES=true
+ '[' true == true ']'
+ echo 'Bucket  exist, OK'
Bucket  exist, OK
+ . scripts/helper-scripts/populate_keycloak.sh
++ echo 'Cluster ip: 192.168.128.104'
Cluster ip: 192.168.128.104
+++ kubectl get svc -n ridenext-nonrt keycloak-proxy --output 'jsonpath={.spec.ports[?(@.name=="http")].nodePort}'
++ KC_PROXY_PORT=31784
++ echo 'Nodeport to keycloak proxy: 31784'
Nodeport to keycloak proxy: 31784
++ __get_admin_token
++ echo 'Get admin token'
Get admin token
++ ADMIN_TOKEN=
++ '[' 0 -lt 20 ']'
+++ curl -s -X POST 192.168.128.104:31784/realms/master/protocol/openid-connect/token --max-time 2 -H 'Content-Type: application/x-www-form-urlencoded' -d username=admin -d password=admin -d grant_type=password -d client_id=admin-cli
+++ jq -r .access_token
++ ADMIN_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJIV1pKeHhYZ2pFZURfU2ZfOWo0aTFYclNoSDB0NlBWVk1OVW5wbVJfU0pNIn0.eyJleHAiOjE3NjkwNzU0ODIsImlhdCI6MTc2OTA3NTQyMiwianRpIjoiOGM3YTdmNzgtNzcyZS00ZGUyLWJmOTUtOGE0YTVjZTk5ZWFlIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjNhZTY1YzMxLTk4M2EtNDdkYi1hYjc1LWRkM2FmMWZiMDY0MCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJkMzIzZjAzYS0wY2Y5LTRkOWUtODdhMC05MDhjZTcxNzUyMWQiLCJhY3IiOiIxIiwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwic2lkIjoiZDMyM2YwM2EtMGNmOS00ZDllLTg3YTAtOTA4Y2U3MTc1MjFkIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.aOMs49j2pavFBziOX5eaEiHIKRCdxM4U2Ad8KfJV9ruZvQkW1fDjvbGX0bFixxiBB6i-3QxIZaFRqMUVHbtGn19BoMl567s0zJDRSCfB7haoTayk7a0nLBs2zv9Ppei2f6EgzWiD7dLjdH_Whgi77OF_VvEFc4iUPE93ksspM8vvhm8_W3shBbe-XHTogS_9BIAqGtM7gv6zU0L8s25mIKvyLKWduxZznXDbTC_EcDhONh0YTielYn4PGyCXUPjYbmiZ2L1OHhvA4Si8g_yJx-Z5yQvmZ8GTlz-xyRlDrx-qgXk1YXrswkigrbiXpKG96Vd6QXleat_tCDPHO7w3Fg
++ '[' 991 -lt 20 ']'
++ '[' 991 -lt 20 ']'
++ echo 'Admin token: eyJhbGciOi...'
Admin token: eyJhbGciOi...
++ echo eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJIV1pKeHhYZ2pFZURfU2ZfOWo0aTFYclNoSDB0NlBWVk1OVW5wbVJfU0pNIn0.eyJleHAiOjE3NjkwNzU0ODIsImlhdCI6MTc2OTA3NTQyMiwianRpIjoiOGM3YTdmNzgtNzcyZS00ZGUyLWJmOTUtOGE0YTVjZTk5ZWFlIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjNhZTY1YzMxLTk4M2EtNDdkYi1hYjc1LWRkM2FmMWZiMDY0MCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJkMzIzZjAzYS0wY2Y5LTRkOWUtODdhMC05MDhjZTcxNzUyMWQiLCJhY3IiOiIxIiwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwic2lkIjoiZDMyM2YwM2EtMGNmOS00ZDllLTg3YTAtOTA4Y2U3MTc1MjFkIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.aOMs49j2pavFBziOX5eaEiHIKRCdxM4U2Ad8KfJV9ruZvQkW1fDjvbGX0bFixxiBB6i-3QxIZaFRqMUVHbtGn19BoMl567s0zJDRSCfB7haoTayk7a0nLBs2zv9Ppei2f6EgzWiD7dLjdH_Whgi77OF_VvEFc4iUPE93ksspM8vvhm8_W3shBbe-XHTogS_9BIAqGtM7gv6zU0L8s25mIKvyLKWduxZznXDbTC_EcDhONh0YTielYn4PGyCXUPjYbmiZ2L1OHhvA4Si8g_yJx-Z5yQvmZ8GTlz-xyRlDrx-qgXk1YXrswkigrbiXpKG96Vd6QXleat_tCDPHO7w3Fg
++ __ADM_TOKEN_TS=1
+ cid=console-setup
++ get_client_token nonrtric-realm console-setup
++ __check_admin_token
++ __diff=0
++ '[' 0 -gt 15 ']'
++ __realm=nonrtric-realm
++ __client=console-setup
+++ __get_client_id nonrtric-realm console-setup
++++ curl -s -X GET '192.168.128.104:31784/admin/realms/nonrtric-realm/clients?clientId=console-setup' -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJIV1pKeHhYZ2pFZURfU2ZfOWo0aTFYclNoSDB0NlBWVk1OVW5wbVJfU0pNIn0.eyJleHAiOjE3NjkwNzU0ODIsImlhdCI6MTc2OTA3NTQyMiwianRpIjoiOGM3YTdmNzgtNzcyZS00ZGUyLWJmOTUtOGE0YTVjZTk5ZWFlIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjNhZTY1YzMxLTk4M2EtNDdkYi1hYjc1LWRkM2FmMWZiMDY0MCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJkMzIzZjAzYS0wY2Y5LTRkOWUtODdhMC05MDhjZTcxNzUyMWQiLCJhY3IiOiIxIiwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwic2lkIjoiZDMyM2YwM2EtMGNmOS00ZDllLTg3YTAtOTA4Y2U3MTc1MjFkIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.aOMs49j2pavFBziOX5eaEiHIKRCdxM4U2Ad8KfJV9ruZvQkW1fDjvbGX0bFixxiBB6i-3QxIZaFRqMUVHbtGn19BoMl567s0zJDRSCfB7haoTayk7a0nLBs2zv9Ppei2f6EgzWiD7dLjdH_Whgi77OF_VvEFc4iUPE93ksspM8vvhm8_W3shBbe-XHTogS_9BIAqGtM7gv6zU0L8s25mIKvyLKWduxZznXDbTC_EcDhONh0YTielYn4PGyCXUPjYbmiZ2L1OHhvA4Si8g_yJx-Z5yQvmZ8GTlz-xyRlDrx-qgXk1YXrswkigrbiXpKG96Vd6QXleat_tCDPHO7w3Fg'
+++ __client_data='[{"id":"adfdd204-87bf-4fd7-b6dc-8da59c10bc3f","clientId":"console-setup","rootUrl":"https://example.com/example/","adminUrl":"https://example.com/example/","surrogateAuthRequired":false,"enabled":true,"alwaysDisplayInConsole":false,"clientAuthenticatorType":"client-secret","secret":"C3P2fSq7f0vVEWuM0B1V3N9JEOBfF1UN","redirectUris":[],"webOrigins":[],"notBefore":0,"bearerOnly":false,"consentRequired":false,"standardFlowEnabled":true,"implicitFlowEnabled":false,"directAccessGrantsEnabled":false,"serviceAccountsEnabled":true,"publicClient":false,"frontchannelLogout":false,"protocol":"openid-connect","attributes":{"client.secret.creation.time":"1769075242"},"authenticationFlowBindingOverrides":{},"fullScopeAllowed":true,"nodeReRegistrationTimeout":-1,"protocolMappers":[{"id":"b511a4ff-f8bb-4494-ad13-f67543834baf","name":"Client ID","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientId","id.token.claim":"true","access.token.claim":"true","claim.name":"clientId","jsonType.label":"String"}},{"id":"e66f55b0-8e37-48c0-83b2-a6591ad17912","name":"Client IP Address","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientAddress","id.token.claim":"true","access.token.claim":"true","claim.name":"clientAddress","jsonType.label":"String"}},{"id":"73cb1f2f-8639-42db-b89a-fb4750569840","name":"Client Host","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientHost","id.token.claim":"true","access.token.claim":"true","claim.name":"clientHost","jsonType.label":"String"}}],"defaultClientScopes":["web-origins","acr","profile","roles","email"],"optionalClientScopes":["address","phone","offline_access","microprofile-jwt"],"access":{"view":true,"configure":true,"manage":true}}]'
+++ '[' 0 -ne 0 ']'
++++ jq -r '.[0].id'
++++ echo '[{"id":"adfdd204-87bf-4fd7-b6dc-8da59c10bc3f","clientId":"console-setup","rootUrl":"https://example.com/example/","adminUrl":"https://example.com/example/","surrogateAuthRequired":false,"enabled":true,"alwaysDisplayInConsole":false,"clientAuthenticatorType":"client-secret","secret":"C3P2fSq7f0vVEWuM0B1V3N9JEOBfF1UN","redirectUris":[],"webOrigins":[],"notBefore":0,"bearerOnly":false,"consentRequired":false,"standardFlowEnabled":true,"implicitFlowEnabled":false,"directAccessGrantsEnabled":false,"serviceAccountsEnabled":true,"publicClient":false,"frontchannelLogout":false,"protocol":"openid-connect","attributes":{"client.secret.creation.time":"1769075242"},"authenticationFlowBindingOverrides":{},"fullScopeAllowed":true,"nodeReRegistrationTimeout":-1,"protocolMappers":[{"id":"b511a4ff-f8bb-4494-ad13-f67543834baf","name":"Client' 'ID","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientId","id.token.claim":"true","access.token.claim":"true","claim.name":"clientId","jsonType.label":"String"}},{"id":"e66f55b0-8e37-48c0-83b2-a6591ad17912","name":"Client' IP 'Address","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientAddress","id.token.claim":"true","access.token.claim":"true","claim.name":"clientAddress","jsonType.label":"String"}},{"id":"73cb1f2f-8639-42db-b89a-fb4750569840","name":"Client' 'Host","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientHost","id.token.claim":"true","access.token.claim":"true","claim.name":"clientHost","jsonType.label":"String"}}],"defaultClientScopes":["web-origins","acr","profile","roles","email"],"optionalClientScopes":["address","phone","offline_access","microprofile-jwt"],"access":{"view":true,"configure":true,"manage":true}}]'
+++ __client_id=adfdd204-87bf-4fd7-b6dc-8da59c10bc3f
+++ echo adfdd204-87bf-4fd7-b6dc-8da59c10bc3f
+++ return 0
++ __client_id=adfdd204-87bf-4fd7-b6dc-8da59c10bc3f
++ '[' 0 -ne 0 ']'
+++ curl -s -f -X GET 192.168.128.104:31784/admin/realms/nonrtric-realm/clients/adfdd204-87bf-4fd7-b6dc-8da59c10bc3f/client-secret -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJIV1pKeHhYZ2pFZURfU2ZfOWo0aTFYclNoSDB0NlBWVk1OVW5wbVJfU0pNIn0.eyJleHAiOjE3NjkwNzU0ODIsImlhdCI6MTc2OTA3NTQyMiwianRpIjoiOGM3YTdmNzgtNzcyZS00ZGUyLWJmOTUtOGE0YTVjZTk5ZWFlIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjNhZTY1YzMxLTk4M2EtNDdkYi1hYjc1LWRkM2FmMWZiMDY0MCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJkMzIzZjAzYS0wY2Y5LTRkOWUtODdhMC05MDhjZTcxNzUyMWQiLCJhY3IiOiIxIiwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwic2lkIjoiZDMyM2YwM2EtMGNmOS00ZDllLTg3YTAtOTA4Y2U3MTc1MjFkIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.aOMs49j2pavFBziOX5eaEiHIKRCdxM4U2Ad8KfJV9ruZvQkW1fDjvbGX0bFixxiBB6i-3QxIZaFRqMUVHbtGn19BoMl567s0zJDRSCfB7haoTayk7a0nLBs2zv9Ppei2f6EgzWiD7dLjdH_Whgi77OF_VvEFc4iUPE93ksspM8vvhm8_W3shBbe-XHTogS_9BIAqGtM7gv6zU0L8s25mIKvyLKWduxZznXDbTC_EcDhONh0YTielYn4PGyCXUPjYbmiZ2L1OHhvA4Si8g_yJx-Z5yQvmZ8GTlz-xyRlDrx-qgXk1YXrswkigrbiXpKG96Vd6QXleat_tCDPHO7w3Fg'
++ __client_secret='{"type":"secret","value":"C3P2fSq7f0vVEWuM0B1V3N9JEOBfF1UN"}'
++ '[' 0 -ne 0 ']'
+++ echo '{"type":"secret","value":"C3P2fSq7f0vVEWuM0B1V3N9JEOBfF1UN"}'
+++ jq -r .value
++ __client_secret=C3P2fSq7f0vVEWuM0B1V3N9JEOBfF1UN
+++ curl -s -f -X POST 192.168.128.104:31784/realms/nonrtric-realm/protocol/openid-connect/token -H Content-Type:application/x-www-form-urlencoded -d client_id=console-setup -d client_secret=C3P2fSq7f0vVEWuM0B1V3N9JEOBfF1UN -d grant_type=client_credentials
++ __TMP_TOKEN='{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4NzRneVA3TV9UeDd0akxhaTQ4aU52emlGYWl3ZVZSazBxdWg3WTdFZkhjIn0.eyJleHAiOjE3NjkwNzU3MjIsImlhdCI6MTc2OTA3NTQyMiwianRpIjoiODc0MjlkOGItNmQyYS00ODUwLTg1MzgtMzc0N2NiYmRkMDM2IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhhOTNkZTAzLThhNmUtNGQ4OC1hYTNmLTNlYzAzNmM3MjgxYyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuNjEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC42MSJ9.NMRTf4CQ7lx42ym_1-w1TW8A6cWcDscDRPxES10R3S1lKKIEgBG7AnjS7cjFrckXMJbaJ2tVM4oM9e0eQ5R4_NCOXCSGyPljiA7upPS5NcgoGgJTesEXcjS-_qgQTn-k7BOM10KohM3VWzuPgTAfRmVIPTFgG1VNw35pQRLDmKIVM34A1xXkPp9MigwCg0rsFy3HJsCruhFNp6OD1eQqXJxz8zSyCshjsJs5pmdTRDkpqh0cUpZvesNa7D2r931f9xdeTCq7dkPGCPHZhvx9GcEMFNCP4OWgfgvrdYl14JjqV7RB9U8iNDTQguC5M6Ypgl3_OF07NkVmezzFGFvpdQ","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"profile email"}'
++ '[' 0 -ne 0 ']'
++ echo '{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4NzRneVA3TV9UeDd0akxhaTQ4aU52emlGYWl3ZVZSazBxdWg3WTdFZkhjIn0.eyJleHAiOjE3NjkwNzU3MjIsImlhdCI6MTc2OTA3NTQyMiwianRpIjoiODc0MjlkOGItNmQyYS00ODUwLTg1MzgtMzc0N2NiYmRkMDM2IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhhOTNkZTAzLThhNmUtNGQ4OC1hYTNmLTNlYzAzNmM3MjgxYyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuNjEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC42MSJ9.NMRTf4CQ7lx42ym_1-w1TW8A6cWcDscDRPxES10R3S1lKKIEgBG7AnjS7cjFrckXMJbaJ2tVM4oM9e0eQ5R4_NCOXCSGyPljiA7upPS5NcgoGgJTesEXcjS-_qgQTn-k7BOM10KohM3VWzuPgTAfRmVIPTFgG1VNw35pQRLDmKIVM34A1xXkPp9MigwCg0rsFy3HJsCruhFNp6OD1eQqXJxz8zSyCshjsJs5pmdTRDkpqh0cUpZvesNa7D2r931f9xdeTCq7dkPGCPHZhvx9GcEMFNCP4OWgfgvrdYl14JjqV7RB9U8iNDTQguC5M6Ypgl3_OF07NkVmezzFGFvpdQ","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"profile' 'email"}'
++ jq -r .access_token
++ return 0
+ TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4NzRneVA3TV9UeDd0akxhaTQ4aU52emlGYWl3ZVZSazBxdWg3WTdFZkhjIn0.eyJleHAiOjE3NjkwNzU3MjIsImlhdCI6MTc2OTA3NTQyMiwianRpIjoiODc0MjlkOGItNmQyYS00ODUwLTg1MzgtMzc0N2NiYmRkMDM2IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhhOTNkZTAzLThhNmUtNGQ4OC1hYTNmLTNlYzAzNmM3MjgxYyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuNjEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC42MSJ9.NMRTf4CQ7lx42ym_1-w1TW8A6cWcDscDRPxES10R3S1lKKIEgBG7AnjS7cjFrckXMJbaJ2tVM4oM9e0eQ5R4_NCOXCSGyPljiA7upPS5NcgoGgJTesEXcjS-_qgQTn-k7BOM10KohM3VWzuPgTAfRmVIPTFgG1VNw35pQRLDmKIVM34A1xXkPp9MigwCg0rsFy3HJsCruhFNp6OD1eQqXJxz8zSyCshjsJs5pmdTRDkpqh0cUpZvesNa7D2r931f9xdeTCq7dkPGCPHZhvx9GcEMFNCP4OWgfgvrdYl14JjqV7RB9U8iNDTQguC5M6Ypgl3_OF07NkVmezzFGFvpdQ
+ JOB='{"info_type_id": "json-file-data-from-filestore",
     "job_owner": "console",
     "status_notification_uri": "http://callback.ridenext-nonrt:80/post",
     "job_definition": {
        "db-url":"http://influxdb2.ridenext-nonrt:8086",
        "db-org":"est",
        "db-bucket":"pm-bucket",
        "db-token":"TgQcTQChpKKy4rxBDcb1dbqzJIam9spDy-DqRbmfT8eP31wQrjBLBVdMk0-lq7qKwLWK-96ixVQa5PjHLpgTXQ==",
        "filterType":"pmdata",
        "filter":{}
     }}'
+ echo '{"info_type_id":' '"json-file-data-from-filestore",' '"job_owner":' '"console",' '"status_notification_uri":' '"http://callback.ridenext-nonrt:80/post",' '"job_definition":' '{' '"db-url":"http://influxdb2.ridenext-nonrt:8086",' '"db-org":"est",' '"db-bucket":"pm-bucket",' '"db-token":"TgQcTQChpKKy4rxBDcb1dbqzJIam9spDy-DqRbmfT8eP31wQrjBLBVdMk0-lq7qKwLWK-96ixVQa5PjHLpgTXQ==",' '"filterType":"pmdata",' '"filter":{}' '}}'
+ create_ics_job kp-influx-json 0 eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4NzRneVA3TV9UeDd0akxhaTQ4aU52emlGYWl3ZVZSazBxdWg3WTdFZkhjIn0.eyJleHAiOjE3NjkwNzU3MjIsImlhdCI6MTc2OTA3NTQyMiwianRpIjoiODc0MjlkOGItNmQyYS00ODUwLTg1MzgtMzc0N2NiYmRkMDM2IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhhOTNkZTAzLThhNmUtNGQ4OC1hYTNmLTNlYzAzNmM3MjgxYyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuNjEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC42MSJ9.NMRTf4CQ7lx42ym_1-w1TW8A6cWcDscDRPxES10R3S1lKKIEgBG7AnjS7cjFrckXMJbaJ2tVM4oM9e0eQ5R4_NCOXCSGyPljiA7upPS5NcgoGgJTesEXcjS-_qgQTn-k7BOM10KohM3VWzuPgTAfRmVIPTFgG1VNw35pQRLDmKIVM34A1xXkPp9MigwCg0rsFy3HJsCruhFNp6OD1eQqXJxz8zSyCshjsJs5pmdTRDkpqh0cUpZvesNa7D2r931f9xdeTCq7dkPGCPHZhvx9GcEMFNCP4OWgfgvrdYl14JjqV7RB9U8iNDTQguC5M6Ypgl3_OF07NkVmezzFGFvpdQ
++ kubectl get svc -n ridenext-nonrt informationservice --output 'jsonpath={.spec.ports[?(@.name=="http")].nodePort}'
+ ICS_PROXY_PORT=31823
+ echo 'NodePort to ics: 31823'
NodePort to ics: 31823
+ JOB='{"info_type_id": "json-file-data-from-filestore", "job_owner": "console", "status_notification_uri": "http://callback.ridenext-nonrt:80/post", "job_definition": { "db-url":"http://influxdb2.ridenext-nonrt:8086", "db-org":"est", "db-bucket":"pm-bucket", "db-token":"TgQcTQChpKKy4rxBDcb1dbqzJIam9spDy-DqRbmfT8eP31wQrjBLBVdMk0-lq7qKwLWK-96ixVQa5PjHLpgTXQ==", "filterType":"pmdata", "filter":{} }}'
+ echo '{"info_type_id":' '"json-file-data-from-filestore",' '"job_owner":' '"console",' '"status_notification_uri":' '"http://callback.ridenext-nonrt:80/post",' '"job_definition":' '{' '"db-url":"http://influxdb2.ridenext-nonrt:8086",' '"db-org":"est",' '"db-bucket":"pm-bucket",' '"db-token":"TgQcTQChpKKy4rxBDcb1dbqzJIam9spDy-DqRbmfT8eP31wQrjBLBVdMk0-lq7qKwLWK-96ixVQa5PjHLpgTXQ==",' '"filterType":"pmdata",' '"filter":{}' '}}'
{"info_type_id": "json-file-data-from-filestore", "job_owner": "console", "status_notification_uri": "http://callback.ridenext-nonrt:80/post", "job_definition": { "db-url":"http://influxdb2.ridenext-nonrt:8086", "db-org":"est", "db-bucket":"pm-bucket", "db-token":"TgQcTQChpKKy4rxBDcb1dbqzJIam9spDy-DqRbmfT8eP31wQrjBLBVdMk0-lq7qKwLWK-96ixVQa5PjHLpgTXQ==", "filterType":"pmdata", "filter":{} }}
+ retcode=1
+ echo 'Creating job-kp-influx-json-0'
Creating job-kp-influx-json-0
+ '[' 1 -ne 0 ']'
+ '[' -z eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4NzRneVA3TV9UeDd0akxhaTQ4aU52emlGYWl3ZVZSazBxdWg3WTdFZkhjIn0.eyJleHAiOjE3NjkwNzU3MjIsImlhdCI6MTc2OTA3NTQyMiwianRpIjoiODc0MjlkOGItNmQyYS00ODUwLTg1MzgtMzc0N2NiYmRkMDM2IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhhOTNkZTAzLThhNmUtNGQ4OC1hYTNmLTNlYzAzNmM3MjgxYyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuNjEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC42MSJ9.NMRTf4CQ7lx42ym_1-w1TW8A6cWcDscDRPxES10R3S1lKKIEgBG7AnjS7cjFrckXMJbaJ2tVM4oM9e0eQ5R4_NCOXCSGyPljiA7upPS5NcgoGgJTesEXcjS-_qgQTn-k7BOM10KohM3VWzuPgTAfRmVIPTFgG1VNw35pQRLDmKIVM34A1xXkPp9MigwCg0rsFy3HJsCruhFNp6OD1eQqXJxz8zSyCshjsJs5pmdTRDkpqh0cUpZvesNa7D2r931f9xdeTCq7dkPGCPHZhvx9GcEMFNCP4OWgfgvrdYl14JjqV7RB9U8iNDTQguC5M6Ypgl3_OF07NkVmezzFGFvpdQ ']'
+ __bearer='Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4NzRneVA3TV9UeDd0akxhaTQ4aU52emlGYWl3ZVZSazBxdWg3WTdFZkhjIn0.eyJleHAiOjE3NjkwNzU3MjIsImlhdCI6MTc2OTA3NTQyMiwianRpIjoiODc0MjlkOGItNmQyYS00ODUwLTg1MzgtMzc0N2NiYmRkMDM2IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhhOTNkZTAzLThhNmUtNGQ4OC1hYTNmLTNlYzAzNmM3MjgxYyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuNjEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC42MSJ9.NMRTf4CQ7lx42ym_1-w1TW8A6cWcDscDRPxES10R3S1lKKIEgBG7AnjS7cjFrckXMJbaJ2tVM4oM9e0eQ5R4_NCOXCSGyPljiA7upPS5NcgoGgJTesEXcjS-_qgQTn-k7BOM10KohM3VWzuPgTAfRmVIPTFgG1VNw35pQRLDmKIVM34A1xXkPp9MigwCg0rsFy3HJsCruhFNp6OD1eQqXJxz8zSyCshjsJs5pmdTRDkpqh0cUpZvesNa7D2r931f9xdeTCq7dkPGCPHZhvx9GcEMFNCP4OWgfgvrdYl14JjqV7RB9U8iNDTQguC5M6Ypgl3_OF07NkVmezzFGFvpdQ'
++ curl -s -X PUT -w '%{http_code}' -H accept:application/json -H Content-Type:application/json http://192.168.128.104:31823/data-consumer/v1/info-jobs/job-kp-influx-json-0 --data-binary @.job.json -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4NzRneVA3TV9UeDd0akxhaTQ4aU52emlGYWl3ZVZSazBxdWg3WTdFZkhjIn0.eyJleHAiOjE3NjkwNzU3MjIsImlhdCI6MTc2OTA3NTQyMiwianRpIjoiODc0MjlkOGItNmQyYS00ODUwLTg1MzgtMzc0N2NiYmRkMDM2IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhhOTNkZTAzLThhNmUtNGQ4OC1hYTNmLTNlYzAzNmM3MjgxYyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuNjEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC42MSJ9.NMRTf4CQ7lx42ym_1-w1TW8A6cWcDscDRPxES10R3S1lKKIEgBG7AnjS7cjFrckXMJbaJ2tVM4oM9e0eQ5R4_NCOXCSGyPljiA7upPS5NcgoGgJTesEXcjS-_qgQTn-k7BOM10KohM3VWzuPgTAfRmVIPTFgG1VNw35pQRLDmKIVM34A1xXkPp9MigwCg0rsFy3HJsCruhFNp6OD1eQqXJxz8zSyCshjsJs5pmdTRDkpqh0cUpZvesNa7D2r931f9xdeTCq7dkPGCPHZhvx9GcEMFNCP4OWgfgvrdYl14JjqV7RB9U8iNDTQguC5M6Ypgl3_OF07NkVmezzFGFvpdQ'
+ STAT=201
+ retcode=0
+ echo 'curl return code: 0'
curl return code: 0
+ '[' 0 -eq 0 ']'
+ status=201
+ echo 'http status code: 201'
http status code: 201
+ '[' 201 == 200 ']'
+ '[' 201 == 201 ']'
+ echo 'Job created ok'
Job created ok
+ sleep 1
+ '[' 0 -ne 0 ']'
+ echo done
done
[0;32mâœ“ scripts/install-pm-influx-job.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/install-pm-rapp.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/install-pm-rapp.sh...[0m
Installing pmrapp
Creating client in keycloak
Creating topic: rapp-topic with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Created topic rapp-topic.
Cluster ip: 192.168.128.104
Nodeport to keycloak proxy: 31784
Get admin token
Admin token: eyJhbGciOi...
Attempt to create clients pm-rapp for realm: nonrtric-realm
 Creating client: pm-rapp
 OK, create_clients
Attempt to generate secret for clients pm-rapp in realm nonrtric-realm
  Client id for client pm-rapp in realm nonrtric-realm: 4ba6dabb-5897-499f-8b9b-9106192b3698
  Creating secret
   Client secret for client pm-rapp in realm nonrtric-realm: 6rlf63nqpDtOnvBvc79CLTeAFD6Q9ccE
   OK, generate_client_secrets
 helm install...
NAME: nrt-pm-rapp
LAST DEPLOYED: Thu Jan 22 15:20:27 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None
done
[0;32mâœ“ scripts/install-pm-rapp.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/install-pm-kafka-bridge.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/install-pm-kafka-bridge.sh...[0m
+ . scripts/helper-scripts/create_topic.sh
++ kube_get_controlplane_host
+++ kubectl config current-context
++ __current_context=kubernetes-admin@kubernetes
++ '[' 0 -ne 0 ']'
+++ kubectl config view -o 'jsonpath={.contexts[?(@.name=='\''kubernetes-admin@kubernetes'\'')].context.cluster}'
++ __cluster_name=kubernetes
++ '[' 0 -ne 0 ']'
+++ kubectl config view -o 'jsonpath={.clusters[?(@.name=='\''kubernetes'\'')].cluster.server}'
++ __cluster_server=https://192.168.128.104:6443
++ '[' 0 -ne 0 ']'
+++ echo https://192.168.128.104:6443
+++ awk '-F[/:]' '{print $4}'
++ __cluster_host=192.168.128.104
++ '[' 0 -ne 0 ']'
++ [[ 192.168.128.104 == \1\2\7\.\0\.\0\.\1 ]]
++ echo 192.168.128.104
++ return 0
+ export KUBERNETESHOST=192.168.128.104
+ KUBERNETESHOST=192.168.128.104
+ '[' 0 -ne 0 ']'
+ echo 'Kubernetes control plane host: 192.168.128.104'
Kubernetes control plane host: 192.168.128.104
+ echo 'Installation pm kafka bridge job - rapp-topic to pmreports'
Installation pm kafka bridge job - rapp-topic to pmreports
+ echo 'Creating pmreports topic if it doesn'\''t exist'
Creating pmreports topic if it doesn't exist
+ create_topic kafka-1-kafka-bootstrap.ridenext-nonrt:9092 pmreports 10
+ '[' 3 -lt 2 ']'
+ kafka=kafka-1-kafka-bootstrap.ridenext-nonrt:9092
+ topic=pmreports
+ partitions=10
+ '[' -z 10 ']'
+ echo 'Creating topic: pmreports with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092'
Creating topic: pmreports with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
+ kubectl exec -it kafka-client -n ridenext-nonrt -- bash -c 'kafka-topics --create --topic pmreports  --partitions 10 --bootstrap-server kafka-1-kafka-bootstrap.ridenext-nonrt:9092'
Error while executing topic command : Topic 'pmreports' already exists.
[2026-01-22 09:50:32,008] ERROR org.apache.kafka.common.errors.TopicExistsException: Topic 'pmreports' already exists.
 (kafka.admin.TopicCommand$)
command terminated with exit code 1
+ return 1
+ . scripts/helper-scripts/populate_keycloak.sh
++ echo 'Cluster ip: 192.168.128.104'
Cluster ip: 192.168.128.104
+++ kubectl get svc -n ridenext-nonrt keycloak-proxy --output 'jsonpath={.spec.ports[?(@.name=="http")].nodePort}'
++ KC_PROXY_PORT=31784
++ echo 'Nodeport to keycloak proxy: 31784'
Nodeport to keycloak proxy: 31784
++ __get_admin_token
++ echo 'Get admin token'
Get admin token
++ ADMIN_TOKEN=
++ '[' 0 -lt 20 ']'
+++ curl -s -X POST 192.168.128.104:31784/realms/master/protocol/openid-connect/token --max-time 2 -H 'Content-Type: application/x-www-form-urlencoded' -d username=admin -d password=admin -d grant_type=password -d client_id=admin-cli
+++ jq -r .access_token
++ ADMIN_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJIV1pKeHhYZ2pFZURfU2ZfOWo0aTFYclNoSDB0NlBWVk1OVW5wbVJfU0pNIn0.eyJleHAiOjE3NjkwNzU0OTIsImlhdCI6MTc2OTA3NTQzMiwianRpIjoiMjQ0MjJkNGItYTI5Yi00ODYxLTg4MmQtNTYzMTM3NzgzOGFhIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjNhZTY1YzMxLTk4M2EtNDdkYi1hYjc1LWRkM2FmMWZiMDY0MCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJmNjA2MDA3Yi0wYTNiLTRjYWYtYmYzNS0zZTI4ZjdmYjVhNTQiLCJhY3IiOiIxIiwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwic2lkIjoiZjYwNjAwN2ItMGEzYi00Y2FmLWJmMzUtM2UyOGY3ZmI1YTU0IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.Qa3wZXDdlPckONktL2rDRO3kmDo1X77aU7CTD0DTSf7U8hz3nEK1RCvb5fJDevDVLMy99dZ-CG3kt6FGeF9ElDOpiMzJyLbUl3qzpOKfOLQrnCvvp3Wt6ToikexLepalnChCuBghOvdQeGzdowhgbnL72LqImvNQTOihtlLk6_m8vkrayaQNA0t6Y6FBSn0LPMu2og1PYLRl3VQMIi7TWElYjOGqVdsaqSVe0K_C-toD1pj4Q9OFxVLBOTdPBzb9iHF693hvIaeYG7b3V0tJbn_H98LIDnZjwGjIO7ybWh47U8e4AZNLSyQCILlmBTwtia56zSAaf2UXvrIcM4KpMg
++ '[' 991 -lt 20 ']'
++ '[' 991 -lt 20 ']'
++ echo 'Admin token: eyJhbGciOi...'
Admin token: eyJhbGciOi...
++ echo eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJIV1pKeHhYZ2pFZURfU2ZfOWo0aTFYclNoSDB0NlBWVk1OVW5wbVJfU0pNIn0.eyJleHAiOjE3NjkwNzU0OTIsImlhdCI6MTc2OTA3NTQzMiwianRpIjoiMjQ0MjJkNGItYTI5Yi00ODYxLTg4MmQtNTYzMTM3NzgzOGFhIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjNhZTY1YzMxLTk4M2EtNDdkYi1hYjc1LWRkM2FmMWZiMDY0MCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJmNjA2MDA3Yi0wYTNiLTRjYWYtYmYzNS0zZTI4ZjdmYjVhNTQiLCJhY3IiOiIxIiwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwic2lkIjoiZjYwNjAwN2ItMGEzYi00Y2FmLWJmMzUtM2UyOGY3ZmI1YTU0IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.Qa3wZXDdlPckONktL2rDRO3kmDo1X77aU7CTD0DTSf7U8hz3nEK1RCvb5fJDevDVLMy99dZ-CG3kt6FGeF9ElDOpiMzJyLbUl3qzpOKfOLQrnCvvp3Wt6ToikexLepalnChCuBghOvdQeGzdowhgbnL72LqImvNQTOihtlLk6_m8vkrayaQNA0t6Y6FBSn0LPMu2og1PYLRl3VQMIi7TWElYjOGqVdsaqSVe0K_C-toD1pj4Q9OFxVLBOTdPBzb9iHF693hvIaeYG7b3V0tJbn_H98LIDnZjwGjIO7ybWh47U8e4AZNLSyQCILlmBTwtia56zSAaf2UXvrIcM4KpMg
++ __ADM_TOKEN_TS=3
+ cid=console-setup
++ get_client_token nonrtric-realm console-setup
++ __check_admin_token
++ __diff=0
++ '[' 0 -gt 15 ']'
++ __realm=nonrtric-realm
++ __client=console-setup
+++ __get_client_id nonrtric-realm console-setup
++++ curl -s -X GET '192.168.128.104:31784/admin/realms/nonrtric-realm/clients?clientId=console-setup' -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJIV1pKeHhYZ2pFZURfU2ZfOWo0aTFYclNoSDB0NlBWVk1OVW5wbVJfU0pNIn0.eyJleHAiOjE3NjkwNzU0OTIsImlhdCI6MTc2OTA3NTQzMiwianRpIjoiMjQ0MjJkNGItYTI5Yi00ODYxLTg4MmQtNTYzMTM3NzgzOGFhIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjNhZTY1YzMxLTk4M2EtNDdkYi1hYjc1LWRkM2FmMWZiMDY0MCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJmNjA2MDA3Yi0wYTNiLTRjYWYtYmYzNS0zZTI4ZjdmYjVhNTQiLCJhY3IiOiIxIiwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwic2lkIjoiZjYwNjAwN2ItMGEzYi00Y2FmLWJmMzUtM2UyOGY3ZmI1YTU0IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.Qa3wZXDdlPckONktL2rDRO3kmDo1X77aU7CTD0DTSf7U8hz3nEK1RCvb5fJDevDVLMy99dZ-CG3kt6FGeF9ElDOpiMzJyLbUl3qzpOKfOLQrnCvvp3Wt6ToikexLepalnChCuBghOvdQeGzdowhgbnL72LqImvNQTOihtlLk6_m8vkrayaQNA0t6Y6FBSn0LPMu2og1PYLRl3VQMIi7TWElYjOGqVdsaqSVe0K_C-toD1pj4Q9OFxVLBOTdPBzb9iHF693hvIaeYG7b3V0tJbn_H98LIDnZjwGjIO7ybWh47U8e4AZNLSyQCILlmBTwtia56zSAaf2UXvrIcM4KpMg'
+++ __client_data='[{"id":"adfdd204-87bf-4fd7-b6dc-8da59c10bc3f","clientId":"console-setup","rootUrl":"https://example.com/example/","adminUrl":"https://example.com/example/","surrogateAuthRequired":false,"enabled":true,"alwaysDisplayInConsole":false,"clientAuthenticatorType":"client-secret","secret":"C3P2fSq7f0vVEWuM0B1V3N9JEOBfF1UN","redirectUris":[],"webOrigins":[],"notBefore":0,"bearerOnly":false,"consentRequired":false,"standardFlowEnabled":true,"implicitFlowEnabled":false,"directAccessGrantsEnabled":false,"serviceAccountsEnabled":true,"publicClient":false,"frontchannelLogout":false,"protocol":"openid-connect","attributes":{"client.secret.creation.time":"1769075242"},"authenticationFlowBindingOverrides":{},"fullScopeAllowed":true,"nodeReRegistrationTimeout":-1,"protocolMappers":[{"id":"b511a4ff-f8bb-4494-ad13-f67543834baf","name":"Client ID","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientId","id.token.claim":"true","access.token.claim":"true","claim.name":"clientId","jsonType.label":"String"}},{"id":"e66f55b0-8e37-48c0-83b2-a6591ad17912","name":"Client IP Address","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientAddress","id.token.claim":"true","access.token.claim":"true","claim.name":"clientAddress","jsonType.label":"String"}},{"id":"73cb1f2f-8639-42db-b89a-fb4750569840","name":"Client Host","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientHost","id.token.claim":"true","access.token.claim":"true","claim.name":"clientHost","jsonType.label":"String"}}],"defaultClientScopes":["web-origins","acr","profile","roles","email"],"optionalClientScopes":["address","phone","offline_access","microprofile-jwt"],"access":{"view":true,"configure":true,"manage":true}}]'
+++ '[' 0 -ne 0 ']'
++++ jq -r '.[0].id'
++++ echo '[{"id":"adfdd204-87bf-4fd7-b6dc-8da59c10bc3f","clientId":"console-setup","rootUrl":"https://example.com/example/","adminUrl":"https://example.com/example/","surrogateAuthRequired":false,"enabled":true,"alwaysDisplayInConsole":false,"clientAuthenticatorType":"client-secret","secret":"C3P2fSq7f0vVEWuM0B1V3N9JEOBfF1UN","redirectUris":[],"webOrigins":[],"notBefore":0,"bearerOnly":false,"consentRequired":false,"standardFlowEnabled":true,"implicitFlowEnabled":false,"directAccessGrantsEnabled":false,"serviceAccountsEnabled":true,"publicClient":false,"frontchannelLogout":false,"protocol":"openid-connect","attributes":{"client.secret.creation.time":"1769075242"},"authenticationFlowBindingOverrides":{},"fullScopeAllowed":true,"nodeReRegistrationTimeout":-1,"protocolMappers":[{"id":"b511a4ff-f8bb-4494-ad13-f67543834baf","name":"Client' 'ID","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientId","id.token.claim":"true","access.token.claim":"true","claim.name":"clientId","jsonType.label":"String"}},{"id":"e66f55b0-8e37-48c0-83b2-a6591ad17912","name":"Client' IP 'Address","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientAddress","id.token.claim":"true","access.token.claim":"true","claim.name":"clientAddress","jsonType.label":"String"}},{"id":"73cb1f2f-8639-42db-b89a-fb4750569840","name":"Client' 'Host","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientHost","id.token.claim":"true","access.token.claim":"true","claim.name":"clientHost","jsonType.label":"String"}}],"defaultClientScopes":["web-origins","acr","profile","roles","email"],"optionalClientScopes":["address","phone","offline_access","microprofile-jwt"],"access":{"view":true,"configure":true,"manage":true}}]'
+++ __client_id=adfdd204-87bf-4fd7-b6dc-8da59c10bc3f
+++ echo adfdd204-87bf-4fd7-b6dc-8da59c10bc3f
+++ return 0
++ __client_id=adfdd204-87bf-4fd7-b6dc-8da59c10bc3f
++ '[' 0 -ne 0 ']'
+++ curl -s -f -X GET 192.168.128.104:31784/admin/realms/nonrtric-realm/clients/adfdd204-87bf-4fd7-b6dc-8da59c10bc3f/client-secret -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJIV1pKeHhYZ2pFZURfU2ZfOWo0aTFYclNoSDB0NlBWVk1OVW5wbVJfU0pNIn0.eyJleHAiOjE3NjkwNzU0OTIsImlhdCI6MTc2OTA3NTQzMiwianRpIjoiMjQ0MjJkNGItYTI5Yi00ODYxLTg4MmQtNTYzMTM3NzgzOGFhIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjNhZTY1YzMxLTk4M2EtNDdkYi1hYjc1LWRkM2FmMWZiMDY0MCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJmNjA2MDA3Yi0wYTNiLTRjYWYtYmYzNS0zZTI4ZjdmYjVhNTQiLCJhY3IiOiIxIiwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwic2lkIjoiZjYwNjAwN2ItMGEzYi00Y2FmLWJmMzUtM2UyOGY3ZmI1YTU0IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.Qa3wZXDdlPckONktL2rDRO3kmDo1X77aU7CTD0DTSf7U8hz3nEK1RCvb5fJDevDVLMy99dZ-CG3kt6FGeF9ElDOpiMzJyLbUl3qzpOKfOLQrnCvvp3Wt6ToikexLepalnChCuBghOvdQeGzdowhgbnL72LqImvNQTOihtlLk6_m8vkrayaQNA0t6Y6FBSn0LPMu2og1PYLRl3VQMIi7TWElYjOGqVdsaqSVe0K_C-toD1pj4Q9OFxVLBOTdPBzb9iHF693hvIaeYG7b3V0tJbn_H98LIDnZjwGjIO7ybWh47U8e4AZNLSyQCILlmBTwtia56zSAaf2UXvrIcM4KpMg'
++ __client_secret='{"type":"secret","value":"C3P2fSq7f0vVEWuM0B1V3N9JEOBfF1UN"}'
++ '[' 0 -ne 0 ']'
+++ echo '{"type":"secret","value":"C3P2fSq7f0vVEWuM0B1V3N9JEOBfF1UN"}'
+++ jq -r .value
++ __client_secret=C3P2fSq7f0vVEWuM0B1V3N9JEOBfF1UN
+++ curl -s -f -X POST 192.168.128.104:31784/realms/nonrtric-realm/protocol/openid-connect/token -H Content-Type:application/x-www-form-urlencoded -d client_id=console-setup -d client_secret=C3P2fSq7f0vVEWuM0B1V3N9JEOBfF1UN -d grant_type=client_credentials
++ __TMP_TOKEN='{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4NzRneVA3TV9UeDd0akxhaTQ4aU52emlGYWl3ZVZSazBxdWg3WTdFZkhjIn0.eyJleHAiOjE3NjkwNzU3MzIsImlhdCI6MTc2OTA3NTQzMiwianRpIjoiMTAyMzcwYjUtNzU5Ni00NjY4LTgyNjMtMGMzOWUxYjBiYjljIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhhOTNkZTAzLThhNmUtNGQ4OC1hYTNmLTNlYzAzNmM3MjgxYyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuNjEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC42MSJ9.Q9YlODCSycgEVse3SbAuxJxYgYzxPh8e8WfsbzZTO18npbK5kls2NTjxUD3brJD76zkPp36wojJ2v36WB8-mDlUqKDSySb-kNjFjF6ixyJDZxZYOk7SK5jgsVZl9qlkXl781gkxEs2J5yMWP5ulm8jd7R1zSzMoaYCbOVBzHgBLCvJRXeuGzHW8Cr_Nnkq9waz1g-Bsw_F0PRErcwVOaj_BUNM9e4yuPk67KpZwzpFSttrtn9iRIzf480H4ZCs6Z1MEYeVUFdo8iKh3vCuUSSViHI6TH5UURYFtM2NXY1wqSR0LaMEfSyaZDN6hW668NYOgd0OMqjrbzuKsz4R06lA","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"profile email"}'
++ '[' 0 -ne 0 ']'
++ echo '{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4NzRneVA3TV9UeDd0akxhaTQ4aU52emlGYWl3ZVZSazBxdWg3WTdFZkhjIn0.eyJleHAiOjE3NjkwNzU3MzIsImlhdCI6MTc2OTA3NTQzMiwianRpIjoiMTAyMzcwYjUtNzU5Ni00NjY4LTgyNjMtMGMzOWUxYjBiYjljIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhhOTNkZTAzLThhNmUtNGQ4OC1hYTNmLTNlYzAzNmM3MjgxYyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuNjEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC42MSJ9.Q9YlODCSycgEVse3SbAuxJxYgYzxPh8e8WfsbzZTO18npbK5kls2NTjxUD3brJD76zkPp36wojJ2v36WB8-mDlUqKDSySb-kNjFjF6ixyJDZxZYOk7SK5jgsVZl9qlkXl781gkxEs2J5yMWP5ulm8jd7R1zSzMoaYCbOVBzHgBLCvJRXeuGzHW8Cr_Nnkq9waz1g-Bsw_F0PRErcwVOaj_BUNM9e4yuPk67KpZwzpFSttrtn9iRIzf480H4ZCs6Z1MEYeVUFdo8iKh3vCuUSSViHI6TH5UURYFtM2NXY1wqSR0LaMEfSyaZDN6hW668NYOgd0OMqjrbzuKsz4R06lA","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"profile' 'email"}'
++ jq -r .access_token
++ return 0
+ TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4NzRneVA3TV9UeDd0akxhaTQ4aU52emlGYWl3ZVZSazBxdWg3WTdFZkhjIn0.eyJleHAiOjE3NjkwNzU3MzIsImlhdCI6MTc2OTA3NTQzMiwianRpIjoiMTAyMzcwYjUtNzU5Ni00NjY4LTgyNjMtMGMzOWUxYjBiYjljIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhhOTNkZTAzLThhNmUtNGQ4OC1hYTNmLTNlYzAzNmM3MjgxYyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuNjEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC42MSJ9.Q9YlODCSycgEVse3SbAuxJxYgYzxPh8e8WfsbzZTO18npbK5kls2NTjxUD3brJD76zkPp36wojJ2v36WB8-mDlUqKDSySb-kNjFjF6ixyJDZxZYOk7SK5jgsVZl9qlkXl781gkxEs2J5yMWP5ulm8jd7R1zSzMoaYCbOVBzHgBLCvJRXeuGzHW8Cr_Nnkq9waz1g-Bsw_F0PRErcwVOaj_BUNM9e4yuPk67KpZwzpFSttrtn9iRIzf480H4ZCs6Z1MEYeVUFdo8iKh3vCuUSSViHI6TH5UURYFtM2NXY1wqSR0LaMEfSyaZDN6hW668NYOgd0OMqjrbzuKsz4R06lA
+ JOB='{"info_type_id": "json-file-data-from-filestore",
     "job_owner": "console",
     "status_notification_uri": "http://callback.ridenext-nonrt:80/post",
     "job_definition": {
        "deliveryInfo": {
           "topic": "pmreports",
           "bootStrapServers": "kafka-1-kafka-bootstrap.ridenext-nonrt:9092"
        },
        "filter": {
           "sourceNames": [],
           "measurementTypes": []
        }
     }}'
+ echo 'Creating ICS job for kafka bridge: rapp-topic -> pmreports'
Creating ICS job for kafka bridge: rapp-topic -> pmreports
+ echo '{"info_type_id":' '"json-file-data-from-filestore",' '"job_owner":' '"console",' '"status_notification_uri":' '"http://callback.ridenext-nonrt:80/post",' '"job_definition":' '{' '"deliveryInfo":' '{' '"topic":' '"pmreports",' '"bootStrapServers":' '"kafka-1-kafka-bootstrap.ridenext-nonrt:9092"' '},' '"filter":' '{' '"sourceNames":' '[],' '"measurementTypes":' '[]' '}' '}}'
+ create_ics_job kp-kafka-bridge 0 eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4NzRneVA3TV9UeDd0akxhaTQ4aU52emlGYWl3ZVZSazBxdWg3WTdFZkhjIn0.eyJleHAiOjE3NjkwNzU3MzIsImlhdCI6MTc2OTA3NTQzMiwianRpIjoiMTAyMzcwYjUtNzU5Ni00NjY4LTgyNjMtMGMzOWUxYjBiYjljIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhhOTNkZTAzLThhNmUtNGQ4OC1hYTNmLTNlYzAzNmM3MjgxYyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuNjEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC42MSJ9.Q9YlODCSycgEVse3SbAuxJxYgYzxPh8e8WfsbzZTO18npbK5kls2NTjxUD3brJD76zkPp36wojJ2v36WB8-mDlUqKDSySb-kNjFjF6ixyJDZxZYOk7SK5jgsVZl9qlkXl781gkxEs2J5yMWP5ulm8jd7R1zSzMoaYCbOVBzHgBLCvJRXeuGzHW8Cr_Nnkq9waz1g-Bsw_F0PRErcwVOaj_BUNM9e4yuPk67KpZwzpFSttrtn9iRIzf480H4ZCs6Z1MEYeVUFdo8iKh3vCuUSSViHI6TH5UURYFtM2NXY1wqSR0LaMEfSyaZDN6hW668NYOgd0OMqjrbzuKsz4R06lA
++ kubectl get svc -n ridenext-nonrt informationservice --output 'jsonpath={.spec.ports[?(@.name=="http")].nodePort}'
+ ICS_PROXY_PORT=31823
+ echo 'NodePort to ics: 31823'
NodePort to ics: 31823
+ JOB='{"info_type_id": "json-file-data-from-filestore", "job_owner": "console", "status_notification_uri": "http://callback.ridenext-nonrt:80/post", "job_definition": { "deliveryInfo": { "topic": "pmreports", "bootStrapServers": "kafka-1-kafka-bootstrap.ridenext-nonrt:9092" }, "filter": { "sourceNames": [], "measurementTypes": [] } }}'
+ echo '{"info_type_id":' '"json-file-data-from-filestore",' '"job_owner":' '"console",' '"status_notification_uri":' '"http://callback.ridenext-nonrt:80/post",' '"job_definition":' '{' '"deliveryInfo":' '{' '"topic":' '"pmreports",' '"bootStrapServers":' '"kafka-1-kafka-bootstrap.ridenext-nonrt:9092"' '},' '"filter":' '{' '"sourceNames":' '[],' '"measurementTypes":' '[]' '}' '}}'
{"info_type_id": "json-file-data-from-filestore", "job_owner": "console", "status_notification_uri": "http://callback.ridenext-nonrt:80/post", "job_definition": { "deliveryInfo": { "topic": "pmreports", "bootStrapServers": "kafka-1-kafka-bootstrap.ridenext-nonrt:9092" }, "filter": { "sourceNames": [], "measurementTypes": [] } }}
+ retcode=1
+ echo 'Creating job-kp-kafka-bridge-0'
Creating job-kp-kafka-bridge-0
+ '[' 1 -ne 0 ']'
+ '[' -z eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4NzRneVA3TV9UeDd0akxhaTQ4aU52emlGYWl3ZVZSazBxdWg3WTdFZkhjIn0.eyJleHAiOjE3NjkwNzU3MzIsImlhdCI6MTc2OTA3NTQzMiwianRpIjoiMTAyMzcwYjUtNzU5Ni00NjY4LTgyNjMtMGMzOWUxYjBiYjljIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhhOTNkZTAzLThhNmUtNGQ4OC1hYTNmLTNlYzAzNmM3MjgxYyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuNjEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC42MSJ9.Q9YlODCSycgEVse3SbAuxJxYgYzxPh8e8WfsbzZTO18npbK5kls2NTjxUD3brJD76zkPp36wojJ2v36WB8-mDlUqKDSySb-kNjFjF6ixyJDZxZYOk7SK5jgsVZl9qlkXl781gkxEs2J5yMWP5ulm8jd7R1zSzMoaYCbOVBzHgBLCvJRXeuGzHW8Cr_Nnkq9waz1g-Bsw_F0PRErcwVOaj_BUNM9e4yuPk67KpZwzpFSttrtn9iRIzf480H4ZCs6Z1MEYeVUFdo8iKh3vCuUSSViHI6TH5UURYFtM2NXY1wqSR0LaMEfSyaZDN6hW668NYOgd0OMqjrbzuKsz4R06lA ']'
+ __bearer='Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4NzRneVA3TV9UeDd0akxhaTQ4aU52emlGYWl3ZVZSazBxdWg3WTdFZkhjIn0.eyJleHAiOjE3NjkwNzU3MzIsImlhdCI6MTc2OTA3NTQzMiwianRpIjoiMTAyMzcwYjUtNzU5Ni00NjY4LTgyNjMtMGMzOWUxYjBiYjljIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhhOTNkZTAzLThhNmUtNGQ4OC1hYTNmLTNlYzAzNmM3MjgxYyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuNjEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC42MSJ9.Q9YlODCSycgEVse3SbAuxJxYgYzxPh8e8WfsbzZTO18npbK5kls2NTjxUD3brJD76zkPp36wojJ2v36WB8-mDlUqKDSySb-kNjFjF6ixyJDZxZYOk7SK5jgsVZl9qlkXl781gkxEs2J5yMWP5ulm8jd7R1zSzMoaYCbOVBzHgBLCvJRXeuGzHW8Cr_Nnkq9waz1g-Bsw_F0PRErcwVOaj_BUNM9e4yuPk67KpZwzpFSttrtn9iRIzf480H4ZCs6Z1MEYeVUFdo8iKh3vCuUSSViHI6TH5UURYFtM2NXY1wqSR0LaMEfSyaZDN6hW668NYOgd0OMqjrbzuKsz4R06lA'
++ curl -s -X PUT -w '%{http_code}' -H accept:application/json -H Content-Type:application/json http://192.168.128.104:31823/data-consumer/v1/info-jobs/job-kp-kafka-bridge-0 --data-binary @.job.json -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4NzRneVA3TV9UeDd0akxhaTQ4aU52emlGYWl3ZVZSazBxdWg3WTdFZkhjIn0.eyJleHAiOjE3NjkwNzU3MzIsImlhdCI6MTc2OTA3NTQzMiwianRpIjoiMTAyMzcwYjUtNzU5Ni00NjY4LTgyNjMtMGMzOWUxYjBiYjljIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhhOTNkZTAzLThhNmUtNGQ4OC1hYTNmLTNlYzAzNmM3MjgxYyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuNjEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC42MSJ9.Q9YlODCSycgEVse3SbAuxJxYgYzxPh8e8WfsbzZTO18npbK5kls2NTjxUD3brJD76zkPp36wojJ2v36WB8-mDlUqKDSySb-kNjFjF6ixyJDZxZYOk7SK5jgsVZl9qlkXl781gkxEs2J5yMWP5ulm8jd7R1zSzMoaYCbOVBzHgBLCvJRXeuGzHW8Cr_Nnkq9waz1g-Bsw_F0PRErcwVOaj_BUNM9e4yuPk67KpZwzpFSttrtn9iRIzf480H4ZCs6Z1MEYeVUFdo8iKh3vCuUSSViHI6TH5UURYFtM2NXY1wqSR0LaMEfSyaZDN6hW668NYOgd0OMqjrbzuKsz4R06lA'
+ STAT=201
+ retcode=0
+ echo 'curl return code: 0'
curl return code: 0
+ '[' 0 -eq 0 ']'
+ status=201
+ echo 'http status code: 201'
http status code: 201
+ '[' 201 == 200 ']'
+ '[' 201 == 201 ']'
+ echo 'Job created ok'
Job created ok
+ sleep 1
+ '[' 0 -ne 0 ']'
+ echo 'PM Kafka bridge job installation completed'
PM Kafka bridge job installation completed
[0;32mâœ“ scripts/install-pm-kafka-bridge.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/fix-oauth-authentication.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/fix-oauth-authentication.sh...[0m
Applying OAuth authentication fixes for PM components
Upgrading main nrt-pm Helm release to apply OAuth configuration changes...
Release "nrt-pm" has been upgraded. Happy Helming!
NAME: nrt-pm
LAST DEPLOYED: Thu Jan 22 15:20:33 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 2
TEST SUITE: None
OAuth authentication fixes applied successfully!
Components should now use PLAINTEXT authentication on port 9092
[0;32mâœ“ scripts/fix-oauth-authentication.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mAll RANPM installation scripts executed successfully![0m
[0;32m=========================================================================[0m

[1;33mNext steps:[0m
1. Verify all pods are running: [0;32mkubectl get pods -n ridenext-nonrt[0m
2. Check Kafka topics: [0;32mkubectl exec -n ridenext-nonrt kafka-client -- kafka-topics --list --bootstrap-server kafka-1-kafka-bootstrap.ridenext-nonrt:9092[0m
3. Deploy Energy Saving rApp: See energy_saving_rapp_deployment.md

[1;33mLog file saved to: /home/bluefox/Manish/performance/rn-smo_cleanup/install/demo/LOGS/install-ranpm-Logs//install-ranpm-20260122-151655.log[0m
