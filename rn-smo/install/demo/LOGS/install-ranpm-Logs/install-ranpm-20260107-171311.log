[0;32m=========================================================================[0m
[0;32mStarting RANPM Installation[0m
[0;32mLog file: /home/bluefox/Manish/performance/rn-smo_cleanup/install/demo/LOGS/install-ranpm-Logs//install-ranpm-20260107-171311.log[0m
[0;32m=========================================================================[0m

[1;33mChecking prerequisites...[0m
[0;32mâœ“ Found: kubectl[0m
[0;32mâœ“ Found: helm[0m
[0;32mâœ“ Found: envsubst[0m
[0;32mâœ“ Found: jq[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/install-nrt.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/install-nrt.sh...[0m
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Kubernetes control plane host: 192.168.128.104
Host obtained from current kubectl context
Kubernetes version : v1.32.2
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Checking requirements
 Checking if istio is installed
  OK
 Checking if jq is installed
  OK
 Checking if envsubst is installed
  OK
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Restarting istiod, workaround to refresh jwks cache
deployment.apps/istiod restarted
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
##### Installing chart: nrt-base-0
NAME: nrt-base-0
LAST DEPLOYED: Wed Jan  7 17:13:12 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None
Cluster ip: 192.168.128.104
Nodeport to keycloak proxy: 31784
Get admin token
Admin token: eyJhbGciOi...
Creating realms: nonrtric-realm
 Attempt to create realm: nonrtric-realm
  OK, create_realms
Attempt to create clients console-setup for realm: nonrtric-realm
 Creating client: console-setup
 OK, create_clients
Attempt to generate secret for clients console-setup in realm nonrtric-realm
  Client id for client console-setup in realm nonrtric-realm: ef4e5c7a-c08f-4436-a5ed-c59f343a67b8
  Creating secret
   Client secret for client console-setup in realm nonrtric-realm: Mml5DHAPqmYDd2GrP1YjMrrfd9uEQg5u
   OK, generate_client_secrets

Get admin token
Admin token: eyJhbGciOi...
##### Installing charts: strimzi and nrt-base-1
"strimzi" has been added to your repositories
Installing Strimzi Kafka operator version: 0.39.0
NAME: strimzi-kafka-crds
LAST DEPLOYED: Wed Jan  7 17:13:45 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None
NOTES:
Thank you for installing strimzi-kafka-operator-0.39.0

To create a Kafka cluster refer to the following documentation.

https://strimzi.io/docs/operators/latest/deploying.html#deploying-cluster-operator-helm-chart-str
Error: INSTALLATION FAILED: 2 errors occurred:
	* services "opa-kafka" already exists
	* deployments.apps "opa-kafka" already exists


Waiting for influx db - there may be error messages while trying...
error: unable to upgrade connection: container not found ("influxdb2")
Configuring db
User	Organization	Bucket
admin	est		pm-bucket
secret/influxdb-api-token patched
Wait for kafka
  2 sec, retrying at 7 sec                        [0K  9 sec, retrying at 14 sec                        [0K  16 sec, retrying at 21 sec                        [0K  23 sec, retrying at 28 sec                        [0K  30 sec, retrying at 35 sec                        [0K
Creating topic: file-ready with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Created topic file-ready.
Creating topic: collected-file with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Created topic collected-file.
Creating topic: json-file-ready-kp with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Created topic json-file-ready-kp.
Creating topic: json-file-ready-kpadp with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Created topic json-file-ready-kpadp.
Creating topic: pmreports with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Created topic pmreports.

Wait for SDNR

##### Installing: chart nonrtricgateway
NAME: nonrtricgateway
LAST DEPLOYED: Wed Jan  7 17:15:29 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None

##### Installing: chart controlpanel
NAME: controlpanel
LAST DEPLOYED: Wed Jan  7 17:16:02 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None

##### Installing: chart ran-o1-sim
NAME: ran-o1-sim-du
LAST DEPLOYED: Wed Jan  7 17:16:25 2026
NAMESPACE: ran-o1-sim
STATUS: deployed
REVISION: 1
TEST SUITE: None

##### Installing chart: nrt-pm
Updating dfc truststore
 Adding https ca cert to dfc truststore
Owner: EMAILADDRESS=a@example.com, OU=EST, O=EST, L=., ST=., C=SE
Issuer: EMAILADDRESS=a@example.com, OU=EST, O=EST, L=., ST=., C=SE
Serial number: 5ac065137477243e239f0eec2e754785cf508dee
Valid from: Thu Jun 19 12:15:38 IST 2025 until: Wed Oct 20 12:15:38 IST 3024
Certificate fingerprints:
	 SHA1: 5C:74:95:4C:89:E8:46:0C:38:FC:1D:2F:70:4D:E6:7F:4B:34:7D:DD
	 SHA256: 12:55:0E:ED:5A:01:44:2F:67:75:38:DB:F5:BC:61:EC:57:55:9B:53:87:6A:2D:44:F6:8E:CD:45:E9:3D:7A:28
Signature algorithm name: SHA256withRSA
Subject Public Key Algorithm: 2048-bit RSA key
Version: 3

Extensions: 

#1: ObjectId: 2.5.29.35 Criticality=false
AuthorityKeyIdentifier [
KeyIdentifier [
0000: 41 1C 22 88 BD 47 5D 05   61 59 54 5C BF 80 D6 1B  A."..G].aYT\....
0010: B5 B1 F2 20                                        ... 
]
]

#2: ObjectId: 2.5.29.19 Criticality=true
BasicConstraints:[
  CA:true
  PathLen: no limit
]

#3: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: 41 1C 22 88 BD 47 5D 05   61 59 54 5C BF 80 D6 1B  A."..G].aYT\....
0010: B5 B1 F2 20                                        ... 
]
]

Trust this certificate? [no]:  Certificate was added to keystore
Attempt to create clients kafka-producer-pm-xml2json for realm: nonrtric-realm
 Creating client: kafka-producer-pm-xml2json
Get admin token
Admin token: eyJhbGciOi...
 OK, create_clients
Attempt to generate secret for clients kafka-producer-pm-xml2json in realm nonrtric-realm
  Client id for client kafka-producer-pm-xml2json in realm nonrtric-realm: 90ed0b25-881e-4c5c-a050-73dadf5186d6
  Creating secret
   Client secret for client kafka-producer-pm-xml2json in realm nonrtric-realm: VYVKHHUPVRzDslExIndwLJuKP9S8aXOZ
   OK, generate_client_secrets
Attempt to create clients kafka-producer-pm-json2kafka for realm: nonrtric-realm
 Creating client: kafka-producer-pm-json2kafka
 OK, create_clients
Attempt to generate secret for clients kafka-producer-pm-json2kafka in realm nonrtric-realm
  Client id for client kafka-producer-pm-json2kafka in realm nonrtric-realm: e780b555-4d02-445e-bd67-9dfaf7dd3edc
  Creating secret
   Client secret for client kafka-producer-pm-json2kafka in realm nonrtric-realm: bjCy9eIuIjQ7jH32bL58kcnHQMUUj6sY
   OK, generate_client_secrets
Attempt to create clients kafka-producer-pm-json2influx for realm: nonrtric-realm
 Creating client: kafka-producer-pm-json2influx
 OK, create_clients
Attempt to generate secret for clients kafka-producer-pm-json2influx in realm nonrtric-realm
  Client id for client kafka-producer-pm-json2influx in realm nonrtric-realm: 3041dc48-d4fe-4040-bec0-8956a127608a
  Creating secret
   Client secret for client kafka-producer-pm-json2influx in realm nonrtric-realm: 8sXmNp5lQiR9GIUjZg8j9phfhzuFi5UK
   OK, generate_client_secrets
Bucket  does not exist, creating
Bucket pm_data created, OK
Attempt to create clients pm-producer-json2kafka for realm: nonrtric-realm
 Creating client: pm-producer-json2kafka
 OK, create_clients
Attempt to generate secret for clients pm-producer-json2kafka in realm nonrtric-realm
  Client id for client pm-producer-json2kafka in realm nonrtric-realm: f050e70a-fd7d-488d-b717-5658b4402e95
  Creating secret
   Client secret for client pm-producer-json2kafka in realm nonrtric-realm: lFoLo6W1e6kXmR7RdjlbDQj2DArNDUw0
   OK, generate_client_secrets
Attempt to create clients dfc for realm: nonrtric-realm
 Creating client: dfc
 OK, create_clients
Attempt to generate secret for clients dfc in realm nonrtric-realm
  Client id for client dfc in realm nonrtric-realm: 8895be3e-7905-4d22-aa8f-8e6028668c2d
  Creating secret
   Client secret for client dfc in realm nonrtric-realm: TykunhXGBMsVwL8314m49IKvLITvgnBc
   OK, generate_client_secrets
NAME: nrt-pm
LAST DEPLOYED: Wed Jan  7 17:16:33 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None

######################################################################
ranpm installed
Wait until all pods are running before installation additional charts
Do: 'kubectl get po -n ridenext-nonrt' and verify that all pods are in status Running
 and all included containers are Ready
######################################################################
[0;32mâœ“ scripts/install-nrt.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/install-pm-log.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/install-pm-log.sh...[0m
Installing pmlog
Cluster ip: 192.168.128.104
Nodeport to keycloak proxy: 31784
Get admin token
Admin token: eyJhbGciOi...
Attempt to create clients nrt-pm-log for realm: nonrtric-realm
 Creating client: nrt-pm-log
 OK, create_clients
Attempt to generate secret for clients nrt-pm-log in realm nonrtric-realm
  Client id for client nrt-pm-log in realm nonrtric-realm: 19fee312-ed44-4b83-8c1f-ffba48c1eeca
  Creating secret
   Client secret for client nrt-pm-log in realm nonrtric-realm: dhfaEjOkGchYQpQpDFjC13sQdqpwTq6h
   OK, generate_client_secrets
Creating bucket pm-logg-bucket in influxdb2
Bucket  does not exist, creating
Bucket pm-logg-bucket created, OK
 helm install...
NAME: nrt-pm-log
LAST DEPLOYED: Wed Jan  7 17:16:44 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None
done
[0;32mâœ“ scripts/install-pm-log.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/install-pm-influx-job.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/install-pm-influx-job.sh...[0m
Kubernetes control plane host: 192.168.128.104
+ echo 'Installation pm to influx job'
Installation pm to influx job
+ echo ' Retriving influxdb2 access token...'
 Retriving influxdb2 access token...
++ get_influxdb2_token influxdb2-0 ridenext-nonrt
++ '[' 2 -ne 2 ']'
++ __influxdb2_access_token=
++ '[' -z '' ']'
+++ kubectl exec -n ridenext-nonrt influxdb2-0 -- influx config ls --json
+++ jq -r .default.token
++ export __influxdb2_access_token=PRJY7i1B1v5C86c0fWr6_XgrkQvkHTpPoxrKVqybw1hLyZnvYBx8nKPWuY4NK1gMUO2Xh2uUmNETfiCIu4ZQwQ==
++ __influxdb2_access_token=PRJY7i1B1v5C86c0fWr6_XgrkQvkHTpPoxrKVqybw1hLyZnvYBx8nKPWuY4NK1gMUO2Xh2uUmNETfiCIu4ZQwQ==
++ '[' 0 -ne 0 ']'
++ '[' -z PRJY7i1B1v5C86c0fWr6_XgrkQvkHTpPoxrKVqybw1hLyZnvYBx8nKPWuY4NK1gMUO2Xh2uUmNETfiCIu4ZQwQ== ']'
++ echo -n PRJY7i1B1v5C86c0fWr6_XgrkQvkHTpPoxrKVqybw1hLyZnvYBx8nKPWuY4NK1gMUO2Xh2uUmNETfiCIu4ZQwQ==
++ return 0
+ INFLUXDB2_TOKEN=PRJY7i1B1v5C86c0fWr6_XgrkQvkHTpPoxrKVqybw1hLyZnvYBx8nKPWuY4NK1gMUO2Xh2uUmNETfiCIu4ZQwQ==
+ bucket=pm-bucket
+ echo 'Creating bucket pm-bucket in influxdb2'
Creating bucket pm-bucket in influxdb2
+ create_influxdb2_bucket influxdb2-0 ridenext-nonrt pm-bucket
++ kubectl exec -n ridenext-nonrt influxdb2-0 -- influx bucket ls --json
++ jq 'any(.[].name; . == "pm-bucket")'
+ RES=true
+ '[' true == true ']'
+ echo 'Bucket  exist, OK'
Bucket  exist, OK
+ . scripts/helper-scripts/populate_keycloak.sh
++ echo 'Cluster ip: 192.168.128.104'
Cluster ip: 192.168.128.104
+++ kubectl get svc -n ridenext-nonrt keycloak-proxy --output 'jsonpath={.spec.ports[?(@.name=="http")].nodePort}'
++ KC_PROXY_PORT=31784
++ echo 'Nodeport to keycloak proxy: 31784'
Nodeport to keycloak proxy: 31784
++ __get_admin_token
++ echo 'Get admin token'
Get admin token
++ ADMIN_TOKEN=
++ '[' 0 -lt 20 ']'
+++ curl -s -X POST 192.168.128.104:31784/realms/master/protocol/openid-connect/token --max-time 2 -H 'Content-Type: application/x-www-form-urlencoded' -d username=admin -d password=admin -d grant_type=password -d client_id=admin-cli
+++ jq -r .access_token
++ ADMIN_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJPdF95c1BxdlUxdm96cjc3bUZJdVFuWDlmTFpKV2YtamswMzEwYlgwdW5JIn0.eyJleHAiOjE3Njc3ODY0NjUsImlhdCI6MTc2Nzc4NjQwNSwianRpIjoiNDRkOTNkYzEtMDQ5Mi00M2M5LWI0MjItZGRiZDk3NWNhMWZiIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6ImQ1MDZhMTk5LTZiMjItNDk5MS05MjFjLTNjYjJmOTU3MjEyMSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJkOWI4MTI4MC1kZDlkLTRiNzctYTcwYi03MzhhZmEwNjkzZTMiLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiZDliODEyODAtZGQ5ZC00Yjc3LWE3MGItNzM4YWZhMDY5M2UzIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.JEOQ8_FUomr3yaqD6GX2ipf-tNPhemBR2SN8xVEnboAaXjig9gXANtrKPhqfkE6IRjkaSdrCM7TfkrE-1Ztw6SYHM3l1Z8J0eMctkZOzK6iw5JUkXNOy6V4KSih1huq-ur41EMwNKi7Rq5T-dCKEUl5ILWv8_fFh6Hi5FOEC7IdNSvd9O5WAQYkMZFO6eaQ3tG-kGWq9zc-56Em7WYirmKsL6dE9qPDqbSPSirCPMoZvlPqTrBky2_Wy10dXdpXZXXMNDaUhtlGQPas4x-HyeQdVm8douyD2r8D1Bp6vyaZ4DZCKbpQMczC12PXLnRIfJ-DFvYyJt3ICrGndTfLFSA
++ '[' 991 -lt 20 ']'
++ '[' 991 -lt 20 ']'
++ echo 'Admin token: eyJhbGciOi...'
Admin token: eyJhbGciOi...
++ echo eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJPdF95c1BxdlUxdm96cjc3bUZJdVFuWDlmTFpKV2YtamswMzEwYlgwdW5JIn0.eyJleHAiOjE3Njc3ODY0NjUsImlhdCI6MTc2Nzc4NjQwNSwianRpIjoiNDRkOTNkYzEtMDQ5Mi00M2M5LWI0MjItZGRiZDk3NWNhMWZiIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6ImQ1MDZhMTk5LTZiMjItNDk5MS05MjFjLTNjYjJmOTU3MjEyMSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJkOWI4MTI4MC1kZDlkLTRiNzctYTcwYi03MzhhZmEwNjkzZTMiLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiZDliODEyODAtZGQ5ZC00Yjc3LWE3MGItNzM4YWZhMDY5M2UzIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.JEOQ8_FUomr3yaqD6GX2ipf-tNPhemBR2SN8xVEnboAaXjig9gXANtrKPhqfkE6IRjkaSdrCM7TfkrE-1Ztw6SYHM3l1Z8J0eMctkZOzK6iw5JUkXNOy6V4KSih1huq-ur41EMwNKi7Rq5T-dCKEUl5ILWv8_fFh6Hi5FOEC7IdNSvd9O5WAQYkMZFO6eaQ3tG-kGWq9zc-56Em7WYirmKsL6dE9qPDqbSPSirCPMoZvlPqTrBky2_Wy10dXdpXZXXMNDaUhtlGQPas4x-HyeQdVm8douyD2r8D1Bp6vyaZ4DZCKbpQMczC12PXLnRIfJ-DFvYyJt3ICrGndTfLFSA
++ __ADM_TOKEN_TS=1
+ cid=console-setup
++ get_client_token nonrtric-realm console-setup
++ __check_admin_token
++ __diff=0
++ '[' 0 -gt 15 ']'
++ __realm=nonrtric-realm
++ __client=console-setup
+++ __get_client_id nonrtric-realm console-setup
++++ curl -s -X GET '192.168.128.104:31784/admin/realms/nonrtric-realm/clients?clientId=console-setup' -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJPdF95c1BxdlUxdm96cjc3bUZJdVFuWDlmTFpKV2YtamswMzEwYlgwdW5JIn0.eyJleHAiOjE3Njc3ODY0NjUsImlhdCI6MTc2Nzc4NjQwNSwianRpIjoiNDRkOTNkYzEtMDQ5Mi00M2M5LWI0MjItZGRiZDk3NWNhMWZiIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6ImQ1MDZhMTk5LTZiMjItNDk5MS05MjFjLTNjYjJmOTU3MjEyMSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJkOWI4MTI4MC1kZDlkLTRiNzctYTcwYi03MzhhZmEwNjkzZTMiLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiZDliODEyODAtZGQ5ZC00Yjc3LWE3MGItNzM4YWZhMDY5M2UzIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.JEOQ8_FUomr3yaqD6GX2ipf-tNPhemBR2SN8xVEnboAaXjig9gXANtrKPhqfkE6IRjkaSdrCM7TfkrE-1Ztw6SYHM3l1Z8J0eMctkZOzK6iw5JUkXNOy6V4KSih1huq-ur41EMwNKi7Rq5T-dCKEUl5ILWv8_fFh6Hi5FOEC7IdNSvd9O5WAQYkMZFO6eaQ3tG-kGWq9zc-56Em7WYirmKsL6dE9qPDqbSPSirCPMoZvlPqTrBky2_Wy10dXdpXZXXMNDaUhtlGQPas4x-HyeQdVm8douyD2r8D1Bp6vyaZ4DZCKbpQMczC12PXLnRIfJ-DFvYyJt3ICrGndTfLFSA'
+++ __client_data='[{"id":"ef4e5c7a-c08f-4436-a5ed-c59f343a67b8","clientId":"console-setup","rootUrl":"https://example.com/example/","adminUrl":"https://example.com/example/","surrogateAuthRequired":false,"enabled":true,"alwaysDisplayInConsole":false,"clientAuthenticatorType":"client-secret","secret":"Mml5DHAPqmYDd2GrP1YjMrrfd9uEQg5u","redirectUris":[],"webOrigins":[],"notBefore":0,"bearerOnly":false,"consentRequired":false,"standardFlowEnabled":true,"implicitFlowEnabled":false,"directAccessGrantsEnabled":false,"serviceAccountsEnabled":true,"publicClient":false,"frontchannelLogout":false,"protocol":"openid-connect","attributes":{"client.secret.creation.time":"1767786223"},"authenticationFlowBindingOverrides":{},"fullScopeAllowed":true,"nodeReRegistrationTimeout":-1,"protocolMappers":[{"id":"878e0bc0-b5d2-4208-8c62-90cb25fda499","name":"Client IP Address","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientAddress","id.token.claim":"true","access.token.claim":"true","claim.name":"clientAddress","jsonType.label":"String"}},{"id":"19a00aa9-e6a6-41f5-bcae-3b4bfbe68d4d","name":"Client ID","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientId","id.token.claim":"true","access.token.claim":"true","claim.name":"clientId","jsonType.label":"String"}},{"id":"a6b08fa6-8f76-4217-af66-51afa842acf3","name":"Client Host","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientHost","id.token.claim":"true","access.token.claim":"true","claim.name":"clientHost","jsonType.label":"String"}}],"defaultClientScopes":["web-origins","acr","roles","profile","email"],"optionalClientScopes":["address","phone","offline_access","microprofile-jwt"],"access":{"view":true,"configure":true,"manage":true}}]'
+++ '[' 0 -ne 0 ']'
++++ echo '[{"id":"ef4e5c7a-c08f-4436-a5ed-c59f343a67b8","clientId":"console-setup","rootUrl":"https://example.com/example/","adminUrl":"https://example.com/example/","surrogateAuthRequired":false,"enabled":true,"alwaysDisplayInConsole":false,"clientAuthenticatorType":"client-secret","secret":"Mml5DHAPqmYDd2GrP1YjMrrfd9uEQg5u","redirectUris":[],"webOrigins":[],"notBefore":0,"bearerOnly":false,"consentRequired":false,"standardFlowEnabled":true,"implicitFlowEnabled":false,"directAccessGrantsEnabled":false,"serviceAccountsEnabled":true,"publicClient":false,"frontchannelLogout":false,"protocol":"openid-connect","attributes":{"client.secret.creation.time":"1767786223"},"authenticationFlowBindingOverrides":{},"fullScopeAllowed":true,"nodeReRegistrationTimeout":-1,"protocolMappers":[{"id":"878e0bc0-b5d2-4208-8c62-90cb25fda499","name":"Client' IP 'Address","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientAddress","id.token.claim":"true","access.token.claim":"true","claim.name":"clientAddress","jsonType.label":"String"}},{"id":"19a00aa9-e6a6-41f5-bcae-3b4bfbe68d4d","name":"Client' 'ID","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientId","id.token.claim":"true","access.token.claim":"true","claim.name":"clientId","jsonType.label":"String"}},{"id":"a6b08fa6-8f76-4217-af66-51afa842acf3","name":"Client' 'Host","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientHost","id.token.claim":"true","access.token.claim":"true","claim.name":"clientHost","jsonType.label":"String"}}],"defaultClientScopes":["web-origins","acr","roles","profile","email"],"optionalClientScopes":["address","phone","offline_access","microprofile-jwt"],"access":{"view":true,"configure":true,"manage":true}}]'
++++ jq -r '.[0].id'
+++ __client_id=ef4e5c7a-c08f-4436-a5ed-c59f343a67b8
+++ echo ef4e5c7a-c08f-4436-a5ed-c59f343a67b8
+++ return 0
++ __client_id=ef4e5c7a-c08f-4436-a5ed-c59f343a67b8
++ '[' 0 -ne 0 ']'
+++ curl -s -f -X GET 192.168.128.104:31784/admin/realms/nonrtric-realm/clients/ef4e5c7a-c08f-4436-a5ed-c59f343a67b8/client-secret -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJPdF95c1BxdlUxdm96cjc3bUZJdVFuWDlmTFpKV2YtamswMzEwYlgwdW5JIn0.eyJleHAiOjE3Njc3ODY0NjUsImlhdCI6MTc2Nzc4NjQwNSwianRpIjoiNDRkOTNkYzEtMDQ5Mi00M2M5LWI0MjItZGRiZDk3NWNhMWZiIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6ImQ1MDZhMTk5LTZiMjItNDk5MS05MjFjLTNjYjJmOTU3MjEyMSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJkOWI4MTI4MC1kZDlkLTRiNzctYTcwYi03MzhhZmEwNjkzZTMiLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiZDliODEyODAtZGQ5ZC00Yjc3LWE3MGItNzM4YWZhMDY5M2UzIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.JEOQ8_FUomr3yaqD6GX2ipf-tNPhemBR2SN8xVEnboAaXjig9gXANtrKPhqfkE6IRjkaSdrCM7TfkrE-1Ztw6SYHM3l1Z8J0eMctkZOzK6iw5JUkXNOy6V4KSih1huq-ur41EMwNKi7Rq5T-dCKEUl5ILWv8_fFh6Hi5FOEC7IdNSvd9O5WAQYkMZFO6eaQ3tG-kGWq9zc-56Em7WYirmKsL6dE9qPDqbSPSirCPMoZvlPqTrBky2_Wy10dXdpXZXXMNDaUhtlGQPas4x-HyeQdVm8douyD2r8D1Bp6vyaZ4DZCKbpQMczC12PXLnRIfJ-DFvYyJt3ICrGndTfLFSA'
++ __client_secret='{"type":"secret","value":"Mml5DHAPqmYDd2GrP1YjMrrfd9uEQg5u"}'
++ '[' 0 -ne 0 ']'
+++ echo '{"type":"secret","value":"Mml5DHAPqmYDd2GrP1YjMrrfd9uEQg5u"}'
+++ jq -r .value
++ __client_secret=Mml5DHAPqmYDd2GrP1YjMrrfd9uEQg5u
+++ curl -s -f -X POST 192.168.128.104:31784/realms/nonrtric-realm/protocol/openid-connect/token -H Content-Type:application/x-www-form-urlencoded -d client_id=console-setup -d client_secret=Mml5DHAPqmYDd2GrP1YjMrrfd9uEQg5u -d grant_type=client_credentials
++ __TMP_TOKEN='{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJkejlEcGhMdS11RXFfbEZ5Rkp4d3FhQURuSkR5VFU4R2RMSkF4WlFqQUhVIn0.eyJleHAiOjE3Njc3ODY3MDUsImlhdCI6MTc2Nzc4NjQwNSwianRpIjoiMzIyOGRhNWItMDM0MS00NjA4LWEwNzQtY2JjZDkxYTlmZWIzIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEyNzlhZjM1LWNlZjItNDdlOC1iM2QzLTkwODg2MmJkMGUzNCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiY2xpZW50SG9zdCI6IjEwLjI0NC4wLjQ2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC40NiJ9.J_jTZlZOCS874RaBDBjnMu8pgqLkQpn0eYgGLjlI-md6Ne_CF3nt2XoYTUc2d3ZHriYwhUew4fMnhTKOpGiv-5X_9-cz0J7xyE_PZNk4_WX80KUUV5TA7niJVDF_6jDfCNOpoQ8mIaU33lVxeN0_9p3fBg1kdW9JLEsUY0s_kz891zPiKWVRpZhXDVzAvb67L4dc0CJnl508vCWl_JOYHkp0bqHdQ6sCmFfZS3_Z8bMrovjtEcHFqxflgXTvLDXRMZXVDgqbseewla-fv9pjy2_R1og8BlMDSDogb6hIyGbnDvUGH5lLZLuCUaema_w48_G1H1nTd4nl1ZbXPE9YBQ","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"email profile"}'
++ '[' 0 -ne 0 ']'
++ echo '{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJkejlEcGhMdS11RXFfbEZ5Rkp4d3FhQURuSkR5VFU4R2RMSkF4WlFqQUhVIn0.eyJleHAiOjE3Njc3ODY3MDUsImlhdCI6MTc2Nzc4NjQwNSwianRpIjoiMzIyOGRhNWItMDM0MS00NjA4LWEwNzQtY2JjZDkxYTlmZWIzIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEyNzlhZjM1LWNlZjItNDdlOC1iM2QzLTkwODg2MmJkMGUzNCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiY2xpZW50SG9zdCI6IjEwLjI0NC4wLjQ2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC40NiJ9.J_jTZlZOCS874RaBDBjnMu8pgqLkQpn0eYgGLjlI-md6Ne_CF3nt2XoYTUc2d3ZHriYwhUew4fMnhTKOpGiv-5X_9-cz0J7xyE_PZNk4_WX80KUUV5TA7niJVDF_6jDfCNOpoQ8mIaU33lVxeN0_9p3fBg1kdW9JLEsUY0s_kz891zPiKWVRpZhXDVzAvb67L4dc0CJnl508vCWl_JOYHkp0bqHdQ6sCmFfZS3_Z8bMrovjtEcHFqxflgXTvLDXRMZXVDgqbseewla-fv9pjy2_R1og8BlMDSDogb6hIyGbnDvUGH5lLZLuCUaema_w48_G1H1nTd4nl1ZbXPE9YBQ","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"email' 'profile"}'
++ jq -r .access_token
++ return 0
+ TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJkejlEcGhMdS11RXFfbEZ5Rkp4d3FhQURuSkR5VFU4R2RMSkF4WlFqQUhVIn0.eyJleHAiOjE3Njc3ODY3MDUsImlhdCI6MTc2Nzc4NjQwNSwianRpIjoiMzIyOGRhNWItMDM0MS00NjA4LWEwNzQtY2JjZDkxYTlmZWIzIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEyNzlhZjM1LWNlZjItNDdlOC1iM2QzLTkwODg2MmJkMGUzNCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiY2xpZW50SG9zdCI6IjEwLjI0NC4wLjQ2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC40NiJ9.J_jTZlZOCS874RaBDBjnMu8pgqLkQpn0eYgGLjlI-md6Ne_CF3nt2XoYTUc2d3ZHriYwhUew4fMnhTKOpGiv-5X_9-cz0J7xyE_PZNk4_WX80KUUV5TA7niJVDF_6jDfCNOpoQ8mIaU33lVxeN0_9p3fBg1kdW9JLEsUY0s_kz891zPiKWVRpZhXDVzAvb67L4dc0CJnl508vCWl_JOYHkp0bqHdQ6sCmFfZS3_Z8bMrovjtEcHFqxflgXTvLDXRMZXVDgqbseewla-fv9pjy2_R1og8BlMDSDogb6hIyGbnDvUGH5lLZLuCUaema_w48_G1H1nTd4nl1ZbXPE9YBQ
+ JOB='{"info_type_id": "json-file-data-from-filestore",
     "job_owner": "console",
     "status_notification_uri": "http://callback.ridenext-nonrt:80/post",
     "job_definition": {
        "db-url":"http://influxdb2.ridenext-nonrt:8086",
        "db-org":"est",
        "db-bucket":"pm-bucket",
        "db-token":"PRJY7i1B1v5C86c0fWr6_XgrkQvkHTpPoxrKVqybw1hLyZnvYBx8nKPWuY4NK1gMUO2Xh2uUmNETfiCIu4ZQwQ==",
        "filterType":"pmdata",
        "filter":{}
     }}'
+ echo '{"info_type_id":' '"json-file-data-from-filestore",' '"job_owner":' '"console",' '"status_notification_uri":' '"http://callback.ridenext-nonrt:80/post",' '"job_definition":' '{' '"db-url":"http://influxdb2.ridenext-nonrt:8086",' '"db-org":"est",' '"db-bucket":"pm-bucket",' '"db-token":"PRJY7i1B1v5C86c0fWr6_XgrkQvkHTpPoxrKVqybw1hLyZnvYBx8nKPWuY4NK1gMUO2Xh2uUmNETfiCIu4ZQwQ==",' '"filterType":"pmdata",' '"filter":{}' '}}'
+ create_ics_job kp-influx-json 0 eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJkejlEcGhMdS11RXFfbEZ5Rkp4d3FhQURuSkR5VFU4R2RMSkF4WlFqQUhVIn0.eyJleHAiOjE3Njc3ODY3MDUsImlhdCI6MTc2Nzc4NjQwNSwianRpIjoiMzIyOGRhNWItMDM0MS00NjA4LWEwNzQtY2JjZDkxYTlmZWIzIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEyNzlhZjM1LWNlZjItNDdlOC1iM2QzLTkwODg2MmJkMGUzNCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiY2xpZW50SG9zdCI6IjEwLjI0NC4wLjQ2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC40NiJ9.J_jTZlZOCS874RaBDBjnMu8pgqLkQpn0eYgGLjlI-md6Ne_CF3nt2XoYTUc2d3ZHriYwhUew4fMnhTKOpGiv-5X_9-cz0J7xyE_PZNk4_WX80KUUV5TA7niJVDF_6jDfCNOpoQ8mIaU33lVxeN0_9p3fBg1kdW9JLEsUY0s_kz891zPiKWVRpZhXDVzAvb67L4dc0CJnl508vCWl_JOYHkp0bqHdQ6sCmFfZS3_Z8bMrovjtEcHFqxflgXTvLDXRMZXVDgqbseewla-fv9pjy2_R1og8BlMDSDogb6hIyGbnDvUGH5lLZLuCUaema_w48_G1H1nTd4nl1ZbXPE9YBQ
++ kubectl get svc -n ridenext-nonrt informationservice --output 'jsonpath={.spec.ports[?(@.name=="http")].nodePort}'
+ ICS_PROXY_PORT=31823
+ echo 'NodePort to ics: 31823'
NodePort to ics: 31823
+ JOB='{"info_type_id": "json-file-data-from-filestore", "job_owner": "console", "status_notification_uri": "http://callback.ridenext-nonrt:80/post", "job_definition": { "db-url":"http://influxdb2.ridenext-nonrt:8086", "db-org":"est", "db-bucket":"pm-bucket", "db-token":"PRJY7i1B1v5C86c0fWr6_XgrkQvkHTpPoxrKVqybw1hLyZnvYBx8nKPWuY4NK1gMUO2Xh2uUmNETfiCIu4ZQwQ==", "filterType":"pmdata", "filter":{} }}'
+ echo '{"info_type_id":' '"json-file-data-from-filestore",' '"job_owner":' '"console",' '"status_notification_uri":' '"http://callback.ridenext-nonrt:80/post",' '"job_definition":' '{' '"db-url":"http://influxdb2.ridenext-nonrt:8086",' '"db-org":"est",' '"db-bucket":"pm-bucket",' '"db-token":"PRJY7i1B1v5C86c0fWr6_XgrkQvkHTpPoxrKVqybw1hLyZnvYBx8nKPWuY4NK1gMUO2Xh2uUmNETfiCIu4ZQwQ==",' '"filterType":"pmdata",' '"filter":{}' '}}'
{"info_type_id": "json-file-data-from-filestore", "job_owner": "console", "status_notification_uri": "http://callback.ridenext-nonrt:80/post", "job_definition": { "db-url":"http://influxdb2.ridenext-nonrt:8086", "db-org":"est", "db-bucket":"pm-bucket", "db-token":"PRJY7i1B1v5C86c0fWr6_XgrkQvkHTpPoxrKVqybw1hLyZnvYBx8nKPWuY4NK1gMUO2Xh2uUmNETfiCIu4ZQwQ==", "filterType":"pmdata", "filter":{} }}
+ retcode=1
+ echo 'Creating job-kp-influx-json-0'
Creating job-kp-influx-json-0
+ '[' 1 -ne 0 ']'
+ '[' -z eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJkejlEcGhMdS11RXFfbEZ5Rkp4d3FhQURuSkR5VFU4R2RMSkF4WlFqQUhVIn0.eyJleHAiOjE3Njc3ODY3MDUsImlhdCI6MTc2Nzc4NjQwNSwianRpIjoiMzIyOGRhNWItMDM0MS00NjA4LWEwNzQtY2JjZDkxYTlmZWIzIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEyNzlhZjM1LWNlZjItNDdlOC1iM2QzLTkwODg2MmJkMGUzNCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiY2xpZW50SG9zdCI6IjEwLjI0NC4wLjQ2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC40NiJ9.J_jTZlZOCS874RaBDBjnMu8pgqLkQpn0eYgGLjlI-md6Ne_CF3nt2XoYTUc2d3ZHriYwhUew4fMnhTKOpGiv-5X_9-cz0J7xyE_PZNk4_WX80KUUV5TA7niJVDF_6jDfCNOpoQ8mIaU33lVxeN0_9p3fBg1kdW9JLEsUY0s_kz891zPiKWVRpZhXDVzAvb67L4dc0CJnl508vCWl_JOYHkp0bqHdQ6sCmFfZS3_Z8bMrovjtEcHFqxflgXTvLDXRMZXVDgqbseewla-fv9pjy2_R1og8BlMDSDogb6hIyGbnDvUGH5lLZLuCUaema_w48_G1H1nTd4nl1ZbXPE9YBQ ']'
+ __bearer='Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJkejlEcGhMdS11RXFfbEZ5Rkp4d3FhQURuSkR5VFU4R2RMSkF4WlFqQUhVIn0.eyJleHAiOjE3Njc3ODY3MDUsImlhdCI6MTc2Nzc4NjQwNSwianRpIjoiMzIyOGRhNWItMDM0MS00NjA4LWEwNzQtY2JjZDkxYTlmZWIzIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEyNzlhZjM1LWNlZjItNDdlOC1iM2QzLTkwODg2MmJkMGUzNCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiY2xpZW50SG9zdCI6IjEwLjI0NC4wLjQ2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC40NiJ9.J_jTZlZOCS874RaBDBjnMu8pgqLkQpn0eYgGLjlI-md6Ne_CF3nt2XoYTUc2d3ZHriYwhUew4fMnhTKOpGiv-5X_9-cz0J7xyE_PZNk4_WX80KUUV5TA7niJVDF_6jDfCNOpoQ8mIaU33lVxeN0_9p3fBg1kdW9JLEsUY0s_kz891zPiKWVRpZhXDVzAvb67L4dc0CJnl508vCWl_JOYHkp0bqHdQ6sCmFfZS3_Z8bMrovjtEcHFqxflgXTvLDXRMZXVDgqbseewla-fv9pjy2_R1og8BlMDSDogb6hIyGbnDvUGH5lLZLuCUaema_w48_G1H1nTd4nl1ZbXPE9YBQ'
++ curl -s -X PUT -w '%{http_code}' -H accept:application/json -H Content-Type:application/json http://192.168.128.104:31823/data-consumer/v1/info-jobs/job-kp-influx-json-0 --data-binary @.job.json -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJkejlEcGhMdS11RXFfbEZ5Rkp4d3FhQURuSkR5VFU4R2RMSkF4WlFqQUhVIn0.eyJleHAiOjE3Njc3ODY3MDUsImlhdCI6MTc2Nzc4NjQwNSwianRpIjoiMzIyOGRhNWItMDM0MS00NjA4LWEwNzQtY2JjZDkxYTlmZWIzIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEyNzlhZjM1LWNlZjItNDdlOC1iM2QzLTkwODg2MmJkMGUzNCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiY2xpZW50SG9zdCI6IjEwLjI0NC4wLjQ2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC40NiJ9.J_jTZlZOCS874RaBDBjnMu8pgqLkQpn0eYgGLjlI-md6Ne_CF3nt2XoYTUc2d3ZHriYwhUew4fMnhTKOpGiv-5X_9-cz0J7xyE_PZNk4_WX80KUUV5TA7niJVDF_6jDfCNOpoQ8mIaU33lVxeN0_9p3fBg1kdW9JLEsUY0s_kz891zPiKWVRpZhXDVzAvb67L4dc0CJnl508vCWl_JOYHkp0bqHdQ6sCmFfZS3_Z8bMrovjtEcHFqxflgXTvLDXRMZXVDgqbseewla-fv9pjy2_R1og8BlMDSDogb6hIyGbnDvUGH5lLZLuCUaema_w48_G1H1nTd4nl1ZbXPE9YBQ'
+ STAT=201
+ retcode=0
+ echo 'curl return code: 0'
curl return code: 0
+ '[' 0 -eq 0 ']'
+ status=201
+ echo 'http status code: 201'
http status code: 201
+ '[' 201 == 200 ']'
+ '[' 201 == 201 ']'
+ echo 'Job created ok'
Job created ok
+ sleep 1
+ '[' 0 -ne 0 ']'
+ echo done
done
[0;32mâœ“ scripts/install-pm-influx-job.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/install-pm-rapp.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/install-pm-rapp.sh...[0m
Installing pmrapp
Creating client in keycloak
Creating topic: rapp-topic with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Created topic rapp-topic.
Cluster ip: 192.168.128.104
Nodeport to keycloak proxy: 31784
Get admin token
Admin token: eyJhbGciOi...
Attempt to create clients pm-rapp for realm: nonrtric-realm
 Creating client: pm-rapp
 OK, create_clients
Attempt to generate secret for clients pm-rapp in realm nonrtric-realm
  Client id for client pm-rapp in realm nonrtric-realm: e189d691-f939-4cb9-93c8-adba2bf64d55
  Creating secret
   Client secret for client pm-rapp in realm nonrtric-realm: 2UMjYKsNRRct75C8z2o6iCPayh6xwfhT
   OK, generate_client_secrets
 helm install...
NAME: nrt-pm-rapp
LAST DEPLOYED: Wed Jan  7 17:16:50 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None
done
[0;32mâœ“ scripts/install-pm-rapp.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/install-pm-kafka-bridge.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/install-pm-kafka-bridge.sh...[0m
+ . scripts/helper-scripts/create_topic.sh
++ kube_get_controlplane_host
+++ kubectl config current-context
++ __current_context=kubernetes-admin@kubernetes
++ '[' 0 -ne 0 ']'
+++ kubectl config view -o 'jsonpath={.contexts[?(@.name=='\''kubernetes-admin@kubernetes'\'')].context.cluster}'
++ __cluster_name=kubernetes
++ '[' 0 -ne 0 ']'
+++ kubectl config view -o 'jsonpath={.clusters[?(@.name=='\''kubernetes'\'')].cluster.server}'
++ __cluster_server=https://192.168.128.104:6443
++ '[' 0 -ne 0 ']'
+++ echo https://192.168.128.104:6443
+++ awk '-F[/:]' '{print $4}'
++ __cluster_host=192.168.128.104
++ '[' 0 -ne 0 ']'
++ [[ 192.168.128.104 == \1\2\7\.\0\.\0\.\1 ]]
++ echo 192.168.128.104
++ return 0
+ export KUBERNETESHOST=192.168.128.104
+ KUBERNETESHOST=192.168.128.104
+ '[' 0 -ne 0 ']'
+ echo 'Kubernetes control plane host: 192.168.128.104'
Kubernetes control plane host: 192.168.128.104
+ echo 'Installation pm kafka bridge job - rapp-topic to pmreports'
Installation pm kafka bridge job - rapp-topic to pmreports
+ echo 'Creating pmreports topic if it doesn'\''t exist'
Creating pmreports topic if it doesn't exist
+ create_topic kafka-1-kafka-bootstrap.ridenext-nonrt:9092 pmreports 10
+ '[' 3 -lt 2 ']'
+ kafka=kafka-1-kafka-bootstrap.ridenext-nonrt:9092
+ topic=pmreports
+ partitions=10
+ '[' -z 10 ']'
+ echo 'Creating topic: pmreports with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092'
Creating topic: pmreports with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
+ kubectl exec -it kafka-client -n ridenext-nonrt -- bash -c 'kafka-topics --create --topic pmreports  --partitions 10 --bootstrap-server kafka-1-kafka-bootstrap.ridenext-nonrt:9092'
Error while executing topic command : Topic 'pmreports' already exists.
[2026-01-07 11:46:55,596] ERROR org.apache.kafka.common.errors.TopicExistsException: Topic 'pmreports' already exists.
 (kafka.admin.TopicCommand$)
command terminated with exit code 1
+ return 1
+ . scripts/helper-scripts/populate_keycloak.sh
++ echo 'Cluster ip: 192.168.128.104'
Cluster ip: 192.168.128.104
+++ kubectl get svc -n ridenext-nonrt keycloak-proxy --output 'jsonpath={.spec.ports[?(@.name=="http")].nodePort}'
++ KC_PROXY_PORT=31784
++ echo 'Nodeport to keycloak proxy: 31784'
Nodeport to keycloak proxy: 31784
++ __get_admin_token
++ echo 'Get admin token'
Get admin token
++ ADMIN_TOKEN=
++ '[' 0 -lt 20 ']'
+++ curl -s -X POST 192.168.128.104:31784/realms/master/protocol/openid-connect/token --max-time 2 -H 'Content-Type: application/x-www-form-urlencoded' -d username=admin -d password=admin -d grant_type=password -d client_id=admin-cli
+++ jq -r .access_token
++ ADMIN_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJPdF95c1BxdlUxdm96cjc3bUZJdVFuWDlmTFpKV2YtamswMzEwYlgwdW5JIn0.eyJleHAiOjE3Njc3ODY0NzYsImlhdCI6MTc2Nzc4NjQxNiwianRpIjoiMDE5NDcwNGYtYmRhMC00NGQzLWE4ZDQtYjEyYmU5NDVjYjMzIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6ImQ1MDZhMTk5LTZiMjItNDk5MS05MjFjLTNjYjJmOTU3MjEyMSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiIzOGRhNzdmYS0xZjc5LTRkNTctYmNjOC1mODkzNjJkZDE0ODEiLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiMzhkYTc3ZmEtMWY3OS00ZDU3LWJjYzgtZjg5MzYyZGQxNDgxIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.MEAHsPjk2_LoiZM6iAPgcw7hWCF5CFIqpLHKJ78_-kuGOxZcMoqvYKrhyIKq058oycqL54IEHetY3rDD0q6NVSreYBV5Vtd427g1xwNft2LfjndV1FnTPvw3ZDhPHMld0HC5pu0DbImKF8r5CMshug1bEjGDr_9zh7FmHAbP3x-2yhsl0UA2eK2WRsJPdB2t3gXce4i3r2_gv3pMvx6sZLvOZxckXxRyxWkyzjrCO7IuW_l9FRdv8depNSeyUCh1nbC8ZL5ONIgdrZpHL_-AafmwXrkAWpk7Regfc_nktWmQuiiPVEGztCM44vkKp8ftCLjWvGzxjPsknFtkD7zP4w
++ '[' 991 -lt 20 ']'
++ '[' 991 -lt 20 ']'
++ echo 'Admin token: eyJhbGciOi...'
Admin token: eyJhbGciOi...
++ echo eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJPdF95c1BxdlUxdm96cjc3bUZJdVFuWDlmTFpKV2YtamswMzEwYlgwdW5JIn0.eyJleHAiOjE3Njc3ODY0NzYsImlhdCI6MTc2Nzc4NjQxNiwianRpIjoiMDE5NDcwNGYtYmRhMC00NGQzLWE4ZDQtYjEyYmU5NDVjYjMzIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6ImQ1MDZhMTk5LTZiMjItNDk5MS05MjFjLTNjYjJmOTU3MjEyMSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiIzOGRhNzdmYS0xZjc5LTRkNTctYmNjOC1mODkzNjJkZDE0ODEiLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiMzhkYTc3ZmEtMWY3OS00ZDU3LWJjYzgtZjg5MzYyZGQxNDgxIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.MEAHsPjk2_LoiZM6iAPgcw7hWCF5CFIqpLHKJ78_-kuGOxZcMoqvYKrhyIKq058oycqL54IEHetY3rDD0q6NVSreYBV5Vtd427g1xwNft2LfjndV1FnTPvw3ZDhPHMld0HC5pu0DbImKF8r5CMshug1bEjGDr_9zh7FmHAbP3x-2yhsl0UA2eK2WRsJPdB2t3gXce4i3r2_gv3pMvx6sZLvOZxckXxRyxWkyzjrCO7IuW_l9FRdv8depNSeyUCh1nbC8ZL5ONIgdrZpHL_-AafmwXrkAWpk7Regfc_nktWmQuiiPVEGztCM44vkKp8ftCLjWvGzxjPsknFtkD7zP4w
++ __ADM_TOKEN_TS=3
+ cid=console-setup
++ get_client_token nonrtric-realm console-setup
++ __check_admin_token
++ __diff=0
++ '[' 0 -gt 15 ']'
++ __realm=nonrtric-realm
++ __client=console-setup
+++ __get_client_id nonrtric-realm console-setup
++++ curl -s -X GET '192.168.128.104:31784/admin/realms/nonrtric-realm/clients?clientId=console-setup' -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJPdF95c1BxdlUxdm96cjc3bUZJdVFuWDlmTFpKV2YtamswMzEwYlgwdW5JIn0.eyJleHAiOjE3Njc3ODY0NzYsImlhdCI6MTc2Nzc4NjQxNiwianRpIjoiMDE5NDcwNGYtYmRhMC00NGQzLWE4ZDQtYjEyYmU5NDVjYjMzIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6ImQ1MDZhMTk5LTZiMjItNDk5MS05MjFjLTNjYjJmOTU3MjEyMSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiIzOGRhNzdmYS0xZjc5LTRkNTctYmNjOC1mODkzNjJkZDE0ODEiLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiMzhkYTc3ZmEtMWY3OS00ZDU3LWJjYzgtZjg5MzYyZGQxNDgxIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.MEAHsPjk2_LoiZM6iAPgcw7hWCF5CFIqpLHKJ78_-kuGOxZcMoqvYKrhyIKq058oycqL54IEHetY3rDD0q6NVSreYBV5Vtd427g1xwNft2LfjndV1FnTPvw3ZDhPHMld0HC5pu0DbImKF8r5CMshug1bEjGDr_9zh7FmHAbP3x-2yhsl0UA2eK2WRsJPdB2t3gXce4i3r2_gv3pMvx6sZLvOZxckXxRyxWkyzjrCO7IuW_l9FRdv8depNSeyUCh1nbC8ZL5ONIgdrZpHL_-AafmwXrkAWpk7Regfc_nktWmQuiiPVEGztCM44vkKp8ftCLjWvGzxjPsknFtkD7zP4w'
+++ __client_data='[{"id":"ef4e5c7a-c08f-4436-a5ed-c59f343a67b8","clientId":"console-setup","rootUrl":"https://example.com/example/","adminUrl":"https://example.com/example/","surrogateAuthRequired":false,"enabled":true,"alwaysDisplayInConsole":false,"clientAuthenticatorType":"client-secret","secret":"Mml5DHAPqmYDd2GrP1YjMrrfd9uEQg5u","redirectUris":[],"webOrigins":[],"notBefore":0,"bearerOnly":false,"consentRequired":false,"standardFlowEnabled":true,"implicitFlowEnabled":false,"directAccessGrantsEnabled":false,"serviceAccountsEnabled":true,"publicClient":false,"frontchannelLogout":false,"protocol":"openid-connect","attributes":{"client.secret.creation.time":"1767786223"},"authenticationFlowBindingOverrides":{},"fullScopeAllowed":true,"nodeReRegistrationTimeout":-1,"protocolMappers":[{"id":"878e0bc0-b5d2-4208-8c62-90cb25fda499","name":"Client IP Address","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientAddress","id.token.claim":"true","access.token.claim":"true","claim.name":"clientAddress","jsonType.label":"String"}},{"id":"19a00aa9-e6a6-41f5-bcae-3b4bfbe68d4d","name":"Client ID","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientId","id.token.claim":"true","access.token.claim":"true","claim.name":"clientId","jsonType.label":"String"}},{"id":"a6b08fa6-8f76-4217-af66-51afa842acf3","name":"Client Host","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientHost","id.token.claim":"true","access.token.claim":"true","claim.name":"clientHost","jsonType.label":"String"}}],"defaultClientScopes":["web-origins","acr","roles","profile","email"],"optionalClientScopes":["address","phone","offline_access","microprofile-jwt"],"access":{"view":true,"configure":true,"manage":true}}]'
+++ '[' 0 -ne 0 ']'
++++ jq -r '.[0].id'
++++ echo '[{"id":"ef4e5c7a-c08f-4436-a5ed-c59f343a67b8","clientId":"console-setup","rootUrl":"https://example.com/example/","adminUrl":"https://example.com/example/","surrogateAuthRequired":false,"enabled":true,"alwaysDisplayInConsole":false,"clientAuthenticatorType":"client-secret","secret":"Mml5DHAPqmYDd2GrP1YjMrrfd9uEQg5u","redirectUris":[],"webOrigins":[],"notBefore":0,"bearerOnly":false,"consentRequired":false,"standardFlowEnabled":true,"implicitFlowEnabled":false,"directAccessGrantsEnabled":false,"serviceAccountsEnabled":true,"publicClient":false,"frontchannelLogout":false,"protocol":"openid-connect","attributes":{"client.secret.creation.time":"1767786223"},"authenticationFlowBindingOverrides":{},"fullScopeAllowed":true,"nodeReRegistrationTimeout":-1,"protocolMappers":[{"id":"878e0bc0-b5d2-4208-8c62-90cb25fda499","name":"Client' IP 'Address","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientAddress","id.token.claim":"true","access.token.claim":"true","claim.name":"clientAddress","jsonType.label":"String"}},{"id":"19a00aa9-e6a6-41f5-bcae-3b4bfbe68d4d","name":"Client' 'ID","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientId","id.token.claim":"true","access.token.claim":"true","claim.name":"clientId","jsonType.label":"String"}},{"id":"a6b08fa6-8f76-4217-af66-51afa842acf3","name":"Client' 'Host","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientHost","id.token.claim":"true","access.token.claim":"true","claim.name":"clientHost","jsonType.label":"String"}}],"defaultClientScopes":["web-origins","acr","roles","profile","email"],"optionalClientScopes":["address","phone","offline_access","microprofile-jwt"],"access":{"view":true,"configure":true,"manage":true}}]'
+++ __client_id=ef4e5c7a-c08f-4436-a5ed-c59f343a67b8
+++ echo ef4e5c7a-c08f-4436-a5ed-c59f343a67b8
+++ return 0
++ __client_id=ef4e5c7a-c08f-4436-a5ed-c59f343a67b8
++ '[' 0 -ne 0 ']'
+++ curl -s -f -X GET 192.168.128.104:31784/admin/realms/nonrtric-realm/clients/ef4e5c7a-c08f-4436-a5ed-c59f343a67b8/client-secret -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJPdF95c1BxdlUxdm96cjc3bUZJdVFuWDlmTFpKV2YtamswMzEwYlgwdW5JIn0.eyJleHAiOjE3Njc3ODY0NzYsImlhdCI6MTc2Nzc4NjQxNiwianRpIjoiMDE5NDcwNGYtYmRhMC00NGQzLWE4ZDQtYjEyYmU5NDVjYjMzIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6ImQ1MDZhMTk5LTZiMjItNDk5MS05MjFjLTNjYjJmOTU3MjEyMSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiIzOGRhNzdmYS0xZjc5LTRkNTctYmNjOC1mODkzNjJkZDE0ODEiLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiMzhkYTc3ZmEtMWY3OS00ZDU3LWJjYzgtZjg5MzYyZGQxNDgxIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.MEAHsPjk2_LoiZM6iAPgcw7hWCF5CFIqpLHKJ78_-kuGOxZcMoqvYKrhyIKq058oycqL54IEHetY3rDD0q6NVSreYBV5Vtd427g1xwNft2LfjndV1FnTPvw3ZDhPHMld0HC5pu0DbImKF8r5CMshug1bEjGDr_9zh7FmHAbP3x-2yhsl0UA2eK2WRsJPdB2t3gXce4i3r2_gv3pMvx6sZLvOZxckXxRyxWkyzjrCO7IuW_l9FRdv8depNSeyUCh1nbC8ZL5ONIgdrZpHL_-AafmwXrkAWpk7Regfc_nktWmQuiiPVEGztCM44vkKp8ftCLjWvGzxjPsknFtkD7zP4w'
++ __client_secret='{"type":"secret","value":"Mml5DHAPqmYDd2GrP1YjMrrfd9uEQg5u"}'
++ '[' 0 -ne 0 ']'
+++ echo '{"type":"secret","value":"Mml5DHAPqmYDd2GrP1YjMrrfd9uEQg5u"}'
+++ jq -r .value
++ __client_secret=Mml5DHAPqmYDd2GrP1YjMrrfd9uEQg5u
+++ curl -s -f -X POST 192.168.128.104:31784/realms/nonrtric-realm/protocol/openid-connect/token -H Content-Type:application/x-www-form-urlencoded -d client_id=console-setup -d client_secret=Mml5DHAPqmYDd2GrP1YjMrrfd9uEQg5u -d grant_type=client_credentials
++ __TMP_TOKEN='{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJkejlEcGhMdS11RXFfbEZ5Rkp4d3FhQURuSkR5VFU4R2RMSkF4WlFqQUhVIn0.eyJleHAiOjE3Njc3ODY3MTYsImlhdCI6MTc2Nzc4NjQxNiwianRpIjoiNWY0NzZlYjItN2U4OS00NjkzLWJhZWQtNmVhNTc1NmUyZWIxIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEyNzlhZjM1LWNlZjItNDdlOC1iM2QzLTkwODg2MmJkMGUzNCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiY2xpZW50SG9zdCI6IjEwLjI0NC4wLjQ2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC40NiJ9.ejyII0YLnfA8N1SoENVAna4dWqN_5any5EIixrk5ZCfExKZRSVPMJtV8_w54XXZj53uZk5yaUpksxdll_kATK0SIZ3eq_yVjRnOpOufyiie9-J9sJpBDNHsUDOODAtCiLHmp5vKGIh9mjhfsn0CEUJcWUhkl9B-pZbqcWdAKovRD_ePDz1DV6_4XLj2qsu6yRfQQAUbTwXvWNXC6hegkMsBZPZMwpDtYIfrzvsex_PFA7-iQSeC7KAvHYJIMUcqFJEEV8aQzts7a97EV_a_YhuAkCNhw1jRKHQS7nf_EK9Rls_D5m2CivKhpcpkVRnF4Ge9LKTdcwa8Npf6GJGzibw","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"email profile"}'
++ '[' 0 -ne 0 ']'
++ echo '{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJkejlEcGhMdS11RXFfbEZ5Rkp4d3FhQURuSkR5VFU4R2RMSkF4WlFqQUhVIn0.eyJleHAiOjE3Njc3ODY3MTYsImlhdCI6MTc2Nzc4NjQxNiwianRpIjoiNWY0NzZlYjItN2U4OS00NjkzLWJhZWQtNmVhNTc1NmUyZWIxIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEyNzlhZjM1LWNlZjItNDdlOC1iM2QzLTkwODg2MmJkMGUzNCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiY2xpZW50SG9zdCI6IjEwLjI0NC4wLjQ2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC40NiJ9.ejyII0YLnfA8N1SoENVAna4dWqN_5any5EIixrk5ZCfExKZRSVPMJtV8_w54XXZj53uZk5yaUpksxdll_kATK0SIZ3eq_yVjRnOpOufyiie9-J9sJpBDNHsUDOODAtCiLHmp5vKGIh9mjhfsn0CEUJcWUhkl9B-pZbqcWdAKovRD_ePDz1DV6_4XLj2qsu6yRfQQAUbTwXvWNXC6hegkMsBZPZMwpDtYIfrzvsex_PFA7-iQSeC7KAvHYJIMUcqFJEEV8aQzts7a97EV_a_YhuAkCNhw1jRKHQS7nf_EK9Rls_D5m2CivKhpcpkVRnF4Ge9LKTdcwa8Npf6GJGzibw","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"email' 'profile"}'
++ jq -r .access_token
++ return 0
+ TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJkejlEcGhMdS11RXFfbEZ5Rkp4d3FhQURuSkR5VFU4R2RMSkF4WlFqQUhVIn0.eyJleHAiOjE3Njc3ODY3MTYsImlhdCI6MTc2Nzc4NjQxNiwianRpIjoiNWY0NzZlYjItN2U4OS00NjkzLWJhZWQtNmVhNTc1NmUyZWIxIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEyNzlhZjM1LWNlZjItNDdlOC1iM2QzLTkwODg2MmJkMGUzNCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiY2xpZW50SG9zdCI6IjEwLjI0NC4wLjQ2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC40NiJ9.ejyII0YLnfA8N1SoENVAna4dWqN_5any5EIixrk5ZCfExKZRSVPMJtV8_w54XXZj53uZk5yaUpksxdll_kATK0SIZ3eq_yVjRnOpOufyiie9-J9sJpBDNHsUDOODAtCiLHmp5vKGIh9mjhfsn0CEUJcWUhkl9B-pZbqcWdAKovRD_ePDz1DV6_4XLj2qsu6yRfQQAUbTwXvWNXC6hegkMsBZPZMwpDtYIfrzvsex_PFA7-iQSeC7KAvHYJIMUcqFJEEV8aQzts7a97EV_a_YhuAkCNhw1jRKHQS7nf_EK9Rls_D5m2CivKhpcpkVRnF4Ge9LKTdcwa8Npf6GJGzibw
+ JOB='{"info_type_id": "json-file-data-from-filestore",
     "job_owner": "console",
     "status_notification_uri": "http://callback.ridenext-nonrt:80/post",
     "job_definition": {
        "deliveryInfo": {
           "topic": "pmreports",
           "bootStrapServers": "kafka-1-kafka-bootstrap.ridenext-nonrt:9092"
        },
        "filter": {
           "sourceNames": [],
           "measurementTypes": []
        }
     }}'
+ echo 'Creating ICS job for kafka bridge: rapp-topic -> pmreports'
Creating ICS job for kafka bridge: rapp-topic -> pmreports
+ echo '{"info_type_id":' '"json-file-data-from-filestore",' '"job_owner":' '"console",' '"status_notification_uri":' '"http://callback.ridenext-nonrt:80/post",' '"job_definition":' '{' '"deliveryInfo":' '{' '"topic":' '"pmreports",' '"bootStrapServers":' '"kafka-1-kafka-bootstrap.ridenext-nonrt:9092"' '},' '"filter":' '{' '"sourceNames":' '[],' '"measurementTypes":' '[]' '}' '}}'
+ create_ics_job kp-kafka-bridge 0 eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJkejlEcGhMdS11RXFfbEZ5Rkp4d3FhQURuSkR5VFU4R2RMSkF4WlFqQUhVIn0.eyJleHAiOjE3Njc3ODY3MTYsImlhdCI6MTc2Nzc4NjQxNiwianRpIjoiNWY0NzZlYjItN2U4OS00NjkzLWJhZWQtNmVhNTc1NmUyZWIxIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEyNzlhZjM1LWNlZjItNDdlOC1iM2QzLTkwODg2MmJkMGUzNCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiY2xpZW50SG9zdCI6IjEwLjI0NC4wLjQ2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC40NiJ9.ejyII0YLnfA8N1SoENVAna4dWqN_5any5EIixrk5ZCfExKZRSVPMJtV8_w54XXZj53uZk5yaUpksxdll_kATK0SIZ3eq_yVjRnOpOufyiie9-J9sJpBDNHsUDOODAtCiLHmp5vKGIh9mjhfsn0CEUJcWUhkl9B-pZbqcWdAKovRD_ePDz1DV6_4XLj2qsu6yRfQQAUbTwXvWNXC6hegkMsBZPZMwpDtYIfrzvsex_PFA7-iQSeC7KAvHYJIMUcqFJEEV8aQzts7a97EV_a_YhuAkCNhw1jRKHQS7nf_EK9Rls_D5m2CivKhpcpkVRnF4Ge9LKTdcwa8Npf6GJGzibw
++ kubectl get svc -n ridenext-nonrt informationservice --output 'jsonpath={.spec.ports[?(@.name=="http")].nodePort}'
+ ICS_PROXY_PORT=31823
+ echo 'NodePort to ics: 31823'
NodePort to ics: 31823
+ JOB='{"info_type_id": "json-file-data-from-filestore", "job_owner": "console", "status_notification_uri": "http://callback.ridenext-nonrt:80/post", "job_definition": { "deliveryInfo": { "topic": "pmreports", "bootStrapServers": "kafka-1-kafka-bootstrap.ridenext-nonrt:9092" }, "filter": { "sourceNames": [], "measurementTypes": [] } }}'
+ echo '{"info_type_id":' '"json-file-data-from-filestore",' '"job_owner":' '"console",' '"status_notification_uri":' '"http://callback.ridenext-nonrt:80/post",' '"job_definition":' '{' '"deliveryInfo":' '{' '"topic":' '"pmreports",' '"bootStrapServers":' '"kafka-1-kafka-bootstrap.ridenext-nonrt:9092"' '},' '"filter":' '{' '"sourceNames":' '[],' '"measurementTypes":' '[]' '}' '}}'
{"info_type_id": "json-file-data-from-filestore", "job_owner": "console", "status_notification_uri": "http://callback.ridenext-nonrt:80/post", "job_definition": { "deliveryInfo": { "topic": "pmreports", "bootStrapServers": "kafka-1-kafka-bootstrap.ridenext-nonrt:9092" }, "filter": { "sourceNames": [], "measurementTypes": [] } }}
+ retcode=1
+ echo 'Creating job-kp-kafka-bridge-0'
Creating job-kp-kafka-bridge-0
+ '[' 1 -ne 0 ']'
+ '[' -z eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJkejlEcGhMdS11RXFfbEZ5Rkp4d3FhQURuSkR5VFU4R2RMSkF4WlFqQUhVIn0.eyJleHAiOjE3Njc3ODY3MTYsImlhdCI6MTc2Nzc4NjQxNiwianRpIjoiNWY0NzZlYjItN2U4OS00NjkzLWJhZWQtNmVhNTc1NmUyZWIxIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEyNzlhZjM1LWNlZjItNDdlOC1iM2QzLTkwODg2MmJkMGUzNCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiY2xpZW50SG9zdCI6IjEwLjI0NC4wLjQ2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC40NiJ9.ejyII0YLnfA8N1SoENVAna4dWqN_5any5EIixrk5ZCfExKZRSVPMJtV8_w54XXZj53uZk5yaUpksxdll_kATK0SIZ3eq_yVjRnOpOufyiie9-J9sJpBDNHsUDOODAtCiLHmp5vKGIh9mjhfsn0CEUJcWUhkl9B-pZbqcWdAKovRD_ePDz1DV6_4XLj2qsu6yRfQQAUbTwXvWNXC6hegkMsBZPZMwpDtYIfrzvsex_PFA7-iQSeC7KAvHYJIMUcqFJEEV8aQzts7a97EV_a_YhuAkCNhw1jRKHQS7nf_EK9Rls_D5m2CivKhpcpkVRnF4Ge9LKTdcwa8Npf6GJGzibw ']'
+ __bearer='Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJkejlEcGhMdS11RXFfbEZ5Rkp4d3FhQURuSkR5VFU4R2RMSkF4WlFqQUhVIn0.eyJleHAiOjE3Njc3ODY3MTYsImlhdCI6MTc2Nzc4NjQxNiwianRpIjoiNWY0NzZlYjItN2U4OS00NjkzLWJhZWQtNmVhNTc1NmUyZWIxIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEyNzlhZjM1LWNlZjItNDdlOC1iM2QzLTkwODg2MmJkMGUzNCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiY2xpZW50SG9zdCI6IjEwLjI0NC4wLjQ2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC40NiJ9.ejyII0YLnfA8N1SoENVAna4dWqN_5any5EIixrk5ZCfExKZRSVPMJtV8_w54XXZj53uZk5yaUpksxdll_kATK0SIZ3eq_yVjRnOpOufyiie9-J9sJpBDNHsUDOODAtCiLHmp5vKGIh9mjhfsn0CEUJcWUhkl9B-pZbqcWdAKovRD_ePDz1DV6_4XLj2qsu6yRfQQAUbTwXvWNXC6hegkMsBZPZMwpDtYIfrzvsex_PFA7-iQSeC7KAvHYJIMUcqFJEEV8aQzts7a97EV_a_YhuAkCNhw1jRKHQS7nf_EK9Rls_D5m2CivKhpcpkVRnF4Ge9LKTdcwa8Npf6GJGzibw'
++ curl -s -X PUT -w '%{http_code}' -H accept:application/json -H Content-Type:application/json http://192.168.128.104:31823/data-consumer/v1/info-jobs/job-kp-kafka-bridge-0 --data-binary @.job.json -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJkejlEcGhMdS11RXFfbEZ5Rkp4d3FhQURuSkR5VFU4R2RMSkF4WlFqQUhVIn0.eyJleHAiOjE3Njc3ODY3MTYsImlhdCI6MTc2Nzc4NjQxNiwianRpIjoiNWY0NzZlYjItN2U4OS00NjkzLWJhZWQtNmVhNTc1NmUyZWIxIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEyNzlhZjM1LWNlZjItNDdlOC1iM2QzLTkwODg2MmJkMGUzNCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwiY2xpZW50SG9zdCI6IjEwLjI0NC4wLjQ2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtY29uc29sZS1zZXR1cCIsImNsaWVudEFkZHJlc3MiOiIxMC4yNDQuMC40NiJ9.ejyII0YLnfA8N1SoENVAna4dWqN_5any5EIixrk5ZCfExKZRSVPMJtV8_w54XXZj53uZk5yaUpksxdll_kATK0SIZ3eq_yVjRnOpOufyiie9-J9sJpBDNHsUDOODAtCiLHmp5vKGIh9mjhfsn0CEUJcWUhkl9B-pZbqcWdAKovRD_ePDz1DV6_4XLj2qsu6yRfQQAUbTwXvWNXC6hegkMsBZPZMwpDtYIfrzvsex_PFA7-iQSeC7KAvHYJIMUcqFJEEV8aQzts7a97EV_a_YhuAkCNhw1jRKHQS7nf_EK9Rls_D5m2CivKhpcpkVRnF4Ge9LKTdcwa8Npf6GJGzibw'
+ STAT=201
+ retcode=0
+ echo 'curl return code: 0'
curl return code: 0
+ '[' 0 -eq 0 ']'
+ status=201
+ echo 'http status code: 201'
http status code: 201
+ '[' 201 == 200 ']'
+ '[' 201 == 201 ']'
+ echo 'Job created ok'
Job created ok
+ sleep 1
+ '[' 0 -ne 0 ']'
+ echo 'PM Kafka bridge job installation completed'
PM Kafka bridge job installation completed
[0;32mâœ“ scripts/install-pm-kafka-bridge.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/fix-oauth-authentication.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/fix-oauth-authentication.sh...[0m
Applying OAuth authentication fixes for PM components
Upgrading main nrt-pm Helm release to apply OAuth configuration changes...
Release "nrt-pm" has been upgraded. Happy Helming!
NAME: nrt-pm
LAST DEPLOYED: Wed Jan  7 17:16:57 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 2
TEST SUITE: None
OAuth authentication fixes applied successfully!
Components should now use PLAINTEXT authentication on port 9092
[0;32mâœ“ scripts/fix-oauth-authentication.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mAll RANPM installation scripts executed successfully![0m
[0;32m=========================================================================[0m

[1;33mNext steps:[0m
1. Verify all pods are running: [0;32mkubectl get pods -n ridenext-nonrt[0m
2. Check Kafka topics: [0;32mkubectl exec -n ridenext-nonrt kafka-client -- kafka-topics --list --bootstrap-server kafka-1-kafka-bootstrap.ridenext-nonrt:9092[0m
3. Deploy Energy Saving rApp: See energy_saving_rapp_deployment.md

[1;33mLog file saved to: /home/bluefox/Manish/performance/rn-smo_cleanup/install/demo/LOGS/install-ranpm-Logs//install-ranpm-20260107-171311.log[0m
