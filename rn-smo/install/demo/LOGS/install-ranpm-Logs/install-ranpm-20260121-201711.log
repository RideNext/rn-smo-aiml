[0;32m=========================================================================[0m
[0;32mStarting RANPM Installation[0m
[0;32mLog file: /home/bluefox/Manish/performance/rn-smo_cleanup/install/demo/LOGS/install-ranpm-Logs//install-ranpm-20260121-201711.log[0m
[0;32m=========================================================================[0m

[1;33mChecking prerequisites...[0m
[0;32mâœ“ Found: kubectl[0m
[0;32mâœ“ Found: helm[0m
[0;32mâœ“ Found: envsubst[0m
[0;32mâœ“ Found: jq[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/install-nrt.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/install-nrt.sh...[0m
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Kubernetes control plane host: 192.168.128.104
Host obtained from current kubectl context
Kubernetes version : v1.32.2
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Checking requirements
 Checking if istio is installed
  OK
 Checking if jq is installed
  OK
 Checking if envsubst is installed
  OK
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Restarting istiod, workaround to refresh jwks cache
deployment.apps/istiod restarted
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
##### Installing chart: nrt-base-0
Error: INSTALLATION FAILED: cannot re-use a name that is still in use
Cluster ip: 192.168.128.104
Nodeport to keycloak proxy: 31784
Get admin token
Admin token: eyJhbGciOi...
Creating realms: nonrtric-realm
 Attempt to create realm: nonrtric-realm
  {"errorMessage":"Conflict detected. See logs for details"}  OK, create_realms
Attempt to create clients console-setup for realm: nonrtric-realm
 Creating client: console-setup
 {"errorMessage":"Client console-setup already exists"} OK, create_clients
Attempt to generate secret for clients console-setup in realm nonrtric-realm
  Client id for client console-setup in realm nonrtric-realm: 1b2566bf-7e9a-4e9c-8a71-c6b786715c26
  Creating secret
   Client secret for client console-setup in realm nonrtric-realm: bBM76tUiBUXDgfKlDYTV1VrgnXsxgO6T
   OK, generate_client_secrets

Get admin token
Admin token: eyJhbGciOi...
##### Installing charts: strimzi and nrt-base-1
"strimzi" already exists with the same configuration, skipping
Installing Strimzi Kafka operator version: 0.39.0
Error: INSTALLATION FAILED: cannot re-use a name that is still in use
Error: INSTALLATION FAILED: cannot re-use a name that is still in use
Waiting for influx db - there may be error messages while trying...
Db user configured, skipping
secret/influxdb-api-token patched (no change)
Wait for kafka

Creating topic: file-ready with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Error while executing topic command : Topic 'file-ready' already exists.
[2026-01-21 14:47:18,650] ERROR org.apache.kafka.common.errors.TopicExistsException: Topic 'file-ready' already exists.
 (kafka.admin.TopicCommand$)
command terminated with exit code 1
Creating topic: collected-file with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Error while executing topic command : Topic 'collected-file' already exists.
[2026-01-21 14:47:21,010] ERROR org.apache.kafka.common.errors.TopicExistsException: Topic 'collected-file' already exists.
 (kafka.admin.TopicCommand$)
command terminated with exit code 1
Creating topic: json-file-ready-kp with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Error while executing topic command : Topic 'json-file-ready-kp' already exists.
[2026-01-21 14:47:23,435] ERROR org.apache.kafka.common.errors.TopicExistsException: Topic 'json-file-ready-kp' already exists.
 (kafka.admin.TopicCommand$)
command terminated with exit code 1
Creating topic: json-file-ready-kpadp with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Error while executing topic command : Topic 'json-file-ready-kpadp' already exists.
[2026-01-21 14:47:25,793] ERROR org.apache.kafka.common.errors.TopicExistsException: Topic 'json-file-ready-kpadp' already exists.
 (kafka.admin.TopicCommand$)
command terminated with exit code 1
Creating topic: pmreports with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Error while executing topic command : Topic 'pmreports' already exists.
[2026-01-21 14:47:27,972] ERROR org.apache.kafka.common.errors.TopicExistsException: Topic 'pmreports' already exists.
 (kafka.admin.TopicCommand$)
command terminated with exit code 1

Wait for SDNR

##### Installing: chart nonrtricgateway
Error: INSTALLATION FAILED: cannot re-use a name that is still in use

##### Installing: chart controlpanel
Error: INSTALLATION FAILED: cannot re-use a name that is still in use

##### Installing: chart ran-o1-sim
Error: INSTALLATION FAILED: cannot re-use a name that is still in use

##### Installing chart: nrt-pm
Updating dfc truststore
 Adding https ca cert to dfc truststore
Owner: EMAILADDRESS=a@example.com, OU=EST, O=EST, L=., ST=., C=SE
Issuer: EMAILADDRESS=a@example.com, OU=EST, O=EST, L=., ST=., C=SE
Serial number: 5ac065137477243e239f0eec2e754785cf508dee
Valid from: Thu Jun 19 12:15:38 IST 2025 until: Wed Oct 20 12:15:38 IST 3024
Certificate fingerprints:
	 SHA1: 5C:74:95:4C:89:E8:46:0C:38:FC:1D:2F:70:4D:E6:7F:4B:34:7D:DD
	 SHA256: 12:55:0E:ED:5A:01:44:2F:67:75:38:DB:F5:BC:61:EC:57:55:9B:53:87:6A:2D:44:F6:8E:CD:45:E9:3D:7A:28
Signature algorithm name: SHA256withRSA
Subject Public Key Algorithm: 2048-bit RSA key
Version: 3

Extensions: 

#1: ObjectId: 2.5.29.35 Criticality=false
AuthorityKeyIdentifier [
KeyIdentifier [
0000: 41 1C 22 88 BD 47 5D 05   61 59 54 5C BF 80 D6 1B  A."..G].aYT\....
0010: B5 B1 F2 20                                        ... 
]
]

#2: ObjectId: 2.5.29.19 Criticality=true
BasicConstraints:[
  CA:true
  PathLen: no limit
]

#3: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: 41 1C 22 88 BD 47 5D 05   61 59 54 5C BF 80 D6 1B  A."..G].aYT\....
0010: B5 B1 F2 20                                        ... 
]
]

Trust this certificate? [no]:  Certificate was added to keystore
Attempt to create clients kafka-producer-pm-xml2json for realm: nonrtric-realm
 Creating client: kafka-producer-pm-xml2json
Get admin token
Admin token: eyJhbGciOi...
 {"errorMessage":"Client kafka-producer-pm-xml2json already exists"} OK, create_clients
Attempt to generate secret for clients kafka-producer-pm-xml2json in realm nonrtric-realm
  Client id for client kafka-producer-pm-xml2json in realm nonrtric-realm: 94774f04-9fc0-482d-9ee7-ff82d7eeee86
  Creating secret
   Client secret for client kafka-producer-pm-xml2json in realm nonrtric-realm: iycBHThACmPfh1VRsTnAT5S2i3M17rM7
   OK, generate_client_secrets
Attempt to create clients kafka-producer-pm-json2kafka for realm: nonrtric-realm
 Creating client: kafka-producer-pm-json2kafka
 {"errorMessage":"Client kafka-producer-pm-json2kafka already exists"} OK, create_clients
Attempt to generate secret for clients kafka-producer-pm-json2kafka in realm nonrtric-realm
  Client id for client kafka-producer-pm-json2kafka in realm nonrtric-realm: 92bc1f5f-52fd-4b0b-b1f2-67f953ed7878
  Creating secret
   Client secret for client kafka-producer-pm-json2kafka in realm nonrtric-realm: xEdk9JfbMOVjfk7T5DYnGG898qojSCVB
   OK, generate_client_secrets
Attempt to create clients kafka-producer-pm-json2influx for realm: nonrtric-realm
 Creating client: kafka-producer-pm-json2influx
 {"errorMessage":"Client kafka-producer-pm-json2influx already exists"} OK, create_clients
Attempt to generate secret for clients kafka-producer-pm-json2influx in realm nonrtric-realm
  Client id for client kafka-producer-pm-json2influx in realm nonrtric-realm: 912ebc58-8253-4d91-836e-3226ea1ca4de
  Creating secret
   Client secret for client kafka-producer-pm-json2influx in realm nonrtric-realm: Ub4e8Ka52j49AKAyH168NNNzFyoxGSd5
   OK, generate_client_secrets
Bucket  exist, OK
Attempt to create clients pm-producer-json2kafka for realm: nonrtric-realm
 Creating client: pm-producer-json2kafka
 {"errorMessage":"Client pm-producer-json2kafka already exists"} OK, create_clients
Attempt to generate secret for clients pm-producer-json2kafka in realm nonrtric-realm
  Client id for client pm-producer-json2kafka in realm nonrtric-realm: a930a7a7-ec7d-47d9-a244-68e279cc41d4
  Creating secret
   Client secret for client pm-producer-json2kafka in realm nonrtric-realm: Z4ZscH3vqd6aOrq1Ex4XxNZTJjhhcZxY
   OK, generate_client_secrets
Attempt to create clients dfc for realm: nonrtric-realm
 Creating client: dfc
 {"errorMessage":"Client dfc already exists"} OK, create_clients
Attempt to generate secret for clients dfc in realm nonrtric-realm
  Client id for client dfc in realm nonrtric-realm: ce4bad57-fe63-4ef0-af72-06f40562edc6
  Creating secret
   Client secret for client dfc in realm nonrtric-realm: Fz7n6Wphdjmh80CdO0wVWxOtp9TPa2Vb
   OK, generate_client_secrets
Error: INSTALLATION FAILED: cannot re-use a name that is still in use

######################################################################
ranpm installed
Wait until all pods are running before installation additional charts
Do: 'kubectl get po -n ridenext-nonrt' and verify that all pods are in status Running
 and all included containers are Ready
######################################################################
[0;32mâœ“ scripts/install-nrt.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/install-pm-log.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/install-pm-log.sh...[0m
Installing pmlog
Cluster ip: 192.168.128.104
Nodeport to keycloak proxy: 31784
Get admin token
Admin token: eyJhbGciOi...
Attempt to create clients nrt-pm-log for realm: nonrtric-realm
 Creating client: nrt-pm-log
 OK, create_clients
Attempt to generate secret for clients nrt-pm-log in realm nonrtric-realm
  Client id for client nrt-pm-log in realm nonrtric-realm: ddaf3024-1cc0-460d-8578-ebb3d1d3ab8a
  Creating secret
   Client secret for client nrt-pm-log in realm nonrtric-realm: nFvCo2Ko7rVKRNJuqUAaNeMo9SuGyI1I
   OK, generate_client_secrets
Creating bucket pm-logg-bucket in influxdb2
Bucket  does not exist, creating
Bucket pm-logg-bucket created, OK
 helm install...
NAME: nrt-pm-log
LAST DEPLOYED: Wed Jan 21 20:17:32 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None
done
[0;32mâœ“ scripts/install-pm-log.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/install-pm-influx-job.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/install-pm-influx-job.sh...[0m
Kubernetes control plane host: 192.168.128.104
+ echo 'Installation pm to influx job'
Installation pm to influx job
+ echo ' Retriving influxdb2 access token...'
 Retriving influxdb2 access token...
++ get_influxdb2_token influxdb2-0 ridenext-nonrt
++ '[' 2 -ne 2 ']'
++ __influxdb2_access_token=
++ '[' -z '' ']'
+++ kubectl exec -n ridenext-nonrt influxdb2-0 -- influx config ls --json
+++ jq -r .default.token
++ export __influxdb2_access_token=mXv_M1tY8Q51N0c7ZOTli7WY8_5O2g2TwBEbVSVcp6iRxeTJUr_KJAZT7seQ2nVfgO5WlA5RZE4auxM38wLCMA==
++ __influxdb2_access_token=mXv_M1tY8Q51N0c7ZOTli7WY8_5O2g2TwBEbVSVcp6iRxeTJUr_KJAZT7seQ2nVfgO5WlA5RZE4auxM38wLCMA==
++ '[' 0 -ne 0 ']'
++ '[' -z mXv_M1tY8Q51N0c7ZOTli7WY8_5O2g2TwBEbVSVcp6iRxeTJUr_KJAZT7seQ2nVfgO5WlA5RZE4auxM38wLCMA== ']'
++ echo -n mXv_M1tY8Q51N0c7ZOTli7WY8_5O2g2TwBEbVSVcp6iRxeTJUr_KJAZT7seQ2nVfgO5WlA5RZE4auxM38wLCMA==
++ return 0
+ INFLUXDB2_TOKEN=mXv_M1tY8Q51N0c7ZOTli7WY8_5O2g2TwBEbVSVcp6iRxeTJUr_KJAZT7seQ2nVfgO5WlA5RZE4auxM38wLCMA==
+ bucket=pm-bucket
+ echo 'Creating bucket pm-bucket in influxdb2'
Creating bucket pm-bucket in influxdb2
+ create_influxdb2_bucket influxdb2-0 ridenext-nonrt pm-bucket
++ kubectl exec -n ridenext-nonrt influxdb2-0 -- influx bucket ls --json
++ jq 'any(.[].name; . == "pm-bucket")'
+ RES=true
+ '[' true == true ']'
+ echo 'Bucket  exist, OK'
Bucket  exist, OK
+ . scripts/helper-scripts/populate_keycloak.sh
++ echo 'Cluster ip: 192.168.128.104'
Cluster ip: 192.168.128.104
+++ kubectl get svc -n ridenext-nonrt keycloak-proxy --output 'jsonpath={.spec.ports[?(@.name=="http")].nodePort}'
++ KC_PROXY_PORT=31784
++ echo 'Nodeport to keycloak proxy: 31784'
Nodeport to keycloak proxy: 31784
++ __get_admin_token
++ echo 'Get admin token'
Get admin token
++ ADMIN_TOKEN=
++ '[' 0 -lt 20 ']'
+++ curl -s -X POST 192.168.128.104:31784/realms/master/protocol/openid-connect/token --max-time 2 -H 'Content-Type: application/x-www-form-urlencoded' -d username=admin -d password=admin -d grant_type=password -d client_id=admin-cli
+++ jq -r .access_token
++ ADMIN_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJBdGJkUm1OQ2pnUWVvY0N6aTctMU01NUJ3cmZWUGdlMGxyeERNQ2Zhb3BFIn0.eyJleHAiOjE3NjkwMDY5MTMsImlhdCI6MTc2OTAwNjg1MywianRpIjoiNzhlNTJlODMtM2VhMC00NjM4LTg4ODEtNjEyOTIyYTA3NzliIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjJkNzgyNjlmLTA4MTEtNDhhMS04NWM5LTE1OTZkMmVkN2FjNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiIzOWZmODhhMS1hYjNhLTQyNjktODgyMS0yNzA3Mzk4ZjVhODciLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiMzlmZjg4YTEtYWIzYS00MjY5LTg4MjEtMjcwNzM5OGY1YTg3IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.g25mP15drDN3hzHZw-kZf-kdaMiw2s9OCVngp9diqbXacILwHOQrdqK2bMV4AfDrexDkc5hkPjmk85z17Y8iDzMuw9G7NLNIFcc5bPUvOjgK0-B9VulN7UYmndAi-cxZs76UgUivE72nqrtxQXv97jsnFqU7REpTJEHiXvOEEyFvhyyi_oznt-aHzvKZaw0edaC0s7-EtvF-o6ATU_QNtWBiaUZPa9lV20VAAsKRB-3RDhZSlocEjm9Eal7dQBkzappK4rQCBY4IqNKtI7VgAf1x27TrO9uMbWw2kP6mH60ac6_ly6khynq1oo_Kc560jDdIYSu6qBSgzP3V0W74fA
++ '[' 991 -lt 20 ']'
++ '[' 991 -lt 20 ']'
++ echo 'Admin token: eyJhbGciOi...'
Admin token: eyJhbGciOi...
++ echo eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJBdGJkUm1OQ2pnUWVvY0N6aTctMU01NUJ3cmZWUGdlMGxyeERNQ2Zhb3BFIn0.eyJleHAiOjE3NjkwMDY5MTMsImlhdCI6MTc2OTAwNjg1MywianRpIjoiNzhlNTJlODMtM2VhMC00NjM4LTg4ODEtNjEyOTIyYTA3NzliIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjJkNzgyNjlmLTA4MTEtNDhhMS04NWM5LTE1OTZkMmVkN2FjNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiIzOWZmODhhMS1hYjNhLTQyNjktODgyMS0yNzA3Mzk4ZjVhODciLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiMzlmZjg4YTEtYWIzYS00MjY5LTg4MjEtMjcwNzM5OGY1YTg3IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.g25mP15drDN3hzHZw-kZf-kdaMiw2s9OCVngp9diqbXacILwHOQrdqK2bMV4AfDrexDkc5hkPjmk85z17Y8iDzMuw9G7NLNIFcc5bPUvOjgK0-B9VulN7UYmndAi-cxZs76UgUivE72nqrtxQXv97jsnFqU7REpTJEHiXvOEEyFvhyyi_oznt-aHzvKZaw0edaC0s7-EtvF-o6ATU_QNtWBiaUZPa9lV20VAAsKRB-3RDhZSlocEjm9Eal7dQBkzappK4rQCBY4IqNKtI7VgAf1x27TrO9uMbWw2kP6mH60ac6_ly6khynq1oo_Kc560jDdIYSu6qBSgzP3V0W74fA
++ __ADM_TOKEN_TS=1
+ cid=console-setup
++ get_client_token nonrtric-realm console-setup
++ __check_admin_token
++ __diff=0
++ '[' 0 -gt 15 ']'
++ __realm=nonrtric-realm
++ __client=console-setup
+++ __get_client_id nonrtric-realm console-setup
++++ curl -s -X GET '192.168.128.104:31784/admin/realms/nonrtric-realm/clients?clientId=console-setup' -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJBdGJkUm1OQ2pnUWVvY0N6aTctMU01NUJ3cmZWUGdlMGxyeERNQ2Zhb3BFIn0.eyJleHAiOjE3NjkwMDY5MTMsImlhdCI6MTc2OTAwNjg1MywianRpIjoiNzhlNTJlODMtM2VhMC00NjM4LTg4ODEtNjEyOTIyYTA3NzliIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjJkNzgyNjlmLTA4MTEtNDhhMS04NWM5LTE1OTZkMmVkN2FjNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiIzOWZmODhhMS1hYjNhLTQyNjktODgyMS0yNzA3Mzk4ZjVhODciLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiMzlmZjg4YTEtYWIzYS00MjY5LTg4MjEtMjcwNzM5OGY1YTg3IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.g25mP15drDN3hzHZw-kZf-kdaMiw2s9OCVngp9diqbXacILwHOQrdqK2bMV4AfDrexDkc5hkPjmk85z17Y8iDzMuw9G7NLNIFcc5bPUvOjgK0-B9VulN7UYmndAi-cxZs76UgUivE72nqrtxQXv97jsnFqU7REpTJEHiXvOEEyFvhyyi_oznt-aHzvKZaw0edaC0s7-EtvF-o6ATU_QNtWBiaUZPa9lV20VAAsKRB-3RDhZSlocEjm9Eal7dQBkzappK4rQCBY4IqNKtI7VgAf1x27TrO9uMbWw2kP6mH60ac6_ly6khynq1oo_Kc560jDdIYSu6qBSgzP3V0W74fA'
+++ __client_data='[{"id":"1b2566bf-7e9a-4e9c-8a71-c6b786715c26","clientId":"console-setup","rootUrl":"https://example.com/example/","adminUrl":"https://example.com/example/","surrogateAuthRequired":false,"enabled":true,"alwaysDisplayInConsole":false,"clientAuthenticatorType":"client-secret","secret":"bBM76tUiBUXDgfKlDYTV1VrgnXsxgO6T","redirectUris":[],"webOrigins":[],"notBefore":0,"bearerOnly":false,"consentRequired":false,"standardFlowEnabled":true,"implicitFlowEnabled":false,"directAccessGrantsEnabled":false,"serviceAccountsEnabled":true,"publicClient":false,"frontchannelLogout":false,"protocol":"openid-connect","attributes":{"client.secret.creation.time":"1769006832"},"authenticationFlowBindingOverrides":{},"fullScopeAllowed":true,"nodeReRegistrationTimeout":-1,"protocolMappers":[{"id":"32b597e0-f1b5-4b10-be8b-752b6ba1db0f","name":"Client IP Address","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientAddress","id.token.claim":"true","access.token.claim":"true","claim.name":"clientAddress","jsonType.label":"String"}},{"id":"3c5f4d1d-dd7a-4e13-b831-e9848a4bea51","name":"Client ID","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientId","id.token.claim":"true","access.token.claim":"true","claim.name":"clientId","jsonType.label":"String"}},{"id":"594798a1-6912-4b44-b399-6b4f88fe7234","name":"Client Host","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientHost","id.token.claim":"true","access.token.claim":"true","claim.name":"clientHost","jsonType.label":"String"}}],"defaultClientScopes":["web-origins","acr","roles","profile","email"],"optionalClientScopes":["address","phone","offline_access","microprofile-jwt"],"access":{"view":true,"configure":true,"manage":true}}]'
+++ '[' 0 -ne 0 ']'
++++ jq -r '.[0].id'
++++ echo '[{"id":"1b2566bf-7e9a-4e9c-8a71-c6b786715c26","clientId":"console-setup","rootUrl":"https://example.com/example/","adminUrl":"https://example.com/example/","surrogateAuthRequired":false,"enabled":true,"alwaysDisplayInConsole":false,"clientAuthenticatorType":"client-secret","secret":"bBM76tUiBUXDgfKlDYTV1VrgnXsxgO6T","redirectUris":[],"webOrigins":[],"notBefore":0,"bearerOnly":false,"consentRequired":false,"standardFlowEnabled":true,"implicitFlowEnabled":false,"directAccessGrantsEnabled":false,"serviceAccountsEnabled":true,"publicClient":false,"frontchannelLogout":false,"protocol":"openid-connect","attributes":{"client.secret.creation.time":"1769006832"},"authenticationFlowBindingOverrides":{},"fullScopeAllowed":true,"nodeReRegistrationTimeout":-1,"protocolMappers":[{"id":"32b597e0-f1b5-4b10-be8b-752b6ba1db0f","name":"Client' IP 'Address","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientAddress","id.token.claim":"true","access.token.claim":"true","claim.name":"clientAddress","jsonType.label":"String"}},{"id":"3c5f4d1d-dd7a-4e13-b831-e9848a4bea51","name":"Client' 'ID","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientId","id.token.claim":"true","access.token.claim":"true","claim.name":"clientId","jsonType.label":"String"}},{"id":"594798a1-6912-4b44-b399-6b4f88fe7234","name":"Client' 'Host","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientHost","id.token.claim":"true","access.token.claim":"true","claim.name":"clientHost","jsonType.label":"String"}}],"defaultClientScopes":["web-origins","acr","roles","profile","email"],"optionalClientScopes":["address","phone","offline_access","microprofile-jwt"],"access":{"view":true,"configure":true,"manage":true}}]'
+++ __client_id=1b2566bf-7e9a-4e9c-8a71-c6b786715c26
+++ echo 1b2566bf-7e9a-4e9c-8a71-c6b786715c26
+++ return 0
++ __client_id=1b2566bf-7e9a-4e9c-8a71-c6b786715c26
++ '[' 0 -ne 0 ']'
+++ curl -s -f -X GET 192.168.128.104:31784/admin/realms/nonrtric-realm/clients/1b2566bf-7e9a-4e9c-8a71-c6b786715c26/client-secret -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJBdGJkUm1OQ2pnUWVvY0N6aTctMU01NUJ3cmZWUGdlMGxyeERNQ2Zhb3BFIn0.eyJleHAiOjE3NjkwMDY5MTMsImlhdCI6MTc2OTAwNjg1MywianRpIjoiNzhlNTJlODMtM2VhMC00NjM4LTg4ODEtNjEyOTIyYTA3NzliIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjJkNzgyNjlmLTA4MTEtNDhhMS04NWM5LTE1OTZkMmVkN2FjNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiIzOWZmODhhMS1hYjNhLTQyNjktODgyMS0yNzA3Mzk4ZjVhODciLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiMzlmZjg4YTEtYWIzYS00MjY5LTg4MjEtMjcwNzM5OGY1YTg3IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.g25mP15drDN3hzHZw-kZf-kdaMiw2s9OCVngp9diqbXacILwHOQrdqK2bMV4AfDrexDkc5hkPjmk85z17Y8iDzMuw9G7NLNIFcc5bPUvOjgK0-B9VulN7UYmndAi-cxZs76UgUivE72nqrtxQXv97jsnFqU7REpTJEHiXvOEEyFvhyyi_oznt-aHzvKZaw0edaC0s7-EtvF-o6ATU_QNtWBiaUZPa9lV20VAAsKRB-3RDhZSlocEjm9Eal7dQBkzappK4rQCBY4IqNKtI7VgAf1x27TrO9uMbWw2kP6mH60ac6_ly6khynq1oo_Kc560jDdIYSu6qBSgzP3V0W74fA'
++ __client_secret='{"type":"secret","value":"bBM76tUiBUXDgfKlDYTV1VrgnXsxgO6T"}'
++ '[' 0 -ne 0 ']'
+++ echo '{"type":"secret","value":"bBM76tUiBUXDgfKlDYTV1VrgnXsxgO6T"}'
+++ jq -r .value
++ __client_secret=bBM76tUiBUXDgfKlDYTV1VrgnXsxgO6T
+++ curl -s -f -X POST 192.168.128.104:31784/realms/nonrtric-realm/protocol/openid-connect/token -H Content-Type:application/x-www-form-urlencoded -d client_id=console-setup -d client_secret=bBM76tUiBUXDgfKlDYTV1VrgnXsxgO6T -d grant_type=client_credentials
++ __TMP_TOKEN='{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZ3A4bWNNVGlsZkFDTy1wTGRnR1pIdG1Vc0F0Unl2LUtsVHQtSmpiQjZZIn0.eyJleHAiOjE3NjkwMDcxNTMsImlhdCI6MTc2OTAwNjg1MywianRpIjoiMjlhNjhjODYtYzI0OC00OGNlLTgwOTUtZjI1MTA1ZGQxZThhIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjllY2Q1MGI4LWEwOTktNDE1OC05ZDNlLWJmNGUyNGVlMTBkNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuMTQ3IiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LWNvbnNvbGUtc2V0dXAiLCJjbGllbnRBZGRyZXNzIjoiMTAuMjQ0LjAuMTQ3In0.sCO9aIPPznS4eyxMCwV5Ms7uc7QcRlMrTV2jeG92bm5JOrD_1EYW-_6slYAcEggWVHZYlsdj6HBNZSy0iNchRhgdrbK809oIW_jX8LVZ_4Qk4OisSY8wnE6c38NNuCbh9kXhNHkAYdmGtkvdJpTOwhEU8QQ3--cGqqND_fENYEF5ef1yFtdZwxT86zcNNhHy2kHp5bvMDVx5Pqc0vkTEaFT5hLnv4cZWyy0Zw4Mm5e-R0fREQ67qFK3g8x1tOnw8ngFtsMp1wcFdQrvpmSRRkpiSJwVXFoZBY4Qa79V757_n755fLyzKmayV9ql5SEZ6PO-bkM7R29v8x93RWEV3Mw","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"profile email"}'
++ '[' 0 -ne 0 ']'
++ echo '{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZ3A4bWNNVGlsZkFDTy1wTGRnR1pIdG1Vc0F0Unl2LUtsVHQtSmpiQjZZIn0.eyJleHAiOjE3NjkwMDcxNTMsImlhdCI6MTc2OTAwNjg1MywianRpIjoiMjlhNjhjODYtYzI0OC00OGNlLTgwOTUtZjI1MTA1ZGQxZThhIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjllY2Q1MGI4LWEwOTktNDE1OC05ZDNlLWJmNGUyNGVlMTBkNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuMTQ3IiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LWNvbnNvbGUtc2V0dXAiLCJjbGllbnRBZGRyZXNzIjoiMTAuMjQ0LjAuMTQ3In0.sCO9aIPPznS4eyxMCwV5Ms7uc7QcRlMrTV2jeG92bm5JOrD_1EYW-_6slYAcEggWVHZYlsdj6HBNZSy0iNchRhgdrbK809oIW_jX8LVZ_4Qk4OisSY8wnE6c38NNuCbh9kXhNHkAYdmGtkvdJpTOwhEU8QQ3--cGqqND_fENYEF5ef1yFtdZwxT86zcNNhHy2kHp5bvMDVx5Pqc0vkTEaFT5hLnv4cZWyy0Zw4Mm5e-R0fREQ67qFK3g8x1tOnw8ngFtsMp1wcFdQrvpmSRRkpiSJwVXFoZBY4Qa79V757_n755fLyzKmayV9ql5SEZ6PO-bkM7R29v8x93RWEV3Mw","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"profile' 'email"}'
++ jq -r .access_token
++ return 0
+ TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZ3A4bWNNVGlsZkFDTy1wTGRnR1pIdG1Vc0F0Unl2LUtsVHQtSmpiQjZZIn0.eyJleHAiOjE3NjkwMDcxNTMsImlhdCI6MTc2OTAwNjg1MywianRpIjoiMjlhNjhjODYtYzI0OC00OGNlLTgwOTUtZjI1MTA1ZGQxZThhIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjllY2Q1MGI4LWEwOTktNDE1OC05ZDNlLWJmNGUyNGVlMTBkNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuMTQ3IiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LWNvbnNvbGUtc2V0dXAiLCJjbGllbnRBZGRyZXNzIjoiMTAuMjQ0LjAuMTQ3In0.sCO9aIPPznS4eyxMCwV5Ms7uc7QcRlMrTV2jeG92bm5JOrD_1EYW-_6slYAcEggWVHZYlsdj6HBNZSy0iNchRhgdrbK809oIW_jX8LVZ_4Qk4OisSY8wnE6c38NNuCbh9kXhNHkAYdmGtkvdJpTOwhEU8QQ3--cGqqND_fENYEF5ef1yFtdZwxT86zcNNhHy2kHp5bvMDVx5Pqc0vkTEaFT5hLnv4cZWyy0Zw4Mm5e-R0fREQ67qFK3g8x1tOnw8ngFtsMp1wcFdQrvpmSRRkpiSJwVXFoZBY4Qa79V757_n755fLyzKmayV9ql5SEZ6PO-bkM7R29v8x93RWEV3Mw
+ JOB='{"info_type_id": "json-file-data-from-filestore",
     "job_owner": "console",
     "status_notification_uri": "http://callback.ridenext-nonrt:80/post",
     "job_definition": {
        "db-url":"http://influxdb2.ridenext-nonrt:8086",
        "db-org":"est",
        "db-bucket":"pm-bucket",
        "db-token":"mXv_M1tY8Q51N0c7ZOTli7WY8_5O2g2TwBEbVSVcp6iRxeTJUr_KJAZT7seQ2nVfgO5WlA5RZE4auxM38wLCMA==",
        "filterType":"pmdata",
        "filter":{}
     }}'
+ echo '{"info_type_id":' '"json-file-data-from-filestore",' '"job_owner":' '"console",' '"status_notification_uri":' '"http://callback.ridenext-nonrt:80/post",' '"job_definition":' '{' '"db-url":"http://influxdb2.ridenext-nonrt:8086",' '"db-org":"est",' '"db-bucket":"pm-bucket",' '"db-token":"mXv_M1tY8Q51N0c7ZOTli7WY8_5O2g2TwBEbVSVcp6iRxeTJUr_KJAZT7seQ2nVfgO5WlA5RZE4auxM38wLCMA==",' '"filterType":"pmdata",' '"filter":{}' '}}'
+ create_ics_job kp-influx-json 0 eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZ3A4bWNNVGlsZkFDTy1wTGRnR1pIdG1Vc0F0Unl2LUtsVHQtSmpiQjZZIn0.eyJleHAiOjE3NjkwMDcxNTMsImlhdCI6MTc2OTAwNjg1MywianRpIjoiMjlhNjhjODYtYzI0OC00OGNlLTgwOTUtZjI1MTA1ZGQxZThhIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjllY2Q1MGI4LWEwOTktNDE1OC05ZDNlLWJmNGUyNGVlMTBkNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuMTQ3IiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LWNvbnNvbGUtc2V0dXAiLCJjbGllbnRBZGRyZXNzIjoiMTAuMjQ0LjAuMTQ3In0.sCO9aIPPznS4eyxMCwV5Ms7uc7QcRlMrTV2jeG92bm5JOrD_1EYW-_6slYAcEggWVHZYlsdj6HBNZSy0iNchRhgdrbK809oIW_jX8LVZ_4Qk4OisSY8wnE6c38NNuCbh9kXhNHkAYdmGtkvdJpTOwhEU8QQ3--cGqqND_fENYEF5ef1yFtdZwxT86zcNNhHy2kHp5bvMDVx5Pqc0vkTEaFT5hLnv4cZWyy0Zw4Mm5e-R0fREQ67qFK3g8x1tOnw8ngFtsMp1wcFdQrvpmSRRkpiSJwVXFoZBY4Qa79V757_n755fLyzKmayV9ql5SEZ6PO-bkM7R29v8x93RWEV3Mw
++ kubectl get svc -n ridenext-nonrt informationservice --output 'jsonpath={.spec.ports[?(@.name=="http")].nodePort}'
+ ICS_PROXY_PORT=31823
+ echo 'NodePort to ics: 31823'
NodePort to ics: 31823
+ JOB='{"info_type_id": "json-file-data-from-filestore", "job_owner": "console", "status_notification_uri": "http://callback.ridenext-nonrt:80/post", "job_definition": { "db-url":"http://influxdb2.ridenext-nonrt:8086", "db-org":"est", "db-bucket":"pm-bucket", "db-token":"mXv_M1tY8Q51N0c7ZOTli7WY8_5O2g2TwBEbVSVcp6iRxeTJUr_KJAZT7seQ2nVfgO5WlA5RZE4auxM38wLCMA==", "filterType":"pmdata", "filter":{} }}'
+ echo '{"info_type_id":' '"json-file-data-from-filestore",' '"job_owner":' '"console",' '"status_notification_uri":' '"http://callback.ridenext-nonrt:80/post",' '"job_definition":' '{' '"db-url":"http://influxdb2.ridenext-nonrt:8086",' '"db-org":"est",' '"db-bucket":"pm-bucket",' '"db-token":"mXv_M1tY8Q51N0c7ZOTli7WY8_5O2g2TwBEbVSVcp6iRxeTJUr_KJAZT7seQ2nVfgO5WlA5RZE4auxM38wLCMA==",' '"filterType":"pmdata",' '"filter":{}' '}}'
{"info_type_id": "json-file-data-from-filestore", "job_owner": "console", "status_notification_uri": "http://callback.ridenext-nonrt:80/post", "job_definition": { "db-url":"http://influxdb2.ridenext-nonrt:8086", "db-org":"est", "db-bucket":"pm-bucket", "db-token":"mXv_M1tY8Q51N0c7ZOTli7WY8_5O2g2TwBEbVSVcp6iRxeTJUr_KJAZT7seQ2nVfgO5WlA5RZE4auxM38wLCMA==", "filterType":"pmdata", "filter":{} }}
+ retcode=1
+ echo 'Creating job-kp-influx-json-0'
Creating job-kp-influx-json-0
+ '[' 1 -ne 0 ']'
+ '[' -z eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZ3A4bWNNVGlsZkFDTy1wTGRnR1pIdG1Vc0F0Unl2LUtsVHQtSmpiQjZZIn0.eyJleHAiOjE3NjkwMDcxNTMsImlhdCI6MTc2OTAwNjg1MywianRpIjoiMjlhNjhjODYtYzI0OC00OGNlLTgwOTUtZjI1MTA1ZGQxZThhIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjllY2Q1MGI4LWEwOTktNDE1OC05ZDNlLWJmNGUyNGVlMTBkNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuMTQ3IiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LWNvbnNvbGUtc2V0dXAiLCJjbGllbnRBZGRyZXNzIjoiMTAuMjQ0LjAuMTQ3In0.sCO9aIPPznS4eyxMCwV5Ms7uc7QcRlMrTV2jeG92bm5JOrD_1EYW-_6slYAcEggWVHZYlsdj6HBNZSy0iNchRhgdrbK809oIW_jX8LVZ_4Qk4OisSY8wnE6c38NNuCbh9kXhNHkAYdmGtkvdJpTOwhEU8QQ3--cGqqND_fENYEF5ef1yFtdZwxT86zcNNhHy2kHp5bvMDVx5Pqc0vkTEaFT5hLnv4cZWyy0Zw4Mm5e-R0fREQ67qFK3g8x1tOnw8ngFtsMp1wcFdQrvpmSRRkpiSJwVXFoZBY4Qa79V757_n755fLyzKmayV9ql5SEZ6PO-bkM7R29v8x93RWEV3Mw ']'
+ __bearer='Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZ3A4bWNNVGlsZkFDTy1wTGRnR1pIdG1Vc0F0Unl2LUtsVHQtSmpiQjZZIn0.eyJleHAiOjE3NjkwMDcxNTMsImlhdCI6MTc2OTAwNjg1MywianRpIjoiMjlhNjhjODYtYzI0OC00OGNlLTgwOTUtZjI1MTA1ZGQxZThhIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjllY2Q1MGI4LWEwOTktNDE1OC05ZDNlLWJmNGUyNGVlMTBkNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuMTQ3IiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LWNvbnNvbGUtc2V0dXAiLCJjbGllbnRBZGRyZXNzIjoiMTAuMjQ0LjAuMTQ3In0.sCO9aIPPznS4eyxMCwV5Ms7uc7QcRlMrTV2jeG92bm5JOrD_1EYW-_6slYAcEggWVHZYlsdj6HBNZSy0iNchRhgdrbK809oIW_jX8LVZ_4Qk4OisSY8wnE6c38NNuCbh9kXhNHkAYdmGtkvdJpTOwhEU8QQ3--cGqqND_fENYEF5ef1yFtdZwxT86zcNNhHy2kHp5bvMDVx5Pqc0vkTEaFT5hLnv4cZWyy0Zw4Mm5e-R0fREQ67qFK3g8x1tOnw8ngFtsMp1wcFdQrvpmSRRkpiSJwVXFoZBY4Qa79V757_n755fLyzKmayV9ql5SEZ6PO-bkM7R29v8x93RWEV3Mw'
++ curl -s -X PUT -w '%{http_code}' -H accept:application/json -H Content-Type:application/json http://192.168.128.104:31823/data-consumer/v1/info-jobs/job-kp-influx-json-0 --data-binary @.job.json -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZ3A4bWNNVGlsZkFDTy1wTGRnR1pIdG1Vc0F0Unl2LUtsVHQtSmpiQjZZIn0.eyJleHAiOjE3NjkwMDcxNTMsImlhdCI6MTc2OTAwNjg1MywianRpIjoiMjlhNjhjODYtYzI0OC00OGNlLTgwOTUtZjI1MTA1ZGQxZThhIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjllY2Q1MGI4LWEwOTktNDE1OC05ZDNlLWJmNGUyNGVlMTBkNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuMTQ3IiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LWNvbnNvbGUtc2V0dXAiLCJjbGllbnRBZGRyZXNzIjoiMTAuMjQ0LjAuMTQ3In0.sCO9aIPPznS4eyxMCwV5Ms7uc7QcRlMrTV2jeG92bm5JOrD_1EYW-_6slYAcEggWVHZYlsdj6HBNZSy0iNchRhgdrbK809oIW_jX8LVZ_4Qk4OisSY8wnE6c38NNuCbh9kXhNHkAYdmGtkvdJpTOwhEU8QQ3--cGqqND_fENYEF5ef1yFtdZwxT86zcNNhHy2kHp5bvMDVx5Pqc0vkTEaFT5hLnv4cZWyy0Zw4Mm5e-R0fREQ67qFK3g8x1tOnw8ngFtsMp1wcFdQrvpmSRRkpiSJwVXFoZBY4Qa79V757_n755fLyzKmayV9ql5SEZ6PO-bkM7R29v8x93RWEV3Mw'
+ STAT=201
+ retcode=0
+ echo 'curl return code: 0'
curl return code: 0
+ '[' 0 -eq 0 ']'
+ status=201
+ echo 'http status code: 201'
http status code: 201
+ '[' 201 == 200 ']'
+ '[' 201 == 201 ']'
+ echo 'Job created ok'
Job created ok
+ sleep 1
+ '[' 0 -ne 0 ']'
+ echo done
done
[0;32mâœ“ scripts/install-pm-influx-job.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/install-pm-rapp.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/install-pm-rapp.sh...[0m
Installing pmrapp
Creating client in keycloak
Creating topic: rapp-topic with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
Created topic rapp-topic.
Cluster ip: 192.168.128.104
Nodeport to keycloak proxy: 31784
Get admin token
Admin token: eyJhbGciOi...
Attempt to create clients pm-rapp for realm: nonrtric-realm
 Creating client: pm-rapp
 OK, create_clients
Attempt to generate secret for clients pm-rapp in realm nonrtric-realm
  Client id for client pm-rapp in realm nonrtric-realm: 191720ec-252f-440d-b823-0deac4993a28
  Creating secret
   Client secret for client pm-rapp in realm nonrtric-realm: 68EH1EkxNI06aLR3d1znjGb7GJPEWK6q
   OK, generate_client_secrets
 helm install...
NAME: nrt-pm-rapp
LAST DEPLOYED: Wed Jan 21 20:17:37 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 1
TEST SUITE: None
done
[0;32mâœ“ scripts/install-pm-rapp.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/install-pm-kafka-bridge.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/install-pm-kafka-bridge.sh...[0m
+ . scripts/helper-scripts/create_topic.sh
++ kube_get_controlplane_host
+++ kubectl config current-context
++ __current_context=kubernetes-admin@kubernetes
++ '[' 0 -ne 0 ']'
+++ kubectl config view -o 'jsonpath={.contexts[?(@.name=='\''kubernetes-admin@kubernetes'\'')].context.cluster}'
++ __cluster_name=kubernetes
++ '[' 0 -ne 0 ']'
+++ kubectl config view -o 'jsonpath={.clusters[?(@.name=='\''kubernetes'\'')].cluster.server}'
++ __cluster_server=https://192.168.128.104:6443
++ '[' 0 -ne 0 ']'
+++ echo https://192.168.128.104:6443
+++ awk '-F[/:]' '{print $4}'
++ __cluster_host=192.168.128.104
++ '[' 0 -ne 0 ']'
++ [[ 192.168.128.104 == \1\2\7\.\0\.\0\.\1 ]]
++ echo 192.168.128.104
++ return 0
+ export KUBERNETESHOST=192.168.128.104
+ KUBERNETESHOST=192.168.128.104
+ '[' 0 -ne 0 ']'
+ echo 'Kubernetes control plane host: 192.168.128.104'
Kubernetes control plane host: 192.168.128.104
+ echo 'Installation pm kafka bridge job - rapp-topic to pmreports'
Installation pm kafka bridge job - rapp-topic to pmreports
+ echo 'Creating pmreports topic if it doesn'\''t exist'
Creating pmreports topic if it doesn't exist
+ create_topic kafka-1-kafka-bootstrap.ridenext-nonrt:9092 pmreports 10
+ '[' 3 -lt 2 ']'
+ kafka=kafka-1-kafka-bootstrap.ridenext-nonrt:9092
+ topic=pmreports
+ partitions=10
+ '[' -z 10 ']'
+ echo 'Creating topic: pmreports with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092'
Creating topic: pmreports with 10 partition(s) in kafka-1-kafka-bootstrap.ridenext-nonrt:9092
+ kubectl exec -it kafka-client -n ridenext-nonrt -- bash -c 'kafka-topics --create --topic pmreports  --partitions 10 --bootstrap-server kafka-1-kafka-bootstrap.ridenext-nonrt:9092'
Error while executing topic command : Topic 'pmreports' already exists.
[2026-01-21 14:47:42,416] ERROR org.apache.kafka.common.errors.TopicExistsException: Topic 'pmreports' already exists.
 (kafka.admin.TopicCommand$)
command terminated with exit code 1
+ return 1
+ . scripts/helper-scripts/populate_keycloak.sh
++ echo 'Cluster ip: 192.168.128.104'
Cluster ip: 192.168.128.104
+++ kubectl get svc -n ridenext-nonrt keycloak-proxy --output 'jsonpath={.spec.ports[?(@.name=="http")].nodePort}'
++ KC_PROXY_PORT=31784
++ echo 'Nodeport to keycloak proxy: 31784'
Nodeport to keycloak proxy: 31784
++ __get_admin_token
++ echo 'Get admin token'
Get admin token
++ ADMIN_TOKEN=
++ '[' 0 -lt 20 ']'
+++ curl -s -X POST 192.168.128.104:31784/realms/master/protocol/openid-connect/token --max-time 2 -H 'Content-Type: application/x-www-form-urlencoded' -d username=admin -d password=admin -d grant_type=password -d client_id=admin-cli
+++ jq -r .access_token
++ ADMIN_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJBdGJkUm1OQ2pnUWVvY0N6aTctMU01NUJ3cmZWUGdlMGxyeERNQ2Zhb3BFIn0.eyJleHAiOjE3NjkwMDY5MjMsImlhdCI6MTc2OTAwNjg2MiwianRpIjoiMGM0YWUzOTItZjc4NS00ODZlLTllZDctNmE2MWU0MDEyMTIyIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjJkNzgyNjlmLTA4MTEtNDhhMS04NWM5LTE1OTZkMmVkN2FjNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJjNWEwMjVlZC1mZDU3LTRkNzItODNmNi01MDk1MTkxZGQzM2QiLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiYzVhMDI1ZWQtZmQ1Ny00ZDcyLTgzZjYtNTA5NTE5MWRkMzNkIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.XOoxNL6yteraatSEDgnwtYg4n-WqG2M80Qt-hBPkcibHMzpTgvvXltyU4nul8lPVrJ6JecqWUvHB0AOisnsFQS9fxOl-JA2sOu2LcJBZMlxZaHXt1cR13h89_IBGH3cXVtUkaePnHuTiUAYVzWVP1FqxiL5MchTMV-p2DUS9TthWvKYR6wAJys6_T6kxvP3_V5dBRAHpozyarJC6W98VlhBxvtrADTmmNWNiaTBJHU5qHOQ3flkk46jpPhuC0K2atqqatNsJpUzsqDcIX3ssl32BihGZeXw_oLOQUmGjsDINX-In9Txmk6kRtcqdjx5-vepWGdvWhnu5nu1YIg3P6g
++ '[' 991 -lt 20 ']'
++ '[' 991 -lt 20 ']'
++ echo 'Admin token: eyJhbGciOi...'
Admin token: eyJhbGciOi...
++ echo eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJBdGJkUm1OQ2pnUWVvY0N6aTctMU01NUJ3cmZWUGdlMGxyeERNQ2Zhb3BFIn0.eyJleHAiOjE3NjkwMDY5MjMsImlhdCI6MTc2OTAwNjg2MiwianRpIjoiMGM0YWUzOTItZjc4NS00ODZlLTllZDctNmE2MWU0MDEyMTIyIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjJkNzgyNjlmLTA4MTEtNDhhMS04NWM5LTE1OTZkMmVkN2FjNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJjNWEwMjVlZC1mZDU3LTRkNzItODNmNi01MDk1MTkxZGQzM2QiLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiYzVhMDI1ZWQtZmQ1Ny00ZDcyLTgzZjYtNTA5NTE5MWRkMzNkIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.XOoxNL6yteraatSEDgnwtYg4n-WqG2M80Qt-hBPkcibHMzpTgvvXltyU4nul8lPVrJ6JecqWUvHB0AOisnsFQS9fxOl-JA2sOu2LcJBZMlxZaHXt1cR13h89_IBGH3cXVtUkaePnHuTiUAYVzWVP1FqxiL5MchTMV-p2DUS9TthWvKYR6wAJys6_T6kxvP3_V5dBRAHpozyarJC6W98VlhBxvtrADTmmNWNiaTBJHU5qHOQ3flkk46jpPhuC0K2atqqatNsJpUzsqDcIX3ssl32BihGZeXw_oLOQUmGjsDINX-In9Txmk6kRtcqdjx5-vepWGdvWhnu5nu1YIg3P6g
++ __ADM_TOKEN_TS=3
+ cid=console-setup
++ get_client_token nonrtric-realm console-setup
++ __check_admin_token
++ __diff=0
++ '[' 0 -gt 15 ']'
++ __realm=nonrtric-realm
++ __client=console-setup
+++ __get_client_id nonrtric-realm console-setup
++++ curl -s -X GET '192.168.128.104:31784/admin/realms/nonrtric-realm/clients?clientId=console-setup' -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJBdGJkUm1OQ2pnUWVvY0N6aTctMU01NUJ3cmZWUGdlMGxyeERNQ2Zhb3BFIn0.eyJleHAiOjE3NjkwMDY5MjMsImlhdCI6MTc2OTAwNjg2MiwianRpIjoiMGM0YWUzOTItZjc4NS00ODZlLTllZDctNmE2MWU0MDEyMTIyIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjJkNzgyNjlmLTA4MTEtNDhhMS04NWM5LTE1OTZkMmVkN2FjNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJjNWEwMjVlZC1mZDU3LTRkNzItODNmNi01MDk1MTkxZGQzM2QiLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiYzVhMDI1ZWQtZmQ1Ny00ZDcyLTgzZjYtNTA5NTE5MWRkMzNkIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.XOoxNL6yteraatSEDgnwtYg4n-WqG2M80Qt-hBPkcibHMzpTgvvXltyU4nul8lPVrJ6JecqWUvHB0AOisnsFQS9fxOl-JA2sOu2LcJBZMlxZaHXt1cR13h89_IBGH3cXVtUkaePnHuTiUAYVzWVP1FqxiL5MchTMV-p2DUS9TthWvKYR6wAJys6_T6kxvP3_V5dBRAHpozyarJC6W98VlhBxvtrADTmmNWNiaTBJHU5qHOQ3flkk46jpPhuC0K2atqqatNsJpUzsqDcIX3ssl32BihGZeXw_oLOQUmGjsDINX-In9Txmk6kRtcqdjx5-vepWGdvWhnu5nu1YIg3P6g'
+++ __client_data='[{"id":"1b2566bf-7e9a-4e9c-8a71-c6b786715c26","clientId":"console-setup","rootUrl":"https://example.com/example/","adminUrl":"https://example.com/example/","surrogateAuthRequired":false,"enabled":true,"alwaysDisplayInConsole":false,"clientAuthenticatorType":"client-secret","secret":"bBM76tUiBUXDgfKlDYTV1VrgnXsxgO6T","redirectUris":[],"webOrigins":[],"notBefore":0,"bearerOnly":false,"consentRequired":false,"standardFlowEnabled":true,"implicitFlowEnabled":false,"directAccessGrantsEnabled":false,"serviceAccountsEnabled":true,"publicClient":false,"frontchannelLogout":false,"protocol":"openid-connect","attributes":{"client.secret.creation.time":"1769006832"},"authenticationFlowBindingOverrides":{},"fullScopeAllowed":true,"nodeReRegistrationTimeout":-1,"protocolMappers":[{"id":"32b597e0-f1b5-4b10-be8b-752b6ba1db0f","name":"Client IP Address","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientAddress","id.token.claim":"true","access.token.claim":"true","claim.name":"clientAddress","jsonType.label":"String"}},{"id":"3c5f4d1d-dd7a-4e13-b831-e9848a4bea51","name":"Client ID","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientId","id.token.claim":"true","access.token.claim":"true","claim.name":"clientId","jsonType.label":"String"}},{"id":"594798a1-6912-4b44-b399-6b4f88fe7234","name":"Client Host","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientHost","id.token.claim":"true","access.token.claim":"true","claim.name":"clientHost","jsonType.label":"String"}}],"defaultClientScopes":["web-origins","acr","roles","profile","email"],"optionalClientScopes":["address","phone","offline_access","microprofile-jwt"],"access":{"view":true,"configure":true,"manage":true}}]'
+++ '[' 0 -ne 0 ']'
++++ jq -r '.[0].id'
++++ echo '[{"id":"1b2566bf-7e9a-4e9c-8a71-c6b786715c26","clientId":"console-setup","rootUrl":"https://example.com/example/","adminUrl":"https://example.com/example/","surrogateAuthRequired":false,"enabled":true,"alwaysDisplayInConsole":false,"clientAuthenticatorType":"client-secret","secret":"bBM76tUiBUXDgfKlDYTV1VrgnXsxgO6T","redirectUris":[],"webOrigins":[],"notBefore":0,"bearerOnly":false,"consentRequired":false,"standardFlowEnabled":true,"implicitFlowEnabled":false,"directAccessGrantsEnabled":false,"serviceAccountsEnabled":true,"publicClient":false,"frontchannelLogout":false,"protocol":"openid-connect","attributes":{"client.secret.creation.time":"1769006832"},"authenticationFlowBindingOverrides":{},"fullScopeAllowed":true,"nodeReRegistrationTimeout":-1,"protocolMappers":[{"id":"32b597e0-f1b5-4b10-be8b-752b6ba1db0f","name":"Client' IP 'Address","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientAddress","id.token.claim":"true","access.token.claim":"true","claim.name":"clientAddress","jsonType.label":"String"}},{"id":"3c5f4d1d-dd7a-4e13-b831-e9848a4bea51","name":"Client' 'ID","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientId","id.token.claim":"true","access.token.claim":"true","claim.name":"clientId","jsonType.label":"String"}},{"id":"594798a1-6912-4b44-b399-6b4f88fe7234","name":"Client' 'Host","protocol":"openid-connect","protocolMapper":"oidc-usersessionmodel-note-mapper","consentRequired":false,"config":{"user.session.note":"clientHost","id.token.claim":"true","access.token.claim":"true","claim.name":"clientHost","jsonType.label":"String"}}],"defaultClientScopes":["web-origins","acr","roles","profile","email"],"optionalClientScopes":["address","phone","offline_access","microprofile-jwt"],"access":{"view":true,"configure":true,"manage":true}}]'
+++ __client_id=1b2566bf-7e9a-4e9c-8a71-c6b786715c26
+++ echo 1b2566bf-7e9a-4e9c-8a71-c6b786715c26
+++ return 0
++ __client_id=1b2566bf-7e9a-4e9c-8a71-c6b786715c26
++ '[' 0 -ne 0 ']'
+++ curl -s -f -X GET 192.168.128.104:31784/admin/realms/nonrtric-realm/clients/1b2566bf-7e9a-4e9c-8a71-c6b786715c26/client-secret -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJBdGJkUm1OQ2pnUWVvY0N6aTctMU01NUJ3cmZWUGdlMGxyeERNQ2Zhb3BFIn0.eyJleHAiOjE3NjkwMDY5MjMsImlhdCI6MTc2OTAwNjg2MiwianRpIjoiMGM0YWUzOTItZjc4NS00ODZlLTllZDctNmE2MWU0MDEyMTIyIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL21hc3RlciIsInN1YiI6IjJkNzgyNjlmLTA4MTEtNDhhMS04NWM5LTE1OTZkMmVkN2FjNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFkbWluLWNsaSIsInNlc3Npb25fc3RhdGUiOiJjNWEwMjVlZC1mZDU3LTRkNzItODNmNi01MDk1MTkxZGQzM2QiLCJhY3IiOiIxIiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiYzVhMDI1ZWQtZmQ1Ny00ZDcyLTgzZjYtNTA5NTE5MWRkMzNkIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiJ9.XOoxNL6yteraatSEDgnwtYg4n-WqG2M80Qt-hBPkcibHMzpTgvvXltyU4nul8lPVrJ6JecqWUvHB0AOisnsFQS9fxOl-JA2sOu2LcJBZMlxZaHXt1cR13h89_IBGH3cXVtUkaePnHuTiUAYVzWVP1FqxiL5MchTMV-p2DUS9TthWvKYR6wAJys6_T6kxvP3_V5dBRAHpozyarJC6W98VlhBxvtrADTmmNWNiaTBJHU5qHOQ3flkk46jpPhuC0K2atqqatNsJpUzsqDcIX3ssl32BihGZeXw_oLOQUmGjsDINX-In9Txmk6kRtcqdjx5-vepWGdvWhnu5nu1YIg3P6g'
++ __client_secret='{"type":"secret","value":"bBM76tUiBUXDgfKlDYTV1VrgnXsxgO6T"}'
++ '[' 0 -ne 0 ']'
+++ echo '{"type":"secret","value":"bBM76tUiBUXDgfKlDYTV1VrgnXsxgO6T"}'
+++ jq -r .value
++ __client_secret=bBM76tUiBUXDgfKlDYTV1VrgnXsxgO6T
+++ curl -s -f -X POST 192.168.128.104:31784/realms/nonrtric-realm/protocol/openid-connect/token -H Content-Type:application/x-www-form-urlencoded -d client_id=console-setup -d client_secret=bBM76tUiBUXDgfKlDYTV1VrgnXsxgO6T -d grant_type=client_credentials
++ __TMP_TOKEN='{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZ3A4bWNNVGlsZkFDTy1wTGRnR1pIdG1Vc0F0Unl2LUtsVHQtSmpiQjZZIn0.eyJleHAiOjE3NjkwMDcxNjMsImlhdCI6MTc2OTAwNjg2MywianRpIjoiYjEzZTFhNzItMTNlNi00MmExLWE1NDUtYzkyMjE4NzhhZTE5IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjllY2Q1MGI4LWEwOTktNDE1OC05ZDNlLWJmNGUyNGVlMTBkNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuMTQ3IiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LWNvbnNvbGUtc2V0dXAiLCJjbGllbnRBZGRyZXNzIjoiMTAuMjQ0LjAuMTQ3In0.rWXdBZjm6re5OTFViZHw-YdBoJCZlKs73NzcOhLy8Z54TSioI1WIPxuzeHYm53i17FLB9SODRMgF9OEvE4FEqKzLNhm_P7jl3Abk3Ua8Z6PrXUALqI_rGo6V_1Fybmi3O8mXUN1QIgmdp88NTqWqw2tR0G-0kkJSbMGr48Nt9s-9ILNvA1fiKIlMpWjZtny_QZwGTKGRmq6P53wLkkq0ulc0C533uPh32q-IW6ypnMFd4-2g7bs-7X8xPs8e8-2B-DFxZjSsSxsp09MbEisKWEqP8i58Dwhj7JkN0hu-bGuWgS47l13OBam8ckxQcMPdybCU7osUcWFo91NKGAXK4g","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"profile email"}'
++ '[' 0 -ne 0 ']'
++ echo '{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZ3A4bWNNVGlsZkFDTy1wTGRnR1pIdG1Vc0F0Unl2LUtsVHQtSmpiQjZZIn0.eyJleHAiOjE3NjkwMDcxNjMsImlhdCI6MTc2OTAwNjg2MywianRpIjoiYjEzZTFhNzItMTNlNi00MmExLWE1NDUtYzkyMjE4NzhhZTE5IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjllY2Q1MGI4LWEwOTktNDE1OC05ZDNlLWJmNGUyNGVlMTBkNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuMTQ3IiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LWNvbnNvbGUtc2V0dXAiLCJjbGllbnRBZGRyZXNzIjoiMTAuMjQ0LjAuMTQ3In0.rWXdBZjm6re5OTFViZHw-YdBoJCZlKs73NzcOhLy8Z54TSioI1WIPxuzeHYm53i17FLB9SODRMgF9OEvE4FEqKzLNhm_P7jl3Abk3Ua8Z6PrXUALqI_rGo6V_1Fybmi3O8mXUN1QIgmdp88NTqWqw2tR0G-0kkJSbMGr48Nt9s-9ILNvA1fiKIlMpWjZtny_QZwGTKGRmq6P53wLkkq0ulc0C533uPh32q-IW6ypnMFd4-2g7bs-7X8xPs8e8-2B-DFxZjSsSxsp09MbEisKWEqP8i58Dwhj7JkN0hu-bGuWgS47l13OBam8ckxQcMPdybCU7osUcWFo91NKGAXK4g","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"profile' 'email"}'
++ jq -r .access_token
++ return 0
+ TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZ3A4bWNNVGlsZkFDTy1wTGRnR1pIdG1Vc0F0Unl2LUtsVHQtSmpiQjZZIn0.eyJleHAiOjE3NjkwMDcxNjMsImlhdCI6MTc2OTAwNjg2MywianRpIjoiYjEzZTFhNzItMTNlNi00MmExLWE1NDUtYzkyMjE4NzhhZTE5IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjllY2Q1MGI4LWEwOTktNDE1OC05ZDNlLWJmNGUyNGVlMTBkNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuMTQ3IiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LWNvbnNvbGUtc2V0dXAiLCJjbGllbnRBZGRyZXNzIjoiMTAuMjQ0LjAuMTQ3In0.rWXdBZjm6re5OTFViZHw-YdBoJCZlKs73NzcOhLy8Z54TSioI1WIPxuzeHYm53i17FLB9SODRMgF9OEvE4FEqKzLNhm_P7jl3Abk3Ua8Z6PrXUALqI_rGo6V_1Fybmi3O8mXUN1QIgmdp88NTqWqw2tR0G-0kkJSbMGr48Nt9s-9ILNvA1fiKIlMpWjZtny_QZwGTKGRmq6P53wLkkq0ulc0C533uPh32q-IW6ypnMFd4-2g7bs-7X8xPs8e8-2B-DFxZjSsSxsp09MbEisKWEqP8i58Dwhj7JkN0hu-bGuWgS47l13OBam8ckxQcMPdybCU7osUcWFo91NKGAXK4g
+ JOB='{"info_type_id": "json-file-data-from-filestore",
     "job_owner": "console",
     "status_notification_uri": "http://callback.ridenext-nonrt:80/post",
     "job_definition": {
        "deliveryInfo": {
           "topic": "pmreports",
           "bootStrapServers": "kafka-1-kafka-bootstrap.ridenext-nonrt:9092"
        },
        "filter": {
           "sourceNames": [],
           "measurementTypes": []
        }
     }}'
+ echo 'Creating ICS job for kafka bridge: rapp-topic -> pmreports'
Creating ICS job for kafka bridge: rapp-topic -> pmreports
+ echo '{"info_type_id":' '"json-file-data-from-filestore",' '"job_owner":' '"console",' '"status_notification_uri":' '"http://callback.ridenext-nonrt:80/post",' '"job_definition":' '{' '"deliveryInfo":' '{' '"topic":' '"pmreports",' '"bootStrapServers":' '"kafka-1-kafka-bootstrap.ridenext-nonrt:9092"' '},' '"filter":' '{' '"sourceNames":' '[],' '"measurementTypes":' '[]' '}' '}}'
+ create_ics_job kp-kafka-bridge 0 eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZ3A4bWNNVGlsZkFDTy1wTGRnR1pIdG1Vc0F0Unl2LUtsVHQtSmpiQjZZIn0.eyJleHAiOjE3NjkwMDcxNjMsImlhdCI6MTc2OTAwNjg2MywianRpIjoiYjEzZTFhNzItMTNlNi00MmExLWE1NDUtYzkyMjE4NzhhZTE5IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjllY2Q1MGI4LWEwOTktNDE1OC05ZDNlLWJmNGUyNGVlMTBkNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuMTQ3IiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LWNvbnNvbGUtc2V0dXAiLCJjbGllbnRBZGRyZXNzIjoiMTAuMjQ0LjAuMTQ3In0.rWXdBZjm6re5OTFViZHw-YdBoJCZlKs73NzcOhLy8Z54TSioI1WIPxuzeHYm53i17FLB9SODRMgF9OEvE4FEqKzLNhm_P7jl3Abk3Ua8Z6PrXUALqI_rGo6V_1Fybmi3O8mXUN1QIgmdp88NTqWqw2tR0G-0kkJSbMGr48Nt9s-9ILNvA1fiKIlMpWjZtny_QZwGTKGRmq6P53wLkkq0ulc0C533uPh32q-IW6ypnMFd4-2g7bs-7X8xPs8e8-2B-DFxZjSsSxsp09MbEisKWEqP8i58Dwhj7JkN0hu-bGuWgS47l13OBam8ckxQcMPdybCU7osUcWFo91NKGAXK4g
++ kubectl get svc -n ridenext-nonrt informationservice --output 'jsonpath={.spec.ports[?(@.name=="http")].nodePort}'
+ ICS_PROXY_PORT=31823
+ echo 'NodePort to ics: 31823'
NodePort to ics: 31823
+ JOB='{"info_type_id": "json-file-data-from-filestore", "job_owner": "console", "status_notification_uri": "http://callback.ridenext-nonrt:80/post", "job_definition": { "deliveryInfo": { "topic": "pmreports", "bootStrapServers": "kafka-1-kafka-bootstrap.ridenext-nonrt:9092" }, "filter": { "sourceNames": [], "measurementTypes": [] } }}'
+ echo '{"info_type_id":' '"json-file-data-from-filestore",' '"job_owner":' '"console",' '"status_notification_uri":' '"http://callback.ridenext-nonrt:80/post",' '"job_definition":' '{' '"deliveryInfo":' '{' '"topic":' '"pmreports",' '"bootStrapServers":' '"kafka-1-kafka-bootstrap.ridenext-nonrt:9092"' '},' '"filter":' '{' '"sourceNames":' '[],' '"measurementTypes":' '[]' '}' '}}'
{"info_type_id": "json-file-data-from-filestore", "job_owner": "console", "status_notification_uri": "http://callback.ridenext-nonrt:80/post", "job_definition": { "deliveryInfo": { "topic": "pmreports", "bootStrapServers": "kafka-1-kafka-bootstrap.ridenext-nonrt:9092" }, "filter": { "sourceNames": [], "measurementTypes": [] } }}
+ retcode=1
+ echo 'Creating job-kp-kafka-bridge-0'
Creating job-kp-kafka-bridge-0
+ '[' 1 -ne 0 ']'
+ '[' -z eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZ3A4bWNNVGlsZkFDTy1wTGRnR1pIdG1Vc0F0Unl2LUtsVHQtSmpiQjZZIn0.eyJleHAiOjE3NjkwMDcxNjMsImlhdCI6MTc2OTAwNjg2MywianRpIjoiYjEzZTFhNzItMTNlNi00MmExLWE1NDUtYzkyMjE4NzhhZTE5IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjllY2Q1MGI4LWEwOTktNDE1OC05ZDNlLWJmNGUyNGVlMTBkNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuMTQ3IiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LWNvbnNvbGUtc2V0dXAiLCJjbGllbnRBZGRyZXNzIjoiMTAuMjQ0LjAuMTQ3In0.rWXdBZjm6re5OTFViZHw-YdBoJCZlKs73NzcOhLy8Z54TSioI1WIPxuzeHYm53i17FLB9SODRMgF9OEvE4FEqKzLNhm_P7jl3Abk3Ua8Z6PrXUALqI_rGo6V_1Fybmi3O8mXUN1QIgmdp88NTqWqw2tR0G-0kkJSbMGr48Nt9s-9ILNvA1fiKIlMpWjZtny_QZwGTKGRmq6P53wLkkq0ulc0C533uPh32q-IW6ypnMFd4-2g7bs-7X8xPs8e8-2B-DFxZjSsSxsp09MbEisKWEqP8i58Dwhj7JkN0hu-bGuWgS47l13OBam8ckxQcMPdybCU7osUcWFo91NKGAXK4g ']'
+ __bearer='Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZ3A4bWNNVGlsZkFDTy1wTGRnR1pIdG1Vc0F0Unl2LUtsVHQtSmpiQjZZIn0.eyJleHAiOjE3NjkwMDcxNjMsImlhdCI6MTc2OTAwNjg2MywianRpIjoiYjEzZTFhNzItMTNlNi00MmExLWE1NDUtYzkyMjE4NzhhZTE5IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjllY2Q1MGI4LWEwOTktNDE1OC05ZDNlLWJmNGUyNGVlMTBkNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuMTQ3IiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LWNvbnNvbGUtc2V0dXAiLCJjbGllbnRBZGRyZXNzIjoiMTAuMjQ0LjAuMTQ3In0.rWXdBZjm6re5OTFViZHw-YdBoJCZlKs73NzcOhLy8Z54TSioI1WIPxuzeHYm53i17FLB9SODRMgF9OEvE4FEqKzLNhm_P7jl3Abk3Ua8Z6PrXUALqI_rGo6V_1Fybmi3O8mXUN1QIgmdp88NTqWqw2tR0G-0kkJSbMGr48Nt9s-9ILNvA1fiKIlMpWjZtny_QZwGTKGRmq6P53wLkkq0ulc0C533uPh32q-IW6ypnMFd4-2g7bs-7X8xPs8e8-2B-DFxZjSsSxsp09MbEisKWEqP8i58Dwhj7JkN0hu-bGuWgS47l13OBam8ckxQcMPdybCU7osUcWFo91NKGAXK4g'
++ curl -s -X PUT -w '%{http_code}' -H accept:application/json -H Content-Type:application/json http://192.168.128.104:31823/data-consumer/v1/info-jobs/job-kp-kafka-bridge-0 --data-binary @.job.json -H 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZ3A4bWNNVGlsZkFDTy1wTGRnR1pIdG1Vc0F0Unl2LUtsVHQtSmpiQjZZIn0.eyJleHAiOjE3NjkwMDcxNjMsImlhdCI6MTc2OTAwNjg2MywianRpIjoiYjEzZTFhNzItMTNlNi00MmExLWE1NDUtYzkyMjE4NzhhZTE5IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLnJpZGVuZXh0LW5vbnJ0OjgwODAvcmVhbG1zL25vbnJ0cmljLXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjllY2Q1MGI4LWEwOTktNDE1OC05ZDNlLWJmNGUyNGVlMTBkNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvbnNvbGUtc2V0dXAiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbm9ucnRyaWMtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMjQ0LjAuMTQ3IiwiY2xpZW50SWQiOiJjb25zb2xlLXNldHVwIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LWNvbnNvbGUtc2V0dXAiLCJjbGllbnRBZGRyZXNzIjoiMTAuMjQ0LjAuMTQ3In0.rWXdBZjm6re5OTFViZHw-YdBoJCZlKs73NzcOhLy8Z54TSioI1WIPxuzeHYm53i17FLB9SODRMgF9OEvE4FEqKzLNhm_P7jl3Abk3Ua8Z6PrXUALqI_rGo6V_1Fybmi3O8mXUN1QIgmdp88NTqWqw2tR0G-0kkJSbMGr48Nt9s-9ILNvA1fiKIlMpWjZtny_QZwGTKGRmq6P53wLkkq0ulc0C533uPh32q-IW6ypnMFd4-2g7bs-7X8xPs8e8-2B-DFxZjSsSxsp09MbEisKWEqP8i58Dwhj7JkN0hu-bGuWgS47l13OBam8ckxQcMPdybCU7osUcWFo91NKGAXK4g'
+ STAT=201
+ retcode=0
+ echo 'curl return code: 0'
curl return code: 0
+ '[' 0 -eq 0 ']'
+ status=201
+ echo 'http status code: 201'
http status code: 201
+ '[' 201 == 200 ']'
+ '[' 201 == 201 ']'
+ echo 'Job created ok'
Job created ok
+ sleep 1
+ '[' 0 -ne 0 ']'
+ echo 'PM Kafka bridge job installation completed'
PM Kafka bridge job installation completed
[0;32mâœ“ scripts/install-pm-kafka-bridge.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mProcessing: scripts/fix-oauth-authentication.sh[0m
[0;32m=========================================================================[0m
[1;33mRunning scripts/fix-oauth-authentication.sh...[0m
Applying OAuth authentication fixes for PM components
Upgrading main nrt-pm Helm release to apply OAuth configuration changes...
Release "nrt-pm" has been upgraded. Happy Helming!
NAME: nrt-pm
LAST DEPLOYED: Wed Jan 21 20:17:44 2026
NAMESPACE: ridenext-nonrt
STATUS: deployed
REVISION: 2
TEST SUITE: None
OAuth authentication fixes applied successfully!
Components should now use PLAINTEXT authentication on port 9092
[0;32mâœ“ scripts/fix-oauth-authentication.sh completed successfully[0m

[0;32m=========================================================================[0m
[0;32mAll RANPM installation scripts executed successfully![0m
[0;32m=========================================================================[0m

[1;33mNext steps:[0m
1. Verify all pods are running: [0;32mkubectl get pods -n ridenext-nonrt[0m
2. Check Kafka topics: [0;32mkubectl exec -n ridenext-nonrt kafka-client -- kafka-topics --list --bootstrap-server kafka-1-kafka-bootstrap.ridenext-nonrt:9092[0m
3. Deploy Energy Saving rApp: See energy_saving_rapp_deployment.md

[1;33mLog file saved to: /home/bluefox/Manish/performance/rn-smo_cleanup/install/demo/LOGS/install-ranpm-Logs//install-ranpm-20260121-201711.log[0m
